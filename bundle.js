/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},s=[],i=0;i<e.length;i++){var l=e[i],c=r.base?l[0]+r.base:l[0],u=a[c]||0,d="".concat(c," ").concat(u);a[c]=u+1;var f=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(h);else{var p=o(h,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:p,references:1})}s.push(d)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var i=n(a[s]);t[i].references--}for(var l=r(e,o),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},162:(e,t,n)=>{var r=n(540),o=n(888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=o.useSyncExternalStore,i=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return i=t}return i=e}if(t=i,a(s,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(s=e,t):(s=e,i=n)}var s,i,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]);var h=s(e,d[0],d[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),u(h),h}},242:(e,t,n)=>{e.exports=n(162)},287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,a={},s=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,o)&&!k.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:s,ref:i,props:a,_owner:S.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,o,a,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+M(l,0):a,_(s)?(o="",null!=e&&(o=e.replace(N,"$&/")+"/"),O(s,t,o,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(N,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var u=a+M(i=e[c],c);l+=O(i,t,o,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(i=e.next()).done;)l+=O(i=i.value,t,o,u=a+M(i,c++),s);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",function(e){return t.call(n,e,o++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function $(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=$,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,s=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,i=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:o,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=$,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&s[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},338:(e,t,n)=>{var r=n(961);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},365:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),o=n.n(r),a=n(314),s=n.n(a)()(o());s.push([e.id,"/* ============================================\n   GLOBAL RESET & BASE STYLES\n   ============================================ */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;\n  overflow: hidden;\n  background: #ffffff;\n  color: #1f2937;\n}\n\n.dark-mode {\n  background: #111827;\n  color: #f9fafb;\n}\n\n/* ============================================\n   BLOKKS APP LAYOUT\n   ============================================ */\n.blokks-app {\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* ============================================\n   TOP RIBBON\n   ============================================ */\n.blokks-ribbon {\n  height: 60px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  flex-shrink: 0;\n}\n\n.ribbon-brand h1 {\n  font-size: 24px;\n  font-weight: 700;\n  color: white;\n  margin: 0;\n}\n\n.ribbon-section {\n  display: flex;\n  align-items: center;\n  gap: 0;\n}\n\n.ribbon-group {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 0 12px;\n}\n\n.ribbon-divider {\n  width: 1px;\n  height: 36px;\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.ribbon-btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 2px;\n  padding: 8px 12px;\n  border: none;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  font-size: 11px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  min-width: 60px;\n}\n\n.ribbon-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-1px);\n}\n\n.ribbon-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.ribbon-btn.primary {\n  background: white;\n  color: #667eea;\n}\n\n.ribbon-btn.primary:hover:not(:disabled) {\n  background: #f3f4f6;\n  transform: translateY(-1px);\n}\n\n.ribbon-icon {\n  font-size: 20px;\n}\n\n/* ============================================\n   WORKSPACE LAYOUT\n   ============================================ */\n.blokks-workspace {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n.blokks-main {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n.canvas-container {\n  flex: 1;\n  position: relative;\n  background: #f9fafb;\n}\n\n.dark-mode .canvas-container {\n  background: #111827;\n}\n\n/* ============================================\n   MEGA BLOCK PALETTE\n   ============================================ */\n.mega-palette {\n  width: 280px;\n  background: white;\n  border-right: 1px solid #e5e7eb;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  transition: width 0.3s ease;\n  flex-shrink: 0;\n}\n\n.mega-palette.collapsed {\n  width: 50px;\n  min-width: 50px;\n}\n\n.dark-mode .mega-palette {\n  background: #1f2937;\n  border-right-color: #374151;\n}\n\n.palette-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  border-bottom: 1px solid #e5e7eb;\n  flex-shrink: 0;\n}\n\n.dark-mode .palette-header {\n  border-bottom-color: #374151;\n}\n\n.palette-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 700;\n  color: #1f2937;\n}\n\n.dark-mode .palette-header h3 {\n  color: #f9fafb;\n}\n\n.palette-toggle {\n  background: none;\n  border: none;\n  font-size: 16px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 6px;\n  transition: all 0.2s;\n}\n\n.palette-toggle:hover {\n  background: #f3f4f6;\n  color: #1f2937;\n}\n\n.dark-mode .palette-toggle {\n  color: #9ca3af;\n}\n\n.dark-mode .palette-toggle:hover {\n  background: #374151;\n  color: #f9fafb;\n}\n\n.category-tabs {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  padding: 12px;\n  border-bottom: 1px solid #e5e7eb;\n  flex-shrink: 0;\n}\n\n.dark-mode .category-tabs {\n  border-bottom-color: #374151;\n}\n\n.category-tab {\n  padding: 6px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  color: #6b7280;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.category-tab:hover {\n  background: #f3f4f6;\n  border-color: #667eea;\n  color: #667eea;\n}\n\n.category-tab.active {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border-color: #667eea;\n}\n\n.dark-mode .category-tab {\n  background: #1f2937;\n  border-color: #374151;\n  color: #9ca3af;\n}\n\n.dark-mode .category-tab:hover {\n  background: #374151;\n}\n\n.blocks-grid {\n  flex: 1;\n  overflow-y: auto;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.mega-block-card {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-left: 4px solid #667eea;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: grab;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.mega-block-card:hover {\n  transform: translateX(4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mega-block-card:active {\n  cursor: grabbing;\n}\n\n.dark-mode .mega-block-card {\n  background: #1f2937;\n  border-color: #374151;\n}\n\n.mega-block-icon {\n  font-size: 28px;\n  flex-shrink: 0;\n}\n\n.mega-block-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.mega-block-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 4px;\n}\n\n.dark-mode .mega-block-name {\n  color: #f9fafb;\n}\n\n.mega-block-modes {\n  font-size: 11px;\n  color: #6b7280;\n}\n\n.dark-mode .mega-block-modes {\n  color: #9ca3af;\n}\n\n/* ============================================\n   MEGA BLOCK ON CANVAS\n   ============================================ */\n.mega-block {\n  background: white;\n  border: 2px solid #e5e7eb;\n  border-radius: 12px;\n  min-width: 240px;\n  max-width: 300px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  transition: all 0.2s;\n}\n\n.mega-block:hover {\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n}\n\n.mega-block.selected {\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);\n}\n\n.mega-block.processing {\n  border-color: #3b82f6;\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.8; }\n}\n\n.dark-mode .mega-block {\n  background: #1f2937;\n  border-color: #374151;\n}\n\n.mega-block-header {\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.mega-block-title {\n  font-size: 14px;\n  font-weight: 700;\n  color: #1f2937;\n}\n\n.dark-mode .mega-block-title {\n  color: #f9fafb;\n}\n\n.mega-block-body {\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.mode-selector {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 13px;\n  font-weight: 500;\n  color: #1f2937;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.mode-selector:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.dark-mode .mode-selector {\n  background: #111827;\n  border-color: #374151;\n  color: #f9fafb;\n}\n\n.sticky-textarea {\n  width: 100%;\n  padding: 10px 12px;\n  border: 1px dashed #e5e7eb;\n  border-radius: 6px;\n  font-family: 'Comic Sans MS', cursive;\n  font-size: 13px;\n  color: #1f2937;\n  resize: vertical;\n  background: #fef3c7;\n  transition: all 0.2s;\n}\n\n.sticky-textarea:focus {\n  outline: none;\n  border-color: #fbbf24;\n  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);\n}\n\n.dark-mode .sticky-textarea {\n  background: #78350f;\n  border-color: #92400e;\n  color: #fef3c7;\n}\n\n.sticky-note {\n  background: #fef3c7 !important;\n  border-color: #fbbf24 !important;\n}\n\n.dark-mode .sticky-note {\n  background: #78350f !important;\n  border-color: #92400e !important;\n}\n\n.processing-indicator {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px;\n  background: #eff6ff;\n  border-radius: 6px;\n  color: #3b82f6;\n}\n\n.dark-mode .processing-indicator {\n  background: #1e3a8a;\n  color: #93c5fd;\n}\n\n.spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid #e5e7eb;\n  border-top-color: #3b82f6;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.error-message {\n  padding: 12px;\n  background: #fee;\n  border-radius: 6px;\n  color: #dc2626;\n  font-size: 12px;\n}\n\n.mega-output {\n  padding: 12px;\n  background: #f0fdf4;\n  border-radius: 6px;\n}\n\n.dark-mode .mega-output {\n  background: #064e3b;\n}\n\n.mega-output strong {\n  display: block;\n  margin-bottom: 8px;\n  color: #059669;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.dark-mode .mega-output strong {\n  color: #6ee7b7;\n}\n\n.output-content {\n  color: #1f2937;\n  font-size: 13px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n.dark-mode .output-content {\n  color: #f9fafb;\n}\n\n.mega-handle {\n  width: 14px;\n  height: 14px;\n  border: 3px solid white;\n  border-radius: 50%;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n/* ============================================\n   CONTEXT MENU (FIXED)\n   ============================================ */\n.context-menu-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 999;\n}\n\n.context-menu {\n  position: fixed;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  padding: 4px;\n  z-index: 1000;\n  min-width: 200px;\n  animation: contextMenuFadeIn 0.15s ease;\n}\n\n@keyframes contextMenuFadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n.dark-mode .context-menu {\n  background: #1f2937;\n  border-color: #374151;\n}\n\n.context-menu-item {\n  padding: 10px 12px;\n  font-size: 13px;\n  color: #1f2937;\n  cursor: pointer;\n  border-radius: 6px;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.context-menu-item:hover {\n  background: #f3f4f6;\n  color: #667eea;\n}\n\n.dark-mode .context-menu-item {\n  color: #f9fafb;\n}\n\n.dark-mode .context-menu-item:hover {\n  background: #374151;\n}\n\n.context-menu-divider {\n  height: 1px;\n  background: #e5e7eb;\n  margin: 4px 0;\n}\n\n.dark-mode .context-menu-divider {\n  background: #374151;\n}\n\n/* ============================================\n   CHAT STAGE\n   ============================================ */\n.chat-stage {\n  width: 420px;\n  background: white;\n  border-left: 1px solid #e5e7eb;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\n.dark-mode .chat-stage {\n  background: #1f2937;\n  border-left-color: #374151;\n}\n\n.chat-empty {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  text-align: center;\n}\n\n.chat-empty-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n  opacity: 0.5;\n}\n\n.chat-empty h3 {\n  font-size: 18px;\n  color: #1f2937;\n  margin-bottom: 8px;\n}\n\n.dark-mode .chat-empty h3 {\n  color: #f9fafb;\n}\n\n.chat-empty p {\n  font-size: 14px;\n  color: #6b7280;\n  line-height: 1.6;\n}\n\n.dark-mode .chat-empty p {\n  color: #9ca3af;\n}\n\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.chat-message {\n  display: flex;\n  animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.chat-message.user {\n  justify-content: flex-end;\n}\n\n.chat-message.ai {\n  justify-content: flex-start;\n}\n\n.message-bubble {\n  max-width: 85%;\n  padding: 12px 16px;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.chat-message.user .message-bubble {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border-bottom-right-radius: 4px;\n}\n\n.chat-message.ai .message-bubble {\n  background: #f3f4f6;\n  color: #1f2937;\n  border-bottom-left-radius: 4px;\n}\n\n.dark-mode .chat-message.ai .message-bubble {\n  background: #374151;\n  color: #f9fafb;\n}\n\n.message-header {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin-bottom: 8px;\n  font-size: 12px;\n  opacity: 0.9;\n}\n\n.message-icon {\n  font-size: 14px;\n}\n\n.message-label {\n  font-weight: 700;\n}\n\n.message-block-name {\n  opacity: 0.7;\n  font-style: italic;\n}\n\n.message-content {\n  font-size: 14px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n.message-timestamp {\n  margin-top: 8px;\n  font-size: 11px;\n  opacity: 0.6;\n  text-align: right;\n}\n\n/* ============================================\n   CHAT INPUT BAR\n   ============================================ */\n.chat-input-bar {\n  padding: 16px;\n  border-top: 1px solid #e5e7eb;\n  background: white;\n  display: flex;\n  gap: 12px;\n  flex-shrink: 0;\n}\n\n.dark-mode .chat-input-bar {\n  background: #1f2937;\n  border-top-color: #374151;\n}\n\n.chat-input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 14px;\n  color: #1f2937;\n  background: white;\n  transition: all 0.2s;\n}\n\n.chat-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.dark-mode .chat-input {\n  background: #111827;\n  border-color: #374151;\n  color: #f9fafb;\n}\n\n.chat-send-btn {\n  padding: 12px 20px;\n  border: none;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.chat-send-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n.chat-send-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.send-icon {\n  font-size: 18px;\n  font-weight: 700;\n}\n\n/* ============================================\n   FULLSCREEN MODE\n   ============================================ */\n.blokks-app.fullscreen .mega-palette {\n  display: none;\n}\n\n/* ============================================\n   MODALS\n   ============================================ */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  animation: fadeIn 0.2s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.modal-content {\n  background: white;\n  border-radius: 12px;\n  width: 500px;\n  max-width: 90vw;\n  max-height: 90vh;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  overflow: hidden;\n  animation: slideUp 0.3s ease;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.dark-mode .modal-content {\n  background: #1f2937;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.dark-mode .modal-header {\n  border-bottom-color: #374151;\n}\n\n.modal-header h2 {\n  margin: 0;\n  font-size: 20px;\n  color: #1f2937;\n}\n\n.dark-mode .modal-header h2 {\n  color: #f9fafb;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: #6b7280;\n  cursor: pointer;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: all 0.2s;\n}\n\n.close-button:hover {\n  background: #f3f4f6;\n  color: #1f2937;\n}\n\n.dark-mode .close-button:hover {\n  background: #374151;\n  color: #f9fafb;\n}\n\n.modal-body {\n  padding: 24px;\n  overflow-y: auto;\n  max-height: calc(90vh - 140px);\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 16px 24px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.dark-mode .modal-footer {\n  border-top-color: #374151;\n}\n\n.cancel-button,\n.save-button {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.cancel-button {\n  background: #f3f4f6;\n  color: #374151;\n}\n\n.cancel-button:hover {\n  background: #e5e7eb;\n}\n\n.save-button {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.save-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n/* ============================================\n   SCROLLBAR STYLING\n   ============================================ */\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background: #d1d5db;\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: #9ca3af;\n}\n\n.dark-mode ::-webkit-scrollbar-thumb {\n  background: #4b5563;\n}\n\n.dark-mode ::-webkit-scrollbar-thumb:hover {\n  background: #6b7280;\n}\n\n/* ============================================\n   REACT FLOW OVERRIDES\n   ============================================ */\n.react-flow__node {\n  cursor: move;\n}\n\n.react-flow__edge-path {\n  stroke-width: 2;\n}\n\n.react-flow__controls {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.react-flow__background {\n  background-color: transparent;\n}\n",""]);const i=s},463:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var i=2*(r+1)-1,l=e[i],c=i+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(x);else{var t=r(u);null!==t&&T(_,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,b(C),C=-1),p=!0;var a=h;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!O());){var s=f.callback;if("function"==typeof s){f.callback=null,h=f.priorityLevel;var i=s(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof i?f.callback=i:f===r(c)&&o(c),w(n)}else o(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&T(_,d.startTime-n),l=!1}return l}finally{f=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,E=null,C=-1,N=5,M=-1;function O(){return!(t.unstable_now()-M<N)}function I(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?S():(k=!1,E=null)}}else k=!1}if("function"==typeof v)S=function(){v(I)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=I,S=function(){R.postMessage(null)}}else S=function(){y(I,0)};function P(e){E=e,k||(k=!0,S())}function T(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:i=a+i,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,T(_,a-s))):(e.sortIndex=i,n(c,e),m||p||(m=!0,P(x))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},493:(e,t,n)=>{var r=n(540),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,s=r.useEffect,i=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return i(function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})},[e,n,t]),s(function(){return c(o)&&u({inst:o}),e(function(){c(o)&&u({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},540:(e,t,n)=>{e.exports=n(287)},551:(e,t,n)=>{var r=n(540),o=n(982);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,o,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function $(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var D,L=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function j(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),a=r.stack.split("\n"),s=o.length-1,i=a.length-1;1<=s&&0<=i&&o[s]!==a[i];)i--;for(;1<=s&&0<=i;s--,i--)if(o[s]!==a[i]){if(1!==s||1!==i)do{if(s--,0>--i||o[s]!==a[i]){var l="\n"+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=i);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function F(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return j(e.type,!1);case 11:return j(e.type.render,!1);case 1:return j(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(e){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ae(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,ke=null;function Ee(e){if(e=wo(e)){if("function"!=typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=xo(t),xe(e.stateNode,e.type,t))}}function Ce(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Ne(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Me(e,t){return e(t)}function Oe(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Me(e,t,n)}finally{Ie=!1,(null!==Se||null!==ke)&&(Oe(),Ne())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=xo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(u)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(ue){Pe=!1}function $e(e,t,n,r,o,a,s,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var De=!1,Le=null,ze=!1,Be=null,je={onError:function(e){De=!0,Le=e}};function Fe(e,t,n,r,o,a,s,i,l){De=!1,Le=null,$e.apply(je,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function qe(e){if(Ue(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return qe(o),e;if(s===r)return qe(o),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Xe=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Ge=o.unstable_requestPaint,Je=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null,st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var i=s&~o;0!==i?r=dt(i):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~o)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-st(t)),r|=e[n],t&=~o;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var _t,xt,St,kt,Et,Ct=!1,Nt=[],Mt=null,Ot=null,It=null,At=new Map,Rt=new Map,Pt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $t(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&null!==(t=wo(t))&&xt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Lt(e){var t=vo(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function jt(){Ct=!1,null!==Mt&&zt(Mt)&&(Mt=null),null!==Ot&&zt(Ot)&&(Ot=null),null!==It&&zt(It)&&(It=null),At.forEach(Bt),Rt.forEach(Bt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jt)))}function Ut(e){function t(t){return Ft(t,e)}if(0<Nt.length){Ft(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Ft(Mt,e),null!==Ot&&Ft(Ot,e),null!==It&&Ft(It,e),At.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var Ht=w.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var o=vt,a=Ht.transition;Ht.transition=null;try{vt=1,Xt(e,t,n,r)}finally{vt=o,Ht.transition=a}}function Vt(e,t,n,r){var o=vt,a=Ht.transition;Ht.transition=null;try{vt=4,Xt(e,t,n,r)}finally{vt=o,Ht.transition=a}}function Xt(e,t,n,r){if(qt){var o=Yt(e,t,n,r);if(null===o)qr(e,t,r,Kt,n),$t(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Mt=Dt(Mt,e,t,n,r,o),!0;case"dragenter":return Ot=Dt(Ot,e,t,n,r,o),!0;case"mouseover":return It=Dt(It,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return At.set(a,Dt(At.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Rt.set(a,Dt(Rt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if($t(e,r),4&t&&-1<Tt.indexOf(e)){for(;null!==o;){var a=wo(o);if(null!==a&&_t(a),null===(a=Yt(e,t,n,r))&&qr(e,t,r,Kt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=vo(e=_e(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,o="value"in Jt?Jt.value:Jt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),fn=on(dn),hn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(hn),mn=on(L({},hn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),yn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(bn),wn=on(L({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return kn}var Cn=L({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=on(Cn),Mn=on(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(An),Pn=[9,13,27,32],Tn=u&&"CompositionEvent"in window,$n=null;u&&"documentMode"in document&&($n=document.documentMode);var Dn=u&&"TextEvent"in window&&!$n,Ln=u&&(!Tn||$n&&8<$n&&11>=$n),zn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1,Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Xn=null;function Kn(e){zr(e,0)}function Yn(e){if(X(_o(e)))return e}function Gn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Xn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Wn(t,Xn,e,_e(e)),Ae(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ar(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ir="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ir(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!ir(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=ur(n,a);var s=ur(n,r);o&&s&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==K(r)||(r="selectionStart"in(r=gr)&&hr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Vr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},kr={};function Er(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),Nr=Er("animationiteration"),Mr=Er("animationstart"),Or=Er("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Tr=Ar[Pr];Rr(Tr.toLowerCase(),"on"+(Tr[0].toUpperCase()+Tr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Nr,"onAnimationIteration"),Rr(Mr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Or,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,s,i,l,c){if(Fe.apply(this,arguments),De){if(!De)throw Error(a(198));var u=Le;De=!1,Le=null,ze||(ze=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var i=r[s],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==a&&o.isPropagationStopped())break e;Lr(o,i,c),a=l}else for(s=0;s<r.length;s++){if(l=(i=r[s]).instance,c=i.currentTarget,i=i.listener,l!==a&&o.isPropagationStopped())break e;Lr(o,i,c),a=l}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Fr]){e[Fr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||jr(t,!1,e),jr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,jr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Gt(t)){case 1:var o=Wt;break;case 4:o=Vt;break;default:o=Xt}n=o.bind(null,t,n,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,o){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var i=r.stateNode.containerInfo;if(i===o||8===i.nodeType&&i.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==i;){if(null===(s=vo(i)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}i=i.parentNode}}r=r.return}Ae(function(){var r=a,o=_e(n),s=[];e:{var i=Ir.get(e);if(void 0!==i){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Cr:case Nr:case Mr:l=yn;break;case Or:l=In;break;case"scroll":l=fn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==i?i+"Capture":null:i;u=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&null!=(m=Re(p,f))&&u.push(Wr(p,m,h))),d)break;p=p.return}0<u.length&&(i=new l(i,c,null,n,o),s.push({event:i,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vo(c)&&!c[mo])&&(l||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vo(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?i:_o(l),h=null==c?i:_o(c),(i=new u(m,p+"leave",l,n,o)).target=d,i.relatedTarget=h,m=null,vo(o)===r&&((u=new u(f,p+"enter",c,n,o)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Xr(h))p++;for(h=0,m=f;m;m=Xr(m))h++;for(;0<p-h;)u=Xr(u),p--;for(;0<h-p;)f=Xr(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Xr(u),f=Xr(f)}u=null}else u=null;null!==l&&Kr(s,i,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(i=r?_o(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var g=Gn;else if(qn(i))if(Jn)g=sr;else{g=or;var y=rr}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(s,g,n,o):(y&&y(e,i,r),"focusout"===e&&(y=i._wrapperState)&&y.controlled&&"number"===i.type&&ee(i,"number",i.value)),y=r?_o(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(s,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,o)}var b;if(Tn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Un?jn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==v?"onCompositionEnd"===v&&Un&&(b=en()):(Qt="value"in(Jt=o)?Jt.value:Jt.textContent,Un=!0)),0<(y=Vr(r,v)).length&&(v=new wn(v,e,null,n,o),s.push({event:v,listeners:y}),(b||null!==(b=Fn(n)))&&(v.data=b))),(b=Dn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Tn&&jn(e,t)?(e=en(),Zt=Qt=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Vr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),s.push({event:o,listeners:r}),o.data=b)}zr(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,o)),null!=(a=Re(e,t))&&r.push(Wr(e,a,o))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,o){for(var a=t._reactName,s=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(null!==l&&l===r)break;5===i.tag&&null!==c&&(i=c,o?null!=(l=Re(n,a))&&s.unshift(Wr(n,l,i)):o||null!=(l=Re(n,a))&&s.push(Wr(n,l,i))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Jr(e){return("string"==typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,ao="function"==typeof Promise?Promise:void 0,so="function"==typeof queueMicrotask?queueMicrotask:void 0!==ao?function(e){return ao.resolve(null).then(e).catch(io)}:ro;function io(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ut(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),ho="__reactFiber$"+fo,po="__reactProps$"+fo,mo="__reactContainer$"+fo,go="__reactEvents$"+fo,yo="__reactListeners$"+fo,bo="__reactHandles$"+fo;function vo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[ho])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[ho]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _o(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xo(e){return e[po]||null}var So=[],ko=-1;function Eo(e){return{current:e}}function Co(e){0>ko||(e.current=So[ko],So[ko]=null,ko--)}function No(e,t){ko++,So[ko]=e.current,e.current=t}var Mo={},Oo=Eo(Mo),Io=Eo(!1),Ao=Mo;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Mo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Po(e){return null!=e.childContextTypes}function To(){Co(Io),Co(Oo)}function $o(e,t,n){if(Oo.current!==Mo)throw Error(a(168));No(Oo,t),No(Io,n)}function Do(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,H(e)||"Unknown",o));return L({},n,r)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mo,Ao=Oo.current,No(Oo,e),No(Io,Io.current),!0}function zo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Do(e,t,Ao),r.__reactInternalMemoizedMergedChildContext=e,Co(Io),Co(Oo),No(Oo,e)):Co(Io),No(Io,n)}var Bo=null,jo=!1,Fo=!1;function Uo(e){null===Bo?Bo=[e]:Bo.push(e)}function Ho(){if(!Fo&&null!==Bo){Fo=!0;var e=0,t=vt;try{var n=Bo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bo=null,jo=!1}catch(t){throw null!==Bo&&(Bo=Bo.slice(e+1)),Xe(Ze,Ho),t}finally{vt=t,Fo=!1}}return null}var qo=[],Wo=0,Vo=null,Xo=0,Ko=[],Yo=0,Go=null,Jo=1,Qo="";function Zo(e,t){qo[Wo++]=Xo,qo[Wo++]=Vo,Vo=e,Xo=t}function ea(e,t,n){Ko[Yo++]=Jo,Ko[Yo++]=Qo,Ko[Yo++]=Go,Go=e;var r=Jo;e=Qo;var o=32-st(r)-1;r&=~(1<<o),n+=1;var a=32-st(t)+o;if(30<a){var s=o-o%5;a=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Jo=1<<32-st(t)+o|n<<o|r,Qo=a+e}else Jo=1<<a|n<<o|r,Qo=e}function ta(e){null!==e.return&&(Zo(e,1),ea(e,1,0))}function na(e){for(;e===Vo;)Vo=qo[--Wo],qo[Wo]=null,Xo=qo[--Wo],qo[Wo]=null;for(;e===Go;)Go=Ko[--Yo],Ko[Yo]=null,Qo=Ko[--Yo],Ko[Yo]=null,Jo=Ko[--Yo],Ko[Yo]=null}var ra=null,oa=null,aa=!1,sa=null;function ia(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Go?{id:Jo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return!(!(1&e.mode)||128&e.flags)}function ua(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&la(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=co(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=oa;e;)e=co(e.nextSibling)}function pa(){oa=ra=null,aa=!1}function ma(e){null===sa?sa=[e]:sa.push(e)}var ga=w.ReactCurrentBatchConfig;function ya(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=o.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ba(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===R&&va(a)===t.type)?((r=o(t,n.props)).ref=ya(e,t,n),r.return=e,r):((r=Tc(n.type,n.key,n.props,null,e.mode,r)).ref=ya(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=$c(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Tc(t.type,t.key,t.props,null,e.mode,n)).ref=ya(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||$(t))return(t=$c(t,e.mode,n,null)).return=e,t;ba(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===o?c(e,t,n,r):null;case x:return n.key===o?u(e,t,n,r):null;case R:return h(e,t,(o=n._init)(n._payload),r)}if(te(n)||$(n))return null!==o?null:d(e,t,n,r,null);ba(e,n)}return null}function p(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||$(r))return d(t,e=e.get(n)||null,r,o,null);ba(t,r)}return null}function m(o,a,i,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<i.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(o,d,i[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===i.length)return n(o,d),aa&&Zo(o,m),c;if(null===d){for(;m<i.length;m++)null!==(d=f(o,i[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return aa&&Zo(o,m),c}for(d=r(o,d);m<i.length;m++)null!==(g=p(d,o,m,i[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),aa&&Zo(o,m),c}function g(o,i,l,c){var u=$(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=i,g=i=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=h(o,m,b.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(o,m),i=s(v,i,g),null===d?u=v:d.sibling=v,d=v,m=y}if(b.done)return n(o,m),aa&&Zo(o,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=f(o,b.value,c))&&(i=s(b,i,g),null===d?u=b:d.sibling=b,d=b);return aa&&Zo(o,g),u}for(m=r(o,m);!b.done;g++,b=l.next())null!==(b=p(m,o,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),i=s(b,i,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach(function(e){return t(o,e)}),aa&&Zo(o,g),u}return function e(r,a,s,l){if("object"==typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(a=o(u,s.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===R&&va(c)===u.type){n(r,u.sibling),(a=o(u,s.props)).ref=ya(r,u,s),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((a=$c(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Tc(s.type,s.key,s.props,null,r.mode,l)).ref=ya(r,a,s),l.return=r,r=l)}return i(r);case x:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=o(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=zc(s,r.mode,l)).return=r,r=a}return i(r);case R:return e(r,a,(u=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if($(s))return g(r,a,s,l);ba(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,s)).return=r,r=a):(n(r,a),(a=Lc(s,r.mode,l)).return=r,r=a),i(r)):n(r,a)}}var _a=wa(!0),xa=wa(!1),Sa=Eo(null),ka=null,Ea=null,Ca=null;function Na(){Ca=Ea=ka=null}function Ma(e){var t=Sa.current;Co(Sa),e._currentValue=t}function Oa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ka=e,Ca=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vi=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===Ea){if(null===ka)throw Error(a(308));Ea=e,ka.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return t}var Ra=null;function Pa(e){null===Ra?Ra=[e]:Ra.push(e)}function Ta(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Pa(t)):(n.next=o.next,o.next=n),t.interleaved=n,$a(e,r)}function $a(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Ml){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,$a(e,n)}return null===(o=r.interleaved)?(t.next=t,Pa(r)):(t.next=o.next,o.next=t),r.interleaved=t,$a(e,n)}function Fa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ha(e,t,n,r){var o=e.updateQueue;Da=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&(i=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=l)}if(null!==a){var d=o.baseState;for(s=0,u=c=l=null,i=a;;){var f=i.lane,h=i.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,m=i;switch(f=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=m.payload)?p.call(h,d,f):p))break e;d=L({},d,f);break e;case 2:Da=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[i]:f.push(i))}else h={eventTime:h,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,s|=f;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(f=i).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{s|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Dl|=s,e.lanes=s,e.memoizedState=d}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(a(191,o));o.call(r)}}}var Wa={},Va=Eo(Wa),Xa=Eo(Wa),Ka=Eo(Wa);function Ya(e){if(e===Wa)throw Error(a(174));return e}function Ga(e,t){switch(No(Ka,t),No(Xa,e),No(Va,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(Va),No(Va,t)}function Ja(){Co(Va),Co(Xa),Co(Ka)}function Qa(e){Ya(Ka.current);var t=Ya(Va.current),n=le(t,e.type);t!==n&&(No(Xa,e),No(Va,n))}function Za(e){Xa.current===e&&(Co(Va),Co(Xa))}var es=Eo(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var os=w.ReactCurrentDispatcher,as=w.ReactCurrentBatchConfig,ss=0,is=null,ls=null,cs=null,us=!1,ds=!1,fs=0,hs=0;function ps(){throw Error(a(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,o,s){if(ss=s,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?Zs:ei,e=n(r,o),ds){s=0;do{if(ds=!1,fs=0,25<=s)throw Error(a(301));s+=1,cs=ls=null,t.updateQueue=null,os.current=ti,e=n(r,o)}while(ds)}if(os.current=Qs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=is=null,us=!1,t)throw Error(a(300));return e}function ys(){var e=0!==fs;return fs=0,e}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?is.memoizedState=cs=e:cs=cs.next=e,cs}function vs(){if(null===ls){var e=is.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?is.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?is.memoizedState=cs=e:cs=cs.next=e}return cs}function ws(e,t){return"function"==typeof t?t(e):t}function _s(e){var t=vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ls,o=r.baseQueue,s=n.pending;if(null!==s){if(null!==o){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(null!==o){s=o.next,r=r.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,i=r):c=c.next=f,is.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==s);null===c?i=r:c.next=l,ir(r,t.memoizedState)||(vi=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{s=o.lane,is.lanes|=s,Dl|=s,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xs(e){var t=vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(null!==o){n.pending=null;var i=o=o.next;do{s=e(s,i.action),i=i.next}while(i!==o);ir(s,t.memoizedState)||(vi=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function ks(e,t){var n=is,r=vs(),o=t(),s=!ir(r.memoizedState,o);if(s&&(r.memoizedState=o,vi=!0),r=r.queue,Ds(Ns.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,As(9,Cs.bind(null,n,r,o,t),void 0,null),null===Ol)throw Error(a(349));30&ss||Es(n,t,o)}return o}function Es(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,Ms(t)&&Os(e)}function Ns(e,t,n){return n(function(){Ms(t)&&Os(e)})}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(e){return!0}}function Os(e){var t=$a(e,1);null!==t&&nc(t,e,1,-1)}function Is(e){var t=bs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,is,e),[t.memoizedState,e]}function As(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return vs().memoizedState}function Ps(e,t,n,r){var o=bs();is.flags|=e,o.memoizedState=As(1|t,n,void 0,void 0===r?null:r)}function Ts(e,t,n,r){var o=vs();r=void 0===r?null:r;var a=void 0;if(null!==ls){var s=ls.memoizedState;if(a=s.destroy,null!==r&&ms(r,s.deps))return void(o.memoizedState=As(t,n,a,r))}is.flags|=e,o.memoizedState=As(1|t,n,a,r)}function $s(e,t){return Ps(8390656,8,e,t)}function Ds(e,t){return Ts(2048,8,e,t)}function Ls(e,t){return Ts(4,2,e,t)}function zs(e,t){return Ts(4,4,e,t)}function Bs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function js(e,t,n){return n=null!=n?n.concat([e]):null,Ts(4,4,Bs.bind(null,t,e),n)}function Fs(){}function Us(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return 21&ss?(ir(n,t)||(n=mt(),is.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vi=!0),e.memoizedState=n)}function Ws(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=as.transition;as.transition={};try{e(!1),t()}finally{vt=n,as.transition=r}}function Vs(){return vs().memoizedState}function Xs(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e)?Gs(t,n):null!==(n=Ta(e,t,n,r))&&(nc(n,e,r,ec()),Js(n,t,r))}function Ks(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Gs(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=a(s,n);if(o.hasEagerState=!0,o.eagerState=i,ir(i,s)){var l=t.interleaved;return null===l?(o.next=o,Pa(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(e){}null!==(n=Ta(e,t,o,r))&&(nc(n,e,r,o=ec()),Js(n,t,r))}}function Ys(e){var t=e.alternate;return e===is||null!==t&&t===is}function Gs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Qs={readContext:Aa,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Zs={readContext:Aa,useCallback:function(e,t){return bs().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:$s,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ps(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=bs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xs.bind(null,is,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bs().memoizedState=e},useState:Is,useDebugValue:Fs,useDeferredValue:function(e){return bs().memoizedState=e},useTransition:function(){var e=Is(!1),t=e[0];return e=Ws.bind(null,e[1]),bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=is,o=bs();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ol)throw Error(a(349));30&ss||Es(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,$s(Ns.bind(null,r,s,e),[e]),r.flags|=2048,As(9,Cs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=bs(),t=Ol.identifierPrefix;if(aa){var n=Qo;t=":"+t+"R"+(n=(Jo&~(1<<32-st(Jo)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Aa,useCallback:Us,useContext:Aa,useEffect:Ds,useImperativeHandle:js,useInsertionEffect:Ls,useLayoutEffect:zs,useMemo:Hs,useReducer:_s,useRef:Rs,useState:function(){return _s(ws)},useDebugValue:Fs,useDeferredValue:function(e){return qs(vs(),ls.memoizedState,e)},useTransition:function(){return[_s(ws)[0],vs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ks,useId:Vs,unstable_isNewReconciler:!1},ti={readContext:Aa,useCallback:Us,useContext:Aa,useEffect:Ds,useImperativeHandle:js,useInsertionEffect:Ls,useLayoutEffect:zs,useMemo:Hs,useReducer:xs,useRef:Rs,useState:function(){return xs(ws)},useDebugValue:Fs,useDeferredValue:function(e){var t=vs();return null===ls?t.memoizedState=e:qs(t,ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],vs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ks,useId:Vs,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ri(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=Ba(r,o);a.payload=t,null!=n&&(a.callback=n),null!==(t=ja(e,a,o))&&(nc(t,e,o,r),Fa(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=Ba(r,o);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=ja(e,a,o))&&(nc(t,e,o,r),Fa(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Ba(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=ja(e,o,r))&&(nc(t,e,r,n),Fa(t,e,r))}};function ai(e,t,n,r,o,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(o,a))}function si(e,t,n){var r=!1,o=Mo,a=t.contextType;return"object"==typeof a&&null!==a?a=Aa(a):(o=Po(t)?Ao:Oo.current,a=(r=null!=(r=t.contextTypes))?Ro(e,o):Mo),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ii(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},La(e);var a=t.contextType;"object"==typeof a&&null!==a?o.context=Aa(a):(a=Po(t)?Ao:Oo.current,o.context=Ro(e,a)),o.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ri(e,t,a,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oi.enqueueReplaceState(o,o.state,null),Ha(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ui(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var fi="function"==typeof WeakMap?WeakMap:Map;function hi(e,t,n){(n=Ba(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Wl=r),di(0,t)},n}function pi(e,t,n){(n=Ba(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){di(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){di(0,t),"function"!=typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fi;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yi(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ba(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e)}var bi=w.ReactCurrentOwner,vi=!1;function wi(e,t,n,r){t.child=null===e?xa(t,null,n,r):_a(t,e.child,n,r)}function _i(e,t,n,r,o){n=n.render;var a=t.ref;return Ia(t,o),r=gs(e,t,n,r,a,o),n=ys(),null===e||vi?(aa&&n&&ta(t),t.flags|=1,wi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qi(e,t,o))}function xi(e,t,n,r,o){if(null===e){var a=n.type;return"function"!=typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Si(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return qi(e,t,o)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Si(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(vi=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,qi(e,t,o);131072&e.flags&&(vi=!0)}}return Ci(e,t,n,r,o)}function ki(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,No(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,No(Pl,Rl),Rl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},No(Pl,Rl),Rl|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,No(Pl,Rl),Rl|=r;return wi(e,t,o,n),t.child}function Ei(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ci(e,t,n,r,o){var a=Po(n)?Ao:Oo.current;return a=Ro(t,a),Ia(t,o),n=gs(e,t,n,r,a,o),r=ys(),null===e||vi?(aa&&r&&ta(t),t.flags|=1,wi(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qi(e,t,o))}function Ni(e,t,n,r,o){if(Po(n)){var a=!0;Lo(t)}else a=!1;if(Ia(t,o),null===t.stateNode)Hi(e,t),si(t,n,r),li(t,n,r,o),r=!0;else if(null===e){var s=t.stateNode,i=t.memoizedProps;s.props=i;var l=s.context,c=n.contextType;c="object"==typeof c&&null!==c?Aa(c):Ro(t,c=Po(n)?Ao:Oo.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(i!==r||l!==c)&&ii(t,s,r,c),Da=!1;var f=t.memoizedState;s.state=f,Ha(t,r,s,o),l=t.memoizedState,i!==r||f!==l||Io.current||Da?("function"==typeof u&&(ri(t,n,u,r),l=t.memoizedState),(i=Da||ai(t,n,i,r,f,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=i):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,za(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ni(t.type,i),s.props=c,d=t.pendingProps,f=s.context,l="object"==typeof(l=n.contextType)&&null!==l?Aa(l):Ro(t,l=Po(n)?Ao:Oo.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(i!==d||f!==l)&&ii(t,s,r,l),Da=!1,f=t.memoizedState,s.state=f,Ha(t,r,s,o);var p=t.memoizedState;i!==d||f!==p||Io.current||Da?("function"==typeof h&&(ri(t,n,h,r),p=t.memoizedState),(c=Da||ai(t,n,c,r,f,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Mi(e,t,n,r,a,o)}function Mi(e,t,n,r,o,a){Ei(e,t);var s=!!(128&t.flags);if(!r&&!s)return o&&zo(t,n,!1),qi(e,t,a);r=t.stateNode,bi.current=t;var i=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_a(t,e.child,null,a),t.child=_a(t,null,i,a)):wi(e,t,i,a),t.memoizedState=r.state,o&&zo(t,n,!0),t.child}function Oi(e){var t=e.stateNode;t.pendingContext?$o(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$o(0,t.context,!1),Ga(e,t.containerInfo)}function Ii(e,t,n,r,o){return pa(),ma(o),t.flags|=256,wi(e,t,n,r),t.child}var Ai,Ri,Pi,Ti,$i={dehydrated:null,treeContext:null,retryLane:0};function Di(e){return{baseLanes:e,cachePool:null,transitions:null}}function Li(e,t,n){var r,o=t.pendingProps,s=es.current,i=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),No(es,1&s),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},1&o||null===i?i=Dc(l,o,0,null):(i.childLanes=0,i.pendingProps=l),e=$c(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Di(n),t.memoizedState=$i,e):zi(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,o,s,i){if(n)return 256&t.flags?(t.flags&=-257,Bi(e,t,i,r=ui(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Dc({mode:"visible",children:r.children},o,0,null),(s=$c(s,o,i,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&_a(t,e.child,null,i),t.child.memoizedState=Di(i),t.memoizedState=$i,s);if(!(1&t.mode))return Bi(e,t,i,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Bi(e,t,i,r=ui(s=Error(a(419)),r,void 0))}if(l=0!==(i&e.childLanes),vi||l){if(null!==(r=Ol)){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|i))?0:o)&&o!==s.retryLane&&(s.retryLane=o,$a(e,o),nc(r,e,o,-1))}return mc(),Bi(e,t,i,r=ui(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,sa=null,null!==e&&(Ko[Yo++]=Jo,Ko[Yo++]=Qo,Ko[Yo++]=Go,Jo=e.id,Qo=e.overflow,Go=t),(t=zi(t,r.children)).flags|=4096,t)}(e,t,l,o,r,s,n);if(i){i=o.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 1&l||t.child===s?(o=Pc(s,c)).subtreeFlags=14680064&s.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null),null!==r?i=Pc(r,i):(i=$c(i,l,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=null===(l=e.child.memoizedState)?Di(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=$i,o}return e=(i=e.child).sibling,o=Pc(i,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function zi(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bi(e,t,n,r){return null!==r&&ma(r),_a(t,e.child,null,n),(e=zi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ji(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Oa(e.return,t,n)}function Fi(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Ui(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(wi(e,t,r.children,n),2&(r=es.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ji(e,n,t);else if(19===e.tag)ji(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(No(es,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Fi(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ts(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Fi(t,!0,n,null,a);break;case"together":Fi(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Hi(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wi(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xi(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(t),null;case 1:case 17:return Po(t.type)&&To(),Vi(t),null;case 3:return r=t.stateNode,Ja(),Co(Io),Co(Oo),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==sa&&(sc(sa),sa=null))),Ri(e,t),Vi(t),null;case 5:Za(t);var o=Ya(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Pi(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vi(t),null}if(e=Ya(Va.current),fa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ho]=t,r[po]=s,e=!!(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<$r.length;o++)Br($r[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":G(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":oe(r,s),Br("invalid",r)}for(var l in be(n,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":V(r),Z(r,s,!0);break;case"textarea":V(r),se(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ho]=t,e[po]=r,Ai(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Br("cancel",e),Br("close",e),o=r;break;case"iframe":case"object":case"embed":Br("load",e),o=r;break;case"video":case"audio":for(o=0;o<$r.length;o++)Br($r[o],e);o=r;break;case"source":Br("error",e),o=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),o=r;break;case"details":Br("toggle",e),o=r;break;case"input":G(e,r),o=Y(e,r),Br("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Br("invalid",e)}for(s in be(n,o),c=o)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"==typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(i.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Br("scroll",e):null!=u&&v(e,s,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vi(t),null;case 6:if(e&&null!=t.stateNode)Ti(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ka.current),Ya(Va.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(s=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Qr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return Vi(t),null;case 13:if(Co(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&1&t.mode&&!(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[ho]=t}else pa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vi(t),s=!1}else null!==sa&&(sc(sa),sa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&es.current?0===Tl&&(Tl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Vi(t),null);case 4:return Ja(),Ri(e,t),null===e&&Ur(t.stateNode.containerInfo),Vi(t),null;case 10:return Ma(t.type._context),Vi(t),null;case 19:if(Co(es),null===(s=t.memoizedState))return Vi(t),null;if(r=!!(128&t.flags),null===(l=s.rendering))if(r)Wi(s,!1);else{if(0!==Tl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Wi(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return No(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Ul&&(t.flags|=128,r=!0,Wi(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wi(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!aa)return Vi(t),null}else 2*Je()-s.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Wi(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=es.current,No(es,r?1&n|2:1&n),t):(Vi(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Rl)&&(Vi(t),6&t.subtreeFlags&&(t.flags|=8192)):Vi(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ki(e,t){switch(na(t),t.tag){case 1:return Po(t.type)&&To(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Co(Io),Co(Oo),rs(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Co(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(es),null;case 4:return Ja(),null;case 10:return Ma(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ai=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ri=function(){},Pi=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ya(Va.current);var a,s=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),s=[];break;case"select":o=L({},o,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":o=re(e,o),r=re(e,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ti=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yi=!1,Gi=!1,Ji="function"==typeof WeakSet?WeakSet:Set,Qi=null;function Zi(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){kc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){kc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&el(t,n,a)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[ho],delete t[po],delete t[go],delete t[yo],delete t[bo]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(e){}switch(n.tag){case 5:Gi||Zi(n,t);case 6:var r=ul,o=dl;ul=null,fl(e,t,n),dl=o,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Ut(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,fl(e,t,n),ul=r,dl=o;break;case 0:case 11:case 14:case 15:if(!Gi&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){o=r=r.next;do{var a=o,s=a.destroy;a=a.tag,void 0!==s&&(2&a||4&a)&&el(n,t,s),o=o.next}while(o!==r)}fl(e,t,n);break;case 1:if(!Gi&&(Zi(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){kc(n,t,e)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Gi=(r=Gi)||null!==n.memoizedState,fl(e,t,n),Gi=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ji),t.forEach(function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));hl(s,i,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(e){kc(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){kc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){kc(e,e.return,t)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zi(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zi(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(t){kc(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var s=e.memoizedProps,i=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(o,s),ve(l,i);var u=ve(l,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];"style"===d?ge(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):v(o,d,f,u)}switch(l){case"input":Q(o,s);break;case"textarea":ae(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(o,!!s.multiple,p,!1):h!==!!s.multiple&&(null!=s.defaultValue?ne(o,!!s.multiple,s.defaultValue,!0):ne(o,!!s.multiple,s.multiple?[]:"",!1))}o[po]=s}catch(t){kc(e,e.return,t)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(t){kc(e,e.return,t)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(t){kc(e,e.return,t)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(Fl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Gi=(u=Gi)||d,ml(t,e),Gi=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Qi=e,d=e.child;null!==d;){for(f=Qi=d;null!==Qi;){switch(p=(h=Qi).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zi(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){kc(r,n,e)}}break;case 5:Zi(h,h.return);break;case 22:if(null!==h.memoizedState){_l(f);continue}}null!==p?(p.return=h,Qi=p):_l(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,u?"function"==typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=f.stateNode,i=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",i))}catch(t){kc(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){kc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),cl(e,il(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,il(e),s);break;default:throw Error(a(161))}}catch(t){kc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Qi=e,vl(e,t,n)}function vl(e,t,n){for(var r=!!(1&e.mode);null!==Qi;){var o=Qi,a=o.child;if(22===o.tag&&r){var s=null!==o.memoizedState||Yi;if(!s){var i=o.alternate,l=null!==i&&null!==i.memoizedState||Gi;i=Yi;var c=Gi;if(Yi=s,(Gi=l)&&!c)for(Qi=o;null!==Qi;)l=(s=Qi).child,22===s.tag&&null!==s.memoizedState?xl(o):null!==l?(l.return=s,Qi=l):xl(o);for(;null!==a;)Qi=a,vl(a,t,n),a=a.sibling;Qi=o,Yi=i,Gi=c}wl(e)}else 8772&o.subtreeFlags&&null!==a?(a.return=o,Qi=a):wl(e)}}function wl(e){for(;null!==Qi;){var t=Qi;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Gi||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gi)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ni(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qa(t,s,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,i,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ut(f)}}}break;default:throw Error(a(163))}Gi||512&t.flags&&ol(t)}catch(e){kc(t,t.return,e)}}if(t===e){Qi=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qi=n;break}Qi=t.return}}function _l(e){for(;null!==Qi;){var t=Qi;if(t===e){Qi=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qi=n;break}Qi=t.return}}function xl(e){for(;null!==Qi;){var t=Qi;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){kc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){kc(t,o,e)}}var a=t.return;try{ol(t)}catch(e){kc(t,a,e)}break;case 5:var s=t.return;try{ol(t)}catch(e){kc(t,s,e)}}}catch(e){kc(t,t.return,e)}if(t===e){Qi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Qi=i;break}Qi=t.return}}var Sl,kl=Math.ceil,El=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,Ml=0,Ol=null,Il=null,Al=0,Rl=0,Pl=Eo(0),Tl=0,$l=null,Dl=0,Ll=0,zl=0,Bl=null,jl=null,Fl=0,Ul=1/0,Hl=null,ql=!1,Wl=null,Vl=null,Xl=!1,Kl=null,Yl=0,Gl=0,Jl=null,Ql=-1,Zl=0;function ec(){return 6&Ml?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 1&e.mode?2&Ml&&0!==Al?Al&-Al:null!==ga.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Gt(e.type):1}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Jl=null,Error(a(185));yt(e,n,r),2&Ml&&e===Ol||(e===Ol&&(!(2&Ml)&&(Ll|=n),4===Tl&&ic(e,Al)),rc(e,r),1===n&&0===Ml&&!(1&t.mode)&&(Ul=Je()+500,jo&&Ho()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),i=1<<s,l=o[s];-1===l?0!==(i&n)&&0===(i&r)||(o[s]=ht(i,t)):l<=t&&(e.expiredLanes|=i),a&=~i}}(e,t);var r=ft(e,e===Ol?Al:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){jo=!0,Uo(e)}(lc.bind(null,e)):Uo(lc.bind(null,e)),so(function(){!(6&Ml)&&Ho()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Ql=-1,Zl=0,6&Ml)throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ol?Al:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=Ml;Ml|=2;var s=pc();for(Ol===e&&Al===t||(Hl=null,Ul=Je()+500,fc(e,t));;)try{bc();break}catch(t){hc(e,t)}Na(),El.current=s,Ml=o,null!==Il?t=0:(Ol=null,Al=0,t=Tl)}if(0!==t){if(2===t&&0!==(o=pt(e))&&(r=o,t=ac(e,o)),1===t)throw n=$l,fc(e,0),ic(e,r),rc(e,Je()),n;if(6===t)ic(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!ir(a(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=gc(e,r),2===t&&(s=pt(e),0!==s&&(r=s,t=ac(e,s))),1!==t)))throw n=$l,fc(e,0),ic(e,r),rc(e,Je()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,jl,Hl);break;case 3:if(ic(e,r),(130023424&r)===r&&10<(t=Fl+500-Je())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(_c.bind(null,e,jl,Hl),t);break}_c(e,jl,Hl);break;case 4:if(ic(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-st(r);s=1<<i,(i=t[i])>o&&(o=i),r&=~s}if(r=o,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ro(_c.bind(null,e,jl,Hl),r);break}_c(e,jl,Hl);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=n,null!==t&&sc(t)),e}function sc(e){null===jl?jl=e:jl.push.apply(jl,e)}function ic(e,t){for(t&=~zl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Ml)throw Error(a(327));xc();var t=ft(e,0);if(!(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=$l,fc(e,0),ic(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,jl,Hl),rc(e,Je()),null}function cc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Ul=Je()+500,jo&&Ho())}}function uc(e){null!==Kl&&0===Kl.tag&&!(6&Ml)&&xc();var t=Ml;Ml|=1;var n=Nl.transition,r=vt;try{if(Nl.transition=null,vt=1,e)return e()}finally{vt=r,Nl.transition=n,!(6&(Ml=t))&&Ho()}}function dc(){Rl=Pl.current,Co(Pl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&To();break;case 3:Ja(),Co(Io),Co(Oo),rs();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:Co(es);break;case 10:Ma(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Ol=e,Il=e=Pc(e.current,null),Al=Rl=t,Tl=0,$l=null,zl=Ll=Dl=0,jl=Bl=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=o,r.next=s}n.pending=r}Ra=null}return e}function hc(e,t){for(;;){var n=Il;try{if(Na(),os.current=Qs,us){for(var r=is.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=is=null,ds=!1,fs=0,Cl.current=null,null===n||null===n.return){Tl=1,$l=t,Il=null;break}e:{var s=e,i=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,f=d.tag;if(!(1&d.mode||0!==f&&11!==f&&15!==f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gi(i);if(null!==p){p.flags&=-257,yi(p,i,l,0,t),1&p.mode&&mi(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){mi(s,u,t),mc();break e}c=Error(a(426))}else if(aa&&1&l.mode){var y=gi(i);if(null!==y){!(65536&y.flags)&&(y.flags|=256),yi(y,i,l,0,t),ma(ci(c,l));break e}}s=c=ci(c,l),4!==Tl&&(Tl=2),null===Bl?Bl=[s]:Bl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,hi(0,c,t));break e;case 1:l=c;var b=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof b.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Vl&&Vl.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,pi(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(e){t=e,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Qs,null===e?Qs:e}function mc(){0!==Tl&&3!==Tl&&2!==Tl||(Tl=4),null===Ol||!(268435455&Dl)&&!(268435455&Ll)||ic(Ol,Al)}function gc(e,t){var n=Ml;Ml|=2;var r=pc();for(Ol===e&&Al===t||(Hl=null,fc(e,t));;)try{yc();break}catch(t){hc(e,t)}if(Na(),Ml=n,El.current=r,null!==Il)throw Error(a(261));return Ol=null,Al=0,Tl}function yc(){for(;null!==Il;)vc(Il)}function bc(){for(;null!==Il&&!Ye();)vc(Il)}function vc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wc(e):Il=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ki(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Tl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Xi(n,t,Rl)))return void(Il=n);if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Tl&&(Tl=5)}function _c(e,t,n){var r=vt,o=Nl.transition;try{Nl.transition=null,vt=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(6&Ml)throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-st(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,s),e===Ol&&(Il=Ol=null,Al=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Xl||(Xl=!0,Oc(tt,function(){return xc(),null})),s=!!(15990&n.flags),15990&n.subtreeFlags||s){s=Nl.transition,Nl.transition=null;var i=vt;vt=1;var l=Ml;Ml|=4,Cl.current=null,function(e,t){if(eo=qt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==o&&3!==f.nodeType||(l=i+o),f!==s||0!==r&&3!==f.nodeType||(c=i+r),3===f.nodeType&&(i+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===o&&(l=i),h===s&&++d===r&&(c=i),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},qt=!1,Qi=t;null!==Qi;)if(e=(t=Qi).child,1028&t.subtreeFlags&&null!==e)e.return=t,Qi=e;else for(;null!==Qi;){t=Qi;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ni(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(e){kc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Qi=e;break}Qi=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(to),qt=!!eo,to=eo=null,e.current=n,bl(n,e,o),Ge(),Ml=l,vt=i,Nl.transition=s}else e.current=n;if(Xl&&(Xl=!1,Kl=e,Yl=o),0===(s=e.pendingLanes)&&(Vl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Wl,Wl=null,e;!!(1&Yl)&&0!==e.tag&&xc(),1&(s=e.pendingLanes)?e===Jl?Gl++:(Gl=0,Jl=e):Gl=0,Ho()}(e,t,n,r)}finally{Nl.transition=o,vt=r}return null}function xc(){if(null!==Kl){var e=wt(Yl),t=Nl.transition,n=vt;try{if(Nl.transition=null,vt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,6&Ml)throw Error(a(331));var o=Ml;for(Ml|=4,Qi=e.current;null!==Qi;){var s=Qi,i=s.child;if(16&Qi.flags){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qi=u;null!==Qi;){var d=Qi;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var f=d.child;if(null!==f)f.return=d,Qi=f;else for(;null!==Qi;){var h=(d=Qi).sibling,p=d.return;if(al(d),d===u){Qi=null;break}if(null!==h){h.return=p,Qi=h;break}Qi=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qi=s}}if(2064&s.subtreeFlags&&null!==i)i.return=s,Qi=i;else e:for(;null!==Qi;){if(2048&(s=Qi).flags)switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Qi=b;break e}Qi=s.return}}var v=e.current;for(Qi=v;null!==Qi;){var w=(i=Qi).child;if(2064&i.subtreeFlags&&null!==w)w.return=i,Qi=w;else e:for(i=v;null!==Qi;){if(2048&(l=Qi).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){kc(l,l.return,e)}if(l===i){Qi=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qi=_;break e}Qi=l.return}}if(Ml=o,Ho(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(e){}r=!0}return r}finally{vt=n,Nl.transition=t}}return!1}function Sc(e,t,n){e=ja(e,t=hi(0,t=ci(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=ja(t,e=pi(t,e=ci(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Al&n)===n&&(4===Tl||3===Tl&&(130023424&Al)===Al&&500>Je()-Fl?fc(e,0):zl|=n),rc(e,t)}function Cc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ec();null!==(e=$a(e,t))&&(yt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Oc(e,t){return Xe(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tc(e,t,n,r,o,s){var i=2;if(r=e,"function"==typeof e)Rc(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case S:return $c(n.children,o,s,t);case k:i=8,o|=8;break;case E:return(e=Ac(12,n,t,2|o)).elementType=E,e.lanes=s,e;case O:return(e=Ac(13,n,t,o)).elementType=O,e.lanes=s,e;case I:return(e=Ac(19,n,t,o)).elementType=I,e.lanes=s,e;case P:return Dc(n,o,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case N:i=9;break e;case M:i=11;break e;case A:i=14;break e;case R:i=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(i,n,t,o)).elementType=e,t.type=r,t.lanes=s,t}function $c(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,o,a,s,i,l){return e=new Bc(e,t,n,i,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Fc(e){if(!e)return Mo;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Po(n))return Do(e,n,t)}return t}function Uc(e,t,n,r,o,a,s,i,l){return(e=jc(n,r,!0,e,0,a,0,i,l)).context=Fc(null),n=e.current,(a=Ba(r=ec(),o=tc(n))).callback=null!=t?t:null,ja(n,a,o),e.current.lanes=o,yt(e,o,r),rc(e,r),e}function Hc(e,t,n,r){var o=t.current,a=ec(),s=tc(o);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ba(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(o,t,s))&&(nc(e,o,s,a),Fa(e,o,s)),s}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Io.current)vi=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return vi=!1,function(e,t,n){switch(t.tag){case 3:Oi(t),pa();break;case 5:Qa(t);break;case 1:Po(t.type)&&Lo(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;No(Sa,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(No(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Li(e,t,n):(No(es,1&es.current),null!==(e=qi(e,t,n))?e.sibling:null);No(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Ui(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),No(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,ki(e,t,n)}return qi(e,t,n)}(e,t,n);vi=!!(131072&e.flags)}else vi=!1,aa&&1048576&t.flags&&ea(t,Xo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hi(e,t),e=t.pendingProps;var o=Ro(t,Oo.current);Ia(t,n),o=gs(null,t,r,e,o,n);var s=ys();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(r)?(s=!0,Lo(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,La(t),o.updater=oi,t.stateNode=o,o._reactInternals=t,li(t,r,e,n),t=Mi(null,t,r,!0,s,n)):(t.tag=0,aa&&s&&ta(t),wi(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hi(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Rc(e)?1:0;if(null!=e){if((e=e.$$typeof)===M)return 11;if(e===A)return 14}return 2}(r),e=ni(r,e),o){case 0:t=Ci(null,t,r,e,n);break e;case 1:t=Ni(null,t,r,e,n);break e;case 11:t=_i(null,t,r,e,n);break e;case 14:t=xi(null,t,r,ni(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ci(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ni(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 3:e:{if(Oi(t),null===e)throw Error(a(387));r=t.pendingProps,o=(s=t.memoizedState).element,za(e,t),Ha(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ii(e,t,r,n,o=ci(Error(a(423)),t));break e}if(r!==o){t=Ii(e,t,r,n,o=ci(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,sa=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===o){t=qi(e,t,n);break e}wi(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ua(t),r=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,i=o.children,no(r,o)?i=null:null!==s&&no(r,s)&&(t.flags|=32),Ei(e,t),wi(e,t,i,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Li(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_a(t,null,r,n):wi(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,_i(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 7:return wi(e,t,t.pendingProps,n),t.child;case 8:case 12:return wi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,No(Sa,r._currentValue),r._currentValue=i,null!==s)if(ir(s.value,i)){if(s.children===o.children&&!Io.current){t=qi(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){i=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ba(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Oa(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(a(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Oa(i,n,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}wi(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ia(t,n),r=r(o=Aa(o)),t.flags|=1,wi(e,t,r,n),t.child;case 14:return o=ni(r=t.type,t.pendingProps),xi(e,t,r,o=ni(r.type,o),n);case 15:return Si(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ni(r,o),Hi(e,t),t.tag=1,Po(r)?(e=!0,Lo(t)):e=!1,Ia(t,n),si(t,r,o),li(t,r,o,n),Mi(null,t,r,!0,e,n);case 19:return Ui(e,t,n);case 22:return ki(e,t,n)}throw Error(a(156,t.tag))};var Xc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof o){var i=o;o=function(){var e=qc(s);i.call(e)}}Hc(t,s,e,o)}else s=function(e,t,n,r,o){if(o){if("function"==typeof r){var a=r;r=function(){var e=qc(s);a.call(e)}}var s=Uc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=s,e[mo]=s.current,Ur(8===e.nodeType?e.parentNode:e),uc(),s}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var i=r;r=function(){var e=qc(l);i.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mo]=l.current,Ur(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,o,r);return qc(s)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[mo]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Je()),!(6&Ml)&&(Ul=Je()+500,Ho()))}break;case 13:uc(function(){var t=$a(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Vc(e,1)}},xt=function(e){if(13===e.tag){var t=$a(e,134217728);null!==t&&nc(t,e,134217728,ec()),Vc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=$a(e,t);null!==n&&nc(n,e,t,ec()),Vc(e,t)}},kt=function(){return vt},Et=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=xo(r);if(!o)throw Error(a(90));X(r),Q(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cc,Oe=uc;var eu={usingClientEntryPoint:!1,Events:[wo,_o,xo,Ce,Ne,cc]},tu={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(a(299));var n=!1,r="",o=Xc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,s="",i=Xc;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,o,0,s,i),e[mo]=t.current,Ur(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},739:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),o=n.n(r),a=n(314),s=n.n(a)()(o());s.push([e.id,"/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__pane.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow .react-flow__edges {\n  pointer-events: none;\n  overflow: visible;\n}\n.react-flow__edge-path,\n.react-flow__connection-path {\n  stroke: #b1b1b7;\n  stroke-width: 1;\n  fill: none;\n}\n.react-flow__edge {\n  pointer-events: visibleStroke;\n  cursor: pointer;\n}\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    -webkit-animation: none;\n            animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge:focus .react-flow__edge-path,\n  .react-flow__edge:focus-visible .react-flow__edge-path {\n    stroke: #555;\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge-textbg {\n    fill: white;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__connectionline {\n  z-index: 1001;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__node.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: -webkit-grab;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background: #1a192b;\n  border: 1px solid white;\n  border-radius: 100%;\n}\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-top {\n    left: 50%;\n    top: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: -4px;\n    transform: translate(0, -50%);\n  }\n.react-flow__handle-right {\n    right: -4px;\n    top: 50%;\n    transform: translate(0, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.center {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n.react-flow__attribution {\n  font-size: 10px;\n  background: rgba(255, 255, 255, 0.5);\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@-webkit-keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-default,\n.react-flow__node-input,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: 3px;\n  width: 150px;\n  font-size: 12px;\n  color: #222;\n  text-align: center;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #1a192b;\n  background-color: white;\n}\n.react-flow__node-default.selectable:hover, .react-flow__node-input.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n    }\n.react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: 0 0 0 0.5px #1a192b;\n    }\n.react-flow__node-group {\n  background-color: rgba(240, 240, 240, 0.25);\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: rgba(0, 89, 220, 0.08);\n  border: 1px dotted rgba(0, 89, 220, 0.8);\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls {\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n}\n.react-flow__controls-button {\n    border: none;\n    background: #fefefe;\n    border-bottom: 1px solid #eee;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    padding: 5px;\n  }\n.react-flow__controls-button:hover {\n      background: #f4f4f4;\n    }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__minimap {\n  background-color: #fff;\n}\n.react-flow__minimap svg {\n  display: block;\n}\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 4px;\n  height: 4px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: #3367d9;\n  transform: translate(-50%, -50%);\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: #3367d9;\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n",""]);const i=s},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},888:(e,t,n)=>{e.exports=n(493)},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(551)},982:(e,t,n)=>{e.exports=n(463)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r=n(540),o=n(338);function a(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=a(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var s=n(242);const i=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,o,a);return a},{useDebugValue:l}=r,{useSyncExternalStoreWithSelector:c}=s,u=e=>e;function d(e,t=u,n){const r=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(r),r}const f=(e,t)=>{const n=(e=>e?i(e):i)(e),r=(e,r=t)=>d(n,e,r);return Object.assign(r,n),r};function h(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var p={value:()=>{}};function m(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new g(r)}function g(e){this._=e}function y(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function b(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=p,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}g.prototype=m.prototype={constructor:g,on:function(e,t){var n,r,o=this._,a=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),s=-1,i=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<i;)if(n=(e=a[s]).type)o[n]=b(o[n],e.name,t);else if(null==t)for(n in o)o[n]=b(o[n],e.name,null);return this}for(;++s<i;)if((n=(e=a[s]).type)&&(n=y(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new g(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};const v=m;function w(){}function _(e){return null==e?w:function(){return this.querySelector(e)}}function x(){return[]}function S(e){return null==e?x:function(){return this.querySelectorAll(e)}}function k(e){return function(){return this.matches(e)}}function E(e){return function(t){return t.matches(e)}}var C=Array.prototype.find;function N(){return this.firstElementChild}var M=Array.prototype.filter;function O(){return Array.from(this.children)}function I(e){return new Array(e.length)}function A(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function R(e,t,n,r,o,a){for(var s,i=0,l=t.length,c=a.length;i<c;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new A(e,a[i]);for(;i<l;++i)(s=t[i])&&(o[i]=s)}function P(e,t,n,r,o,a,s){var i,l,c,u=new Map,d=t.length,f=a.length,h=new Array(d);for(i=0;i<d;++i)(l=t[i])&&(h[i]=c=s.call(l,l.__data__,i,t)+"",u.has(c)?o[i]=l:u.set(c,l));for(i=0;i<f;++i)c=s.call(e,a[i],i,a)+"",(l=u.get(c))?(r[i]=l,l.__data__=a[i],u.delete(c)):n[i]=new A(e,a[i]);for(i=0;i<d;++i)(l=t[i])&&u.get(h[i])===l&&(o[i]=l)}function T(e){return e.__data__}function $(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function D(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}A.prototype={constructor:A,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var L="http://www.w3.org/1999/xhtml";const z={svg:"http://www.w3.org/2000/svg",xhtml:L,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function B(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),z.hasOwnProperty(t)?{space:z[t],local:e}:e}function j(e){return function(){this.removeAttribute(e)}}function F(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U(e,t){return function(){this.setAttribute(e,t)}}function H(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function W(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function V(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X(e){return function(){this.style.removeProperty(e)}}function K(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Y(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function G(e,t){return e.style.getPropertyValue(t)||V(e).getComputedStyle(e,null).getPropertyValue(t)}function J(e){return function(){delete this[e]}}function Q(e,t){return function(){this[e]=t}}function Z(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ee(e){return e.trim().split(/^|\s+/)}function te(e){return e.classList||new ne(e)}function ne(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function re(e,t){for(var n=te(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function oe(e,t){for(var n=te(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function ae(e){return function(){re(this,e)}}function se(e){return function(){oe(this,e)}}function ie(e,t){return function(){(t.apply(this,arguments)?re:oe)(this,e)}}function le(){this.textContent=""}function ce(e){return function(){this.textContent=e}}function ue(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function de(){this.innerHTML=""}function fe(e){return function(){this.innerHTML=e}}function he(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function me(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ge(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===L&&t.documentElement.namespaceURI===L?t.createElement(e):t.createElementNS(n,e)}}function ye(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function be(e){var t=B(e);return(t.local?ye:ge)(t)}function ve(){return null}function we(){var e=this.parentNode;e&&e.removeChild(this)}function _e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Se(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ke(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var s=0,i=o.length;s<i;++s)if((r=o[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Ee(e,t,n){var r=V(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Ce(e,t){return function(){return Ee(this,e,t)}}function Ne(e,t){return function(){return Ee(this,e,t.apply(this,arguments))}}ne.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Me=[null];function Oe(e,t){this._groups=e,this._parents=t}function Ie(){return new Oe([[document.documentElement]],Me)}Oe.prototype=Ie.prototype={constructor:Oe,select:function(e){"function"!=typeof e&&(e=_(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,s,i=t[o],l=i.length,c=r[o]=new Array(l),u=0;u<l;++u)(a=i[u])&&(s=e.call(a,a.__data__,u,i))&&("__data__"in a&&(s.__data__=a.__data__),c[u]=s);return new Oe(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):S(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var s,i=t[a],l=i.length,c=0;c<l;++c)(s=i[c])&&(r.push(e.call(s,s.__data__,c,i)),o.push(s));return new Oe(r,o)},selectChild:function(e){return this.select(null==e?N:function(e){return function(){return C.call(this.children,e)}}("function"==typeof e?e:E(e)))},selectChildren:function(e){return this.selectAll(null==e?O:function(e){return function(){return M.call(this.children,e)}}("function"==typeof e?e:E(e)))},filter:function(e){"function"!=typeof e&&(e=k(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,s=t[o],i=s.length,l=r[o]=[],c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new Oe(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,T);var n,r=t?P:R,o=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=a.length,i=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],f=a[u],h=f.length,p=$(e.call(d,d&&d.__data__,u,o)),m=p.length,g=l[u]=new Array(m),y=i[u]=new Array(m);r(d,f,g,y,c[u]=new Array(h),p,t);for(var b,v,w=0,_=0;w<m;++w)if(b=g[w]){for(w>=_&&(_=w+1);!(v=y[_])&&++_<m;);b._next=v||null}}return(i=new Oe(i,o))._enter=l,i._exit=c,i},enter:function(){return new Oe(this._enter||this._groups.map(I),this._parents)},exit:function(){return new Oe(this._exit||this._groups.map(I),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,s=Math.min(o,a),i=new Array(o),l=0;l<s;++l)for(var c,u=n[l],d=r[l],f=u.length,h=i[l]=new Array(f),p=0;p<f;++p)(c=u[p]||d[p])&&(h[p]=c);for(;l<o;++l)i[l]=n[l];return new Oe(i,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,s=o[a];--a>=0;)(r=o[a])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=D);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var s,i=n[a],l=i.length,c=o[a]=new Array(l),u=0;u<l;++u)(s=i[u])&&(c[u]=s);c.sort(t)}return new Oe(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var s=r[o];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],s=0,i=a.length;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this},attr:function(e,t){var n=B(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?F:j:"function"==typeof t?n.local?W:q:n.local?H:U)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?X:"function"==typeof t?Y:K)(e,t,null==n?"":n)):G(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?J:"function"==typeof t?Z:Q)(e,t)):this.node()[e]},classed:function(e,t){var n=ee(e+"");if(arguments.length<2){for(var r=te(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?ie:t?ae:se)(n,t))},text:function(e){return arguments.length?this.each(null==e?le:("function"==typeof e?ue:ce)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?de:("function"==typeof e?he:fe)(e)):this.node().innerHTML},raise:function(){return this.each(pe)},lower:function(){return this.each(me)},append:function(e){var t="function"==typeof e?e:be(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:be(e),r=null==t?ve:"function"==typeof t?t:_(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(we)},clone:function(e){return this.select(e?xe:_e)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=a.length;if(!(arguments.length<2)){for(i=t?ke:Se,r=0;r<s;++r)this.each(i(a[r],t,n));return this}var i=this.node().__on;if(i)for(var l,c=0,u=i.length;c<u;++c)for(r=0,l=i[c];r<s;++r)if((o=a[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ne:Ce)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,s=o.length;a<s;++a)(r=o[a])&&(yield r)}};const Ae=Ie;function Re(e){return"string"==typeof e?new Oe([[document.querySelector(e)]],[document.documentElement]):new Oe([[e]],Me)}const Pe={passive:!1},Te={capture:!0,passive:!1};function $e(e){e.stopImmediatePropagation()}function De(e){e.preventDefault(),e.stopImmediatePropagation()}function Le(e){var t=e.document.documentElement,n=Re(e).on("dragstart.drag",De,Te);"onselectstart"in t?n.on("selectstart.drag",De,Te):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ze(e,t){var n=e.document.documentElement,r=Re(e).on("dragstart.drag",null);t&&(r.on("click.drag",De,Te),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Be(e){return((e=Math.exp(e))+1/e)/2}const je=function e(t,n,r){function o(e,o){var a,s,i=e[0],l=e[1],c=e[2],u=o[0],d=o[1],f=o[2],h=u-i,p=d-l,m=h*h+p*p;if(m<1e-12)s=Math.log(f/c)/t,a=function(e){return[i+e*h,l+e*p,c*Math.exp(t*e*s)]};else{var g=Math.sqrt(m),y=(f*f-c*c+r*m)/(2*c*n*g),b=(f*f-c*c-r*m)/(2*f*n*g),v=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(b*b+1)-b);s=(w-v)/t,a=function(e){var r,o=e*s,a=Be(v),u=c/(n*g)*(a*(r=t*o+v,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+u*h,l+u*p,c*a/Be(t*o+v)]}}return a.duration=1e3*s*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);function Fe(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var Ue,He,qe=0,We=0,Ve=0,Xe=0,Ke=0,Ye=0,Ge="object"==typeof performance&&performance.now?performance:Date,Je="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qe(){return Ke||(Je(Ze),Ke=Ge.now()+Ye)}function Ze(){Ke=0}function et(){this._call=this._time=this._next=null}function tt(e,t,n){var r=new et;return r.restart(e,t,n),r}function nt(){Ke=(Xe=Ge.now())+Ye,qe=We=0;try{!function(){Qe(),++qe;for(var e,t=Ue;t;)(e=Ke-t._time)>=0&&t._call.call(void 0,e),t=t._next;--qe}()}finally{qe=0,function(){for(var e,t,n=Ue,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ue=t);He=e,ot(r)}(),Ke=0}}function rt(){var e=Ge.now(),t=e-Xe;t>1e3&&(Ye-=t,Xe=e)}function ot(e){qe||(We&&(We=clearTimeout(We)),e-Ke>24?(e<1/0&&(We=setTimeout(nt,e-Ge.now()-Ye)),Ve&&(Ve=clearInterval(Ve))):(Ve||(Xe=Ge.now(),Ve=setInterval(rt,1e3)),qe=1,Je(nt)))}function at(e,t,n){var r=new et;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}et.prototype=tt.prototype={constructor:et,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Qe():+n)+(null==t?0:+t),this._next||He===this||(He?He._next=this:Ue=this,He=this),this._call=e,this._time=n,ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,ot())}};var st=v("start","end","cancel","interrupt"),it=[];function lt(e,t,n,r,o,a){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(l){var c,u,d,f;if(1!==n.state)return i();for(c in o)if((f=o[c]).name===n.name){if(3===f.state)return at(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(at(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(i),n.state=5,1),a=-1,s=r.length;++a<s;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),i())}function i(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=tt(function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:st,tween:it,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function ct(e,t){var n=dt(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function ut(e,t){var n=dt(e,t);if(n.state>3)throw new Error("too late; already running");return n}function dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ft(e,t){var n,r,o,a=e.__transition,s=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):s=!1;s&&delete e.__transition}}function ht(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var pt,mt=180/Math.PI,gt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yt(e,t,n,r,o,a){var s,i,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(i=Math.sqrt(n*n+r*r))&&(n/=i,r/=i,l/=i),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*mt,skewX:Math.atan(l)*mt,scaleX:s,scaleY:i}}function bt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,s){var i=[],l=[];return a=e(a),s=e(s),function(e,r,o,a,s,i){if(e!==o||r!==a){var l=s.push("translate(",null,t,null,n);i.push({i:l-4,x:ht(e,o)},{i:l-2,x:ht(r,a)})}else(o||a)&&s.push("translate("+o+t+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,i,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:ht(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,s.rotate,i,l),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:ht(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,s.skewX,i,l),function(e,t,n,r,a,s){if(e!==n||t!==r){var i=a.push(o(a)+"scale(",null,",",null,")");s.push({i:i-4,x:ht(e,n)},{i:i-2,x:ht(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,i,l),a=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)i[(t=l[n]).i]=t.x(e);return i.join("")}}}var vt=bt(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gt:yt(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),wt=bt(function(e){return null==e?gt:(pt||(pt=document.createElementNS("http://www.w3.org/2000/svg","g")),pt.setAttribute("transform",e),(e=pt.transform.baseVal.consolidate())?yt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):gt)},", ",")",")");function _t(e,t){var n,r;return function(){var o=ut(this,e),a=o.tween;if(a!==n)for(var s=0,i=(r=n=a).length;s<i;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}o.tween=r}}function xt(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=ut(this,e),s=a.tween;if(s!==r){o=(r=s).slice();for(var i={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=i;break}l===c&&o.push(i)}a.tween=o}}function St(e,t,n){var r=e._id;return e.each(function(){var e=ut(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return dt(e,r).value[t]}}function kt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Et(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ct(){}var Nt=.7,Mt=1/Nt,Ot="\\s*([+-]?\\d+)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rt=/^#([0-9a-f]{3,8})$/,Pt=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),Tt=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),$t=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${It}\\)$`),Dt=new RegExp(`^rgba\\(${At},${At},${At},${It}\\)$`),Lt=new RegExp(`^hsl\\(${It},${At},${At}\\)$`),zt=new RegExp(`^hsla\\(${It},${At},${At},${It}\\)$`),Bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jt(){return this.rgb().formatHex()}function Ft(){return this.rgb().formatRgb()}function Ut(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Rt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ht(t):3===n?new Vt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?qt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?qt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Pt.exec(e))?new Vt(t[1],t[2],t[3],1):(t=Tt.exec(e))?new Vt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=$t.exec(e))?qt(t[1],t[2],t[3],t[4]):(t=Dt.exec(e))?qt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Lt.exec(e))?Qt(t[1],t[2]/100,t[3]/100,1):(t=zt.exec(e))?Qt(t[1],t[2]/100,t[3]/100,t[4]):Bt.hasOwnProperty(e)?Ht(Bt[e]):"transparent"===e?new Vt(NaN,NaN,NaN,0):null}function Ht(e){return new Vt(e>>16&255,e>>8&255,255&e,1)}function qt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Vt(e,t,n,r)}function Wt(e,t,n,r){return 1===arguments.length?((o=e)instanceof Ct||(o=Ut(o)),o?new Vt((o=o.rgb()).r,o.g,o.b,o.opacity):new Vt):new Vt(e,t,n,null==r?1:r);var o}function Vt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Xt(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Kt(){const e=Yt(this.opacity);return`${1===e?"rgb(":"rgba("}${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}${1===e?")":`, ${e})`}`}function Yt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jt(e){return((e=Gt(e))<16?"0":"")+e.toString(16)}function Qt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new en(e,t,n,r)}function Zt(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof Ct||(e=Ut(e)),!e)return new en;if(e instanceof en)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,i=a-o,l=(a+o)/2;return i?(s=t===a?(n-r)/i+6*(n<r):n===a?(r-t)/i+2:(t-n)/i+4,i/=l<.5?a+o:2-a-o,s*=60):i=l>0&&l<1?0:s,new en(s,i,l,e.opacity)}function en(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function tn(e){return(e=(e||0)%360)<0?e+360:e}function nn(e){return Math.max(0,Math.min(1,e||0))}function rn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function on(e,t,n,r,o){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*r+s*o)/6}kt(Ct,Ut,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jt,formatHex:jt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Zt(this).formatHsl()},formatRgb:Ft,toString:Ft}),kt(Vt,Wt,Et(Ct,{brighter(e){return e=null==e?Mt:Math.pow(Mt,e),new Vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Nt:Math.pow(Nt,e),new Vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vt(Gt(this.r),Gt(this.g),Gt(this.b),Yt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatHex8:function(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Kt,toString:Kt})),kt(en,function(e,t,n,r){return 1===arguments.length?Zt(e):new en(e,t,n,null==r?1:r)},Et(Ct,{brighter(e){return e=null==e?Mt:Math.pow(Mt,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Nt:Math.pow(Nt,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Vt(rn(e>=240?e-240:e+120,o,r),rn(e,o,r),rn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new en(tn(this.h),nn(this.s),nn(this.l),Yt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yt(this.opacity);return`${1===e?"hsl(":"hsla("}${tn(this.h)}, ${100*nn(this.s)}%, ${100*nn(this.l)}%${1===e?")":`, ${e})`}`}}));const an=e=>()=>e;function sn(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):an(isNaN(e)?t:e)}const ln=function e(t){var n=function(e){return 1===(e=+e)?sn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):an(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Wt(e)).r,(t=Wt(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),s=sn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function cn(e){return function(t){var n,r,o=t.length,a=new Array(o),s=new Array(o),i=new Array(o);for(n=0;n<o;++n)r=Wt(t[n]),a[n]=r.r||0,s[n]=r.g||0,i[n]=r.b||0;return a=e(a),s=e(s),i=e(i),r.opacity=1,function(e){return r.r=a(e),r.g=s(e),r.b=i(e),r+""}}}cn(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],s=r>0?e[r-1]:2*o-a,i=r<t-1?e[r+2]:2*a-o;return on((n-r/t)*t,s,o,a,i)}}),cn(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],s=e[(r+1)%t],i=e[(r+2)%t];return on((n-r/t)*t,o,a,s,i)}});var un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(un.source,"g");function fn(e,t){var n,r,o,a=un.lastIndex=dn.lastIndex=0,s=-1,i=[],l=[];for(e+="",t+="";(n=un.exec(e))&&(r=dn.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),i[s]?i[s]+=o:i[++s]=o),(n=n[0])===(r=r[0])?i[s]?i[s]+=r:i[++s]=r:(i[++s]=null,l.push({i:s,x:ht(n,r)})),a=dn.lastIndex;return a<t.length&&(o=t.slice(a),i[s]?i[s]+=o:i[++s]=o),i.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)i[(n=l[r]).i]=n.x(e);return i.join("")})}function hn(e,t){var n;return("number"==typeof t?ht:t instanceof Ut?ln:(n=Ut(t))?(t=n,ln):fn)(e,t)}function pn(e){return function(){this.removeAttribute(e)}}function mn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gn(e,t,n){var r,o,a=n+"";return function(){var s=this.getAttribute(e);return s===a?null:s===r?o:o=t(r=s,n)}}function yn(e,t,n){var r,o,a=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===r?o:o=t(r=s,n)}}function bn(e,t,n){var r,o,a;return function(){var s,i,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(i=l+"")?null:s===r&&i===o?a:(o=i,a=t(r=s,l));this.removeAttribute(e)}}function vn(e,t,n){var r,o,a;return function(){var s,i,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(i=l+"")?null:s===r&&i===o?a:(o=i,a=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function wn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function _n(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function xn(e,t){return function(){ct(this,e).delay=+t.apply(this,arguments)}}function Sn(e,t){return t=+t,function(){ct(this,e).delay=t}}function kn(e,t){return function(){ut(this,e).duration=+t.apply(this,arguments)}}function En(e,t){return t=+t,function(){ut(this,e).duration=t}}var Cn=Ae.prototype.constructor;function Nn(e){return function(){this.style.removeProperty(e)}}var Mn=0;function On(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function In(){return++Mn}var An=Ae.prototype;On.prototype=function(e){return Ae().transition(e)}.prototype={constructor:On,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=_(e));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var i,l,c=r[s],u=c.length,d=a[s]=new Array(u),f=0;f<u;++f)(i=c[f])&&(l=e.call(i,i.__data__,f,c))&&("__data__"in i&&(l.__data__=i.__data__),d[f]=l,lt(d[f],t,n,f,d,dt(i,n)));return new On(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=S(e));for(var r=this._groups,o=r.length,a=[],s=[],i=0;i<o;++i)for(var l,c=r[i],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var f,h=e.call(l,l.__data__,d,c),p=dt(l,n),m=0,g=h.length;m<g;++m)(f=h[m])&&lt(f,t,n,m,h,p);a.push(h),s.push(l)}return new On(a,s,t,n)},selectChild:An.selectChild,selectChildren:An.selectChildren,filter:function(e){"function"!=typeof e&&(e=k(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,s=t[o],i=s.length,l=r[o]=[],c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new On(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),s=new Array(r),i=0;i<a;++i)for(var l,c=t[i],u=n[i],d=c.length,f=s[i]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(f[h]=l);for(;i<r;++i)s[i]=t[i];return new On(s,this._parents,this._name,this._id)},selection:function(){return new Cn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=In(),r=this._groups,o=r.length,a=0;a<o;++a)for(var s,i=r[a],l=i.length,c=0;c<l;++c)if(s=i[c]){var u=dt(s,t);lt(s,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new On(r,this._parents,e,n)},call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:function(e,t){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?ct:ut;return function(){var s=a(this,e),i=s.on;i!==r&&(o=(r=i).copy()).on(t,n),s.on=o}}(n,e,t))},attr:function(e,t){var n=B(e),r="transform"===n?wt:hn;return this.attrTween(e,"function"==typeof t?(n.local?vn:bn)(n,r,St(this,"attr."+e,t)):null==t?(n.local?mn:pn)(n):(n.local?yn:gn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=B(e);return this.tween(n,(r.local?wn:_n)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?vt:hn;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=G(this,e),s=(this.style.removeProperty(e),G(this,e));return a===s?null:a===n&&s===r?o:o=t(n=a,r=s)}}(e,r)).on("end.style."+e,Nn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var s=G(this,e),i=n(this),l=i+"";return null==i&&(this.style.removeProperty(e),l=i=G(this,e)),s===l?null:s===r&&l===o?a:(o=l,a=t(r=s,i))}}(e,r,St(this,"style."+e,t))).each(function(e,t){var n,r,o,a,s="style."+t,i="end."+s;return function(){var l=ut(this,e),c=l.on,u=null==l.value[s]?a||(a=Nn(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(i,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var s=G(this,e);return s===a?null:s===r?o:o=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(St(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=dt(this.node(),n).tween,a=0,s=o.length;a<s;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?_t:xt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?xn:Sn)(t,e)):dt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?kn:En)(t,e)):dt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ut(this,e).ease=t}}(t,e)):dt(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;ut(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,s){var i={value:s},l={value:function(){0===--o&&a()}};n.each(function(){var n=ut(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(i),t._.interrupt.push(i),t._.end.push(l)),n.on=t}),0===o&&a()})},[Symbol.iterator]:An[Symbol.iterator]};var Rn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Pn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ae.prototype.interrupt=function(e){return this.each(function(){ft(this,e)})},Ae.prototype.transition=function(e){var t,n;e instanceof On?(t=e._id,e=e._name):(t=In(),(n=Rn).time=Qe(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var s,i=r[a],l=i.length,c=0;c<l;++c)(s=i[c])&&lt(s,e,t,c,i,n||Pn(s,t));return new On(r,this._parents,e,t)};const Tn=e=>()=>e;function $n(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Dn(e,t,n){this.k=e,this.x=t,this.y=n}Dn.prototype={constructor:Dn,scale:function(e){return 1===e?this:new Dn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Dn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ln=new Dn(1,0,0);function zn(e){e.stopImmediatePropagation()}function Bn(e){e.preventDefault(),e.stopImmediatePropagation()}function jn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Fn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Un(){return this.__zoom||Ln}function Hn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wn(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}Dn.prototype;const Vn=e=>()=>e;function Xn(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:s,y:i,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function Kn(e){return!e.ctrlKey&&!e.button}function Yn(){return this.parentNode}function Gn(e,t){return null==t?{x:e.x,y:e.y}:t}function Jn(){return navigator.maxTouchPoints||"ontouchstart"in this}Xn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},n(961);const Qn=(0,r.createContext)(null),Zn=Qn.Provider,er="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function tr(e,t){const n=(0,r.useContext)(Qn);if(null===n)throw new Error(er);return d(n,e,t)}const nr=()=>{const e=(0,r.useContext)(Qn);if(null===e)throw new Error(er);return(0,r.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},rr=e=>e.userSelectionActive?"none":"all";function or({position:e,children:t,className:n,style:o,...s}){const i=tr(rr),l=`${e}`.split("-");return r.createElement("div",{className:a(["react-flow__panel",n,...l]),style:{...o,pointerEvents:i},...s},t)}function ar({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:r.createElement(or,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},r.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var sr=(0,r.memo)(({x:e,y:t,label:n,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:u,className:d,...f})=>{const h=(0,r.useRef)(null),[p,m]=(0,r.useState)({x:0,y:0,width:0,height:0}),g=a(["react-flow__edge-textwrapper",d]);return(0,r.useEffect)(()=>{if(h.current){const e=h.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),void 0!==n&&n?r.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:g,visibility:p.width?"visible":"hidden",...f},s&&r.createElement("rect",{width:p.width+2*l[0],x:-l[0],y:-l[1],height:p.height+2*l[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),r.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:h,style:o},n),u):null});const ir=e=>({width:e.offsetWidth,height:e.offsetHeight}),lr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),cr=(e={x:0,y:0},t)=>({x:lr(e.x,t[0][0],t[1][0]),y:lr(e.y,t[0][1],t[1][1])}),ur=(e,t,n)=>e<t?lr(Math.abs(e-t),1,50)/50:e>n?-lr(Math.abs(e-n),1,50)/50:0,dr=(e,t)=>[20*ur(e.x,35,t.width-35),20*ur(e.y,35,t.height-35)],fr=e=>e.getRootNode?.()||window?.document,hr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),pr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),mr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},gr=e=>!isNaN(e)&&isFinite(e),yr=Symbol.for("internals"),br=["Enter"," ","Escape"],vr=(e,t)=>{};function wr(e){const t=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,n=t.composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const _r=e=>"clientX"in e,xr=(e,t)=>{const n=_r(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},Sr=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,kr=({id:e,path:t,labelX:n,labelY:o,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>r.createElement(r.Fragment,null,r.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&r.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&gr(n)&&gr(o)?r.createElement(sr,{x:n,y:o,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);function Er(e,t,n){return void 0===n?n:r=>{const o=t().edges.find(t=>t.id===e);o&&n(r,{...o})}}function Cr({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,s=Math.abs(r-t)/2;return[a,r<t?r+s:r-s,o,s]}function Nr({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:i}){const l=.125*e+.375*o+.375*s+.125*n,c=.125*t+.375*a+.375*i+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}var Mr,Or,Ir,Ar,Rr,Pr;function Tr({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Pr.Left||e===Pr.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function $r({sourceX:e,sourceY:t,sourcePosition:n=Pr.Bottom,targetX:r,targetY:o,targetPosition:a=Pr.Top}){const[s,i]=Tr({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=Tr({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,d,f,h]=Nr({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:i,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${i} ${l},${c} ${r},${o}`,u,d,f,h]}kr.displayName="BaseEdge",function(e){e.Strict="strict",e.Loose="loose"}(Mr||(Mr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Or||(Or={})),function(e){e.Partial="partial",e.Full="full"}(Ir||(Ir={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Ar||(Ar={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Rr||(Rr={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Pr||(Pr={}));const Dr=(0,r.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:a=Pr.Bottom,targetPosition:s=Pr.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:g})=>{const[y,b,v]=$r({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:o,targetPosition:s});return r.createElement(kr,{path:y,labelX:b,labelY:v,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:g})});Dr.displayName="SimpleBezierEdge";const Lr={[Pr.Left]:{x:-1,y:0},[Pr.Right]:{x:1,y:0},[Pr.Top]:{x:0,y:-1},[Pr.Bottom]:{x:0,y:1}},zr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Br({sourceX:e,sourceY:t,sourcePosition:n=Pr.Bottom,targetX:r,targetY:o,targetPosition:a=Pr.Top,borderRadius:s=5,centerX:i,centerY:l,offset:c=20}){const[u,d,f,h,p]=function({source:e,sourcePosition:t=Pr.Bottom,target:n,targetPosition:r=Pr.Top,center:o,offset:a}){const s=Lr[t],i=Lr[r],l={x:e.x+s.x*a,y:e.y+s.y*a},c={x:n.x+i.x*a,y:n.y+i.y*a},u=(({source:e,sourcePosition:t=Pr.Bottom,target:n})=>t===Pr.Left||t===Pr.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),d=0!==u.x?"x":"y",f=u[d];let h,p,m=[];const g={x:0,y:0},y={x:0,y:0},[b,v,w,_]=Cr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*i[d]===-1){h=o.x??b,p=o.y??v;const e=[{x:h,y:l.y},{x:h,y:c.y}],t=[{x:l.x,y:p},{x:c.x,y:p}];m=s[d]===f?"x"===d?e:t:"x"===d?t:e}else{const o=[{x:l.x,y:c.y}],u=[{x:c.x,y:l.y}];if(m="x"===d?s.x===f?u:o:s.y===f?o:u,t===r){const t=Math.abs(e[d]-n[d]);if(t<=a){const r=Math.min(a-1,a-t);s[d]===f?g[d]=(l[d]>e[d]?-1:1)*r:y[d]=(c[d]>n[d]?-1:1)*r}}if(t!==r){const e="x"===d?"y":"x",t=s[d]===i[e],n=l[e]>c[e],r=l[e]<c[e];(1===s[d]&&(!t&&n||t&&r)||1!==s[d]&&(!t&&r||t&&n))&&(m="x"===d?o:u)}const b={x:l.x+g.x,y:l.y+g.y},v={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(b.x-m[0].x),Math.abs(v.x-m[0].x))>=Math.max(Math.abs(b.y-m[0].y),Math.abs(v.y-m[0].y))?(h=(b.x+v.x)/2,p=m[0].y):(h=m[0].x,p=(b.y+v.y)/2)}return[[e,{x:l.x+g.x,y:l.y+g.y},...m,{x:c.x+y.x,y:c.y+y.y},n],h,p,w,_]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:i,y:l},offset:c});return[u.reduce((e,t,n)=>{let r="";return r=n>0&&n<u.length-1?function(e,t,n,r){const o=Math.min(zr(e,t)/2,zr(t,n)/2,r),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s)return`L ${a+o*(e.x<n.x?-1:1)},${s}Q ${a},${s} ${a},${s+o*(e.y<n.y?1:-1)}`;const i=e.x<n.x?1:-1;return`L ${a},${s+o*(e.y<n.y?-1:1)}Q ${a},${s} ${a+o*i},${s}`}(u[n-1],t,u[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+r},""),d,f,h,p]}const jr=(0,r.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Pr.Bottom,targetPosition:h=Pr.Top,markerEnd:p,markerStart:m,pathOptions:g,interactionWidth:y})=>{const[b,v,w]=Br({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:o,targetPosition:h,borderRadius:g?.borderRadius,offset:g?.offset});return r.createElement(kr,{path:b,labelX:v,labelY:w,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:m,interactionWidth:y})});jr.displayName="SmoothStepEdge";const Fr=(0,r.memo)(e=>r.createElement(jr,{...e,pathOptions:(0,r.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Fr.displayName="StepEdge";const Ur=(0,r.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[m,g,y]=function({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,s,i]=Cr({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,s,i]}({sourceX:e,sourceY:t,targetX:n,targetY:o});return r.createElement(kr,{path:m,labelX:g,labelY:y,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});function Hr(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function qr({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case Pr.Left:return[t-Hr(t-r,a),n];case Pr.Right:return[t+Hr(r-t,a),n];case Pr.Top:return[t,n-Hr(n-o,a)];case Pr.Bottom:return[t,n+Hr(o-n,a)]}}function Wr({sourceX:e,sourceY:t,sourcePosition:n=Pr.Bottom,targetX:r,targetY:o,targetPosition:a=Pr.Top,curvature:s=.25}){const[i,l]=qr({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[c,u]=qr({pos:a,x1:r,y1:o,x2:e,y2:t,c:s}),[d,f,h,p]=Nr({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${r},${o}`,d,f,h,p]}Ur.displayName="StraightEdge";const Vr=(0,r.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:a=Pr.Bottom,targetPosition:s=Pr.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,pathOptions:g,interactionWidth:y})=>{const[b,v,w]=Wr({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:o,targetPosition:s,curvature:g?.curvature});return r.createElement(kr,{path:b,labelX:v,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:y})});Vr.displayName="BezierEdge";const Xr=(0,r.createContext)(null),Kr=Xr.Provider;Xr.Consumer;const Yr=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Gr=(e,t)=>void 0===e?"":"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`,Jr=(e,t)=>{if(!e.source||!e.target)return t;let n;var r;return n="id"in(r=e)&&"source"in r&&"target"in r?{...e}:{...e,id:Yr(e)},((e,t)=>t.some(t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle))))(n,t)?t:t.concat(n)},Qr=({x:e,y:t},[n,r,o],a,[s,i])=>{const l={x:(e-n)/o,y:(t-r)/o};return a?{x:s*Math.round(l.x/s),y:i*Math.round(l.y/i)}:l},Zr=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),eo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},to=(e,t=[0,0])=>{if(0===e.length)return{x:0,y:0,width:0,height:0};return(({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}))(e.reduce((e,n)=>{const{x:r,y:o}=eo(n,t).positionAbsolute;return a=e,s=hr({x:r,y:o,width:n.width||0,height:n.height||0}),{x:Math.min(a.x,s.x),y:Math.min(a.y,s.y),x2:Math.max(a.x2,s.x2),y2:Math.max(a.y2,s.y2)};var a,s},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},no=(e,t,[n,r,o]=[0,0,1],a=!1,s=!1,i=[0,0])=>{const l={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(e=>{const{width:t,height:n,selectable:r=!0,hidden:o=!1}=e;if(s&&!r||o)return!1;const{positionAbsolute:u}=eo(e,i),d={x:u.x,y:u.y,width:t||0,height:n||0},f=mr(l,d);(void 0===t||void 0===n||null===t||null===n||a&&f>0||f>=(t||0)*(n||0)||e.dragging)&&c.push(e)}),c},ro=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},oo=(e,t,n,r,o,a=.1)=>{const s=t/(e.width*(1+a)),i=n/(e.height*(1+a)),l=Math.min(s,i),c=lr(l,r,o);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},ao=(e,t=0)=>e.transition().duration(t);function so(e,t,n,r){return(t[n]||[]).reduce((t,o)=>(`${e.id}-${o.id}-${n}`!==r&&t.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),t),[])}const io={source:null,target:null,sourceHandle:null,targetHandle:null},lo=()=>({handleDomNode:null,isValid:!1,connection:io,endHandle:null});function co(e,t,n,r,o,a,s){const i="target"===o,l=s.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),c={...lo(),handleDomNode:l};if(l){const e=uo(void 0,l),o=l.getAttribute("data-nodeid"),s=l.getAttribute("data-handleid"),u=l.classList.contains("connectable"),d=l.classList.contains("connectableend"),f={source:i?o:n,sourceHandle:i?s:r,target:i?n:o,targetHandle:i?r:s};c.connection=f,u&&d&&(t===Mr.Strict?i&&"source"===e||!i&&"target"===e:o!==n||s!==r)&&(c.endHandle={nodeId:o,handleId:s,type:e},c.isValid=a(f))}return c}function uo(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function fo(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ho(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function po({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:a,setState:s,isValidConnection:i,edgeUpdaterType:l,onReconnectEnd:c}){const u=fr(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:p,onConnectStart:m,panBy:g,getNodes:y,cancelConnection:b}=a();let v,w=0;const{x:_,y:x}=xr(e),S=u?.elementFromPoint(_,x),k=uo(l,S),E=f?.getBoundingClientRect();if(!E||!k)return;let C,N=xr(e,E),M=!1,O=null,I=!1,A=null;const R=function({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,o)=>{if(o[yr]){const{handleBounds:a}=o[yr];let s=[],i=[];a&&(s=so(o,a,"source",`${t}-${n}-${r}`),i=so(o,a,"target",`${t}-${n}-${r}`)),e.push(...s,...i)}return e},[])}({nodes:y(),nodeId:n,handleId:t,handleType:k}),P=()=>{if(!h)return;const[e,t]=dr(N,E);g({x:e,y:t}),w=requestAnimationFrame(P)};function T(e){const{transform:r}=a();N=xr(e,E);const{handle:l,validHandleResult:c}=function(e,t,n,r,o,a){const{x:s,y:i}=xr(e),l=t.elementsFromPoint(s,i).find(e=>e.classList.contains("react-flow__handle"));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=uo(void 0,l),r=l.getAttribute("data-handleid"),s=a({nodeId:e,id:r,type:t});if(s){const a=o.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:a?.x||n.x,y:a?.y||n.y},validHandleResult:s}}}}let c=[],u=1/0;if(o.forEach(e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){const n=a(e);t<=u&&(t<u?c=[{handle:e,validHandleResult:n}]:t===u&&c.push({handle:e,validHandleResult:n}),u=t)}}),!c.length)return{handle:null,validHandleResult:lo()};if(1===c.length)return c[0];const d=c.some(({validHandleResult:e})=>e.isValid),f=c.some(({handle:e})=>"target"===e.type);return c.find(({handle:e,validHandleResult:t})=>f?"target"===e.type:!d||t.isValid)||c[0]}(e,u,Qr(N,r,!1,[1,1]),p,R,e=>co(e,d,n,t,o?"target":"source",i,u));if(v=l,M||(P(),M=!0),A=c.handleDomNode,O=c.connection,I=c.isValid,s({connectionPosition:v&&I?Zr({x:v.x,y:v.y},r):N,connectionStatus:ho(!!v,I),connectionEndHandle:c.endHandle}),!v&&!I&&!A)return fo(C);O.source!==O.target&&A&&(fo(C),C=A,A.classList.add("connecting","react-flow__handle-connecting"),A.classList.toggle("valid",I),A.classList.toggle("react-flow__handle-valid",I))}function $(e){(v||A)&&O&&I&&r?.(O),a().onConnectEnd?.(e),l&&c?.(e),fo(C),b(),cancelAnimationFrame(w),M=!1,I=!1,O=null,A=null,u.removeEventListener("mousemove",T),u.removeEventListener("mouseup",$),u.removeEventListener("touchmove",T),u.removeEventListener("touchend",$)}s({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:n,handleId:t,type:k},connectionEndHandle:null}),m?.(e,{nodeId:n,handleId:t,handleType:k}),u.addEventListener("mousemove",T),u.addEventListener("mouseup",$),u.addEventListener("touchmove",T),u.addEventListener("touchend",$)}const mo=()=>!0,go=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),yo=(0,r.forwardRef)(({type:e="source",position:t=Pr.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:l,onConnect:c,children:u,className:d,onMouseDown:f,onTouchStart:p,...m},g)=>{const y=l||null,b="target"===e,v=nr(),w=(0,r.useContext)(Xr),{connectOnClick:_,noPanClassName:x}=tr(go,h),{connecting:S,clickConnecting:k}=tr(((e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:a,connectionClickStartHandle:s}=r;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||a?.nodeId===e&&a?.handleId===t&&a?.type===n,clickConnecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n}})(w,y,e),h);w||v.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");const E=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=v.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=v.getState();t(Jr(o,e))}n?.(o),c?.(o)},C=e=>{if(!w)return;const t=_r(e);s&&(t&&0===e.button||!t)&&po({event:e,handleId:y,nodeId:w,onConnect:E,isTarget:b,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||mo}),t?f?.(e):p?.(e)};return r.createElement("div",{"data-handleid":y,"data-nodeid":w,"data-handlepos":t,"data-id":`${w}-${y}-${e}`,className:a(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,d,{source:!b,target:b,connectable:o,connectablestart:s,connectableend:i,connecting:k,connectionindicator:o&&(s&&!S||i&&S)}]),onMouseDown:C,onTouchStart:C,onClick:_?t=>{const{onClickConnectStart:r,onClickConnectEnd:o,connectionClickStartHandle:a,connectionMode:i,isValidConnection:l}=v.getState();if(!w||!a&&!s)return;if(!a)return r?.(t,{nodeId:w,handleId:y,handleType:e}),void v.setState({connectionClickStartHandle:{nodeId:w,type:e,handleId:y}});const c=fr(t.target),u=n||l||mo,{connection:d,isValid:f}=co({nodeId:w,id:y,type:e},i,a.nodeId,a.handleId||null,a.type,u,c);f&&E(d),o?.(t),v.setState({connectionClickStartHandle:null})}:void 0,ref:g,...m},u)});yo.displayName="Handle";var bo=(0,r.memo)(yo);const vo=({data:e,isConnectable:t,targetPosition:n=Pr.Top,sourcePosition:o=Pr.Bottom})=>r.createElement(r.Fragment,null,r.createElement(bo,{type:"target",position:n,isConnectable:t}),e?.label,r.createElement(bo,{type:"source",position:o,isConnectable:t}));vo.displayName="DefaultNode";var wo=(0,r.memo)(vo);const _o=({data:e,isConnectable:t,sourcePosition:n=Pr.Bottom})=>r.createElement(r.Fragment,null,e?.label,r.createElement(bo,{type:"source",position:n,isConnectable:t}));_o.displayName="InputNode";var xo=(0,r.memo)(_o);const So=({data:e,isConnectable:t,targetPosition:n=Pr.Top})=>r.createElement(r.Fragment,null,r.createElement(bo,{type:"target",position:n,isConnectable:t}),e?.label);So.displayName="OutputNode";var ko=(0,r.memo)(So);const Eo=()=>null;Eo.displayName="GroupNode";const Co=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),No=e=>e.id;function Mo(e,t){return h(e.selectedNodes.map(No),t.selectedNodes.map(No))&&h(e.selectedEdges.map(No),t.selectedEdges.map(No))}const Oo=(0,r.memo)(({onSelectionChange:e})=>{const t=nr(),{selectedNodes:n,selectedEdges:o}=tr(Co,Mo);return(0,r.useEffect)(()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChange.forEach(e=>e(r))},[n,o,e]),null});Oo.displayName="SelectionListener";const Io=e=>!!e.onSelectionChange;function Ao({onSelectionChange:e}){const t=tr(Io);return e||t?r.createElement(Oo,{onSelectionChange:e}):null}const Ro=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Po(e,t){(0,r.useEffect)(()=>{void 0!==e&&t(e)},[e])}function To(e,t,n){(0,r.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}const $o=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:y,maxZoom:b,nodeExtent:v,onNodesChange:w,onEdgesChange:_,elementsSelectable:x,connectionMode:S,snapGrid:k,snapToGrid:E,translateExtent:C,connectOnClick:N,defaultEdgeOptions:M,fitView:O,fitViewOptions:I,onNodesDelete:A,onEdgesDelete:R,onNodeDrag:P,onNodeDragStart:T,onNodeDragStop:$,onSelectionDrag:D,onSelectionDragStart:L,onSelectionDragStop:z,noPanClassName:B,nodeOrigin:j,rfId:F,autoPanOnConnect:U,autoPanOnNodeDrag:H,onError:q,connectionRadius:W,isValidConnection:V,nodeDragThreshold:X})=>{const{setNodes:K,setEdges:Y,setDefaultNodesAndEdges:G,setMinZoom:J,setMaxZoom:Q,setTranslateExtent:Z,setNodeExtent:ee,reset:te}=tr(Ro,h),ne=nr();return(0,r.useEffect)(()=>{const e=o?.map(e=>({...e,...M}));return G(n,e),()=>{te()}},[]),To("defaultEdgeOptions",M,ne.setState),To("connectionMode",S,ne.setState),To("onConnect",a,ne.setState),To("onConnectStart",s,ne.setState),To("onConnectEnd",i,ne.setState),To("onClickConnectStart",l,ne.setState),To("onClickConnectEnd",c,ne.setState),To("nodesDraggable",u,ne.setState),To("nodesConnectable",d,ne.setState),To("nodesFocusable",f,ne.setState),To("edgesFocusable",p,ne.setState),To("edgesUpdatable",m,ne.setState),To("elementsSelectable",x,ne.setState),To("elevateNodesOnSelect",g,ne.setState),To("snapToGrid",E,ne.setState),To("snapGrid",k,ne.setState),To("onNodesChange",w,ne.setState),To("onEdgesChange",_,ne.setState),To("connectOnClick",N,ne.setState),To("fitViewOnInit",O,ne.setState),To("fitViewOnInitOptions",I,ne.setState),To("onNodesDelete",A,ne.setState),To("onEdgesDelete",R,ne.setState),To("onNodeDrag",P,ne.setState),To("onNodeDragStart",T,ne.setState),To("onNodeDragStop",$,ne.setState),To("onSelectionDrag",D,ne.setState),To("onSelectionDragStart",L,ne.setState),To("onSelectionDragStop",z,ne.setState),To("noPanClassName",B,ne.setState),To("nodeOrigin",j,ne.setState),To("rfId",F,ne.setState),To("autoPanOnConnect",U,ne.setState),To("autoPanOnNodeDrag",H,ne.setState),To("onError",q,ne.setState),To("connectionRadius",W,ne.setState),To("isValidConnection",V,ne.setState),To("nodeDragThreshold",X,ne.setState),Po(e,K),Po(t,Y),Po(y,J),Po(b,Q),Po(C,Z),Po(v,ee),null},Do={display:"none"},Lo={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},zo="react-flow__node-desc",Bo="react-flow__edge-desc",jo=e=>e.ariaLiveMessage;function Fo({rfId:e}){const t=tr(jo);return r.createElement("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Lo},t)}function Uo({rfId:e,disableKeyboardA11y:t}){return r.createElement(r.Fragment,null,r.createElement("div",{id:`${zo}-${e}`,style:Do},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),r.createElement("div",{id:`${Bo}-${e}`,style:Do},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&r.createElement(Fo,{rfId:e}))}var Ho=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=(0,r.useState)(!1),a=(0,r.useRef)(!1),s=(0,r.useRef)(new Set([])),[i,l]=(0,r.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,r.useEffect)(()=>{const n="undefined"!=typeof document?document:null,r=t?.target||n;if(null!==e){const e=e=>{if(a.current=e.ctrlKey||e.metaKey||e.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&wr(e))return!1;const n=Wo(e.code,l);s.current.add(e[n]),qo(i,s.current,!1)&&(e.preventDefault(),o(!0))},n=e=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&wr(e))return!1;const n=Wo(e.code,l);qo(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),a.current=!1},c=()=>{s.current.clear(),o(!1)};return r?.addEventListener("keydown",e),r?.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{r?.removeEventListener("keydown",e),r?.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}},[e,o]),n};function qo(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Wo(e,t){return t.includes(e)?"code":"key"}function Vo(e,t,n,r){const o=e.parentNode||e.parentId;if(!o)return n;const a=t.get(o),s=eo(a,r);return Vo(a,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(a[yr]?.z??0)>(n.z??0)?a[yr]?.z??0:n.z??0},r)}function Xo(e,t,n){e.forEach(r=>{const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[r.id]){const{x:o,y:a,z:s}=Vo(r,e,{...r.position,z:r[yr]?.z??0},t);r.positionAbsolute={x:o,y:a},r[yr].z=s,n?.[r.id]&&(r[yr].isParent=!0)}})}function Ko(e,t,n,r){const o=new Map,a={},s=r?1e3:0;return e.forEach(e=>{const n=(gr(e.zIndex)?e.zIndex:0)+(e.selected?s:0),r=t.get(e.id),i={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},l=e.parentNode||e.parentId;l&&(a[l]=!0);const c=r?.type&&r?.type!==e.type;Object.defineProperty(i,yr,{enumerable:!1,value:{handleBounds:c?void 0:r?.[yr]?.handleBounds,z:n}}),o.set(e.id,i)}),Xo(o,n,a),o}function Yo(e,t={}){const{getNodes:n,width:r,height:o,minZoom:a,maxZoom:s,d3Zoom:i,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!c&&u;if(i&&l&&(f||!t.initial)){const e=n().filter(e=>{const n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),c=e.every(e=>e.width&&e.height);if(e.length>0&&c){const n=to(e,d),{x:c,y:u,zoom:f}=oo(n,r,o,t.minZoom??a,t.maxZoom??s,t.padding??.1),h=Ln.translate(c,u).scale(f);return"number"==typeof t.duration&&t.duration>0?i.transform(ao(l,t.duration),h):i.transform(l,h),!0}}return!1}function Go(e,t){return e.forEach(e=>{const n=t.get(e.id);n&&t.set(n.id,{...n,[yr]:n[yr],selected:e.selected})}),new Map(t)}function Jo(e,t){return t.map(t=>{const n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function Qo({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:a,onNodesChange:s,onEdgesChange:i,hasDefaultNodes:l,hasDefaultEdges:c}=n();e?.length&&(l&&r({nodeInternals:Go(e,o)}),s?.(e)),t?.length&&(c&&r({edges:Jo(t,a)}),i?.(t))}const Zo=()=>{},ea={zoomIn:Zo,zoomOut:Zo,zoomTo:Zo,getZoom:()=>1,setViewport:Zo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Zo,fitBounds:Zo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ta=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function na(){const e=(()=>{const e=nr(),{d3Zoom:t,d3Selection:n}=tr(ta,h),o=(0,r.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(ao(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(ao(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(ao(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{const[a,s,i]=e.getState().transform,l=Ln.translate(r.x??a,r.y??s).scale(r.zoom??i);t.transform(ao(n,o?.duration),l)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>Yo(e.getState,t),setCenter:(r,o,a)=>{const{width:s,height:i,maxZoom:l}=e.getState(),c=void 0!==a?.zoom?a.zoom:l,u=s/2-r*c,d=i/2-o*c,f=Ln.translate(u,d).scale(c);t.transform(ao(n,a?.duration),f)},fitBounds:(r,o)=>{const{width:a,height:s,minZoom:i,maxZoom:l}=e.getState(),{x:c,y:u,zoom:d}=oo(r,a,s,i,l,o?.padding??.1),f=Ln.translate(c,u).scale(d);t.transform(ao(n,o?.duration),f)},project:t=>{const{transform:n,snapToGrid:r,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Qr(t,n,r,o)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:s,y:i}=a.getBoundingClientRect(),l={x:t.x-s,y:t.y-i};return Qr(l,n,r,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),s=Zr(t,n);return{x:s.x+o,y:s.y+a}},viewportInitialized:!0}:ea,[t,n]);return o})(),t=nr(),n=(0,r.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),o=(0,r.useCallback)(e=>t.getState().nodeInternals.get(e),[]),a=(0,r.useCallback)(()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),s=(0,r.useCallback)(e=>{const{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),i=(0,r.useCallback)(e=>{const{getNodes:n,setNodes:r,hasDefaultNodes:o,onNodesChange:a}=t.getState(),s=n(),i="function"==typeof e?e(s):e;if(o)r(i);else if(a){a(0===i.length?s.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))}},[]),l=(0,r.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:a}=t.getState(),s="function"==typeof e?e(n):e;o?r(s):a&&a(0===s.length?n.map(e=>({type:"remove",id:e.id})):s.map(e=>({item:e,type:"reset"})))},[]),c=(0,r.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:o,hasDefaultNodes:a,onNodesChange:s}=t.getState();if(a)o([...r(),...n]);else if(s){s(n.map(e=>({item:e,type:"add"})))}},[]),u=(0,r.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:o,hasDefaultEdges:a,onEdgesChange:s}=t.getState();a?o([...r,...n]):s&&s(n.map(e=>({item:e,type:"add"})))},[]),d=(0,r.useCallback)(()=>{const{getNodes:e,edges:n=[],transform:r}=t.getState(),[o,a,s]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:a,zoom:s}}},[]),f=(0,r.useCallback)(({nodes:e,edges:n})=>{const{nodeInternals:r,getNodes:o,edges:a,hasDefaultNodes:s,hasDefaultEdges:i,onNodesDelete:l,onEdgesDelete:c,onNodesChange:u,onEdgesChange:d}=t.getState(),f=(e||[]).map(e=>e.id),h=(n||[]).map(e=>e.id),p=o().reduce((e,t)=>{const n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),m=a.filter(e=>"boolean"!=typeof e.deletable||e.deletable),g=m.filter(e=>h.includes(e.id));if(p||g){const e=ro(p,m),n=[...g,...e],o=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(i||s)&&(i&&t.setState({edges:a.filter(e=>!o.includes(e.id))}),s&&(p.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),o.length>0&&(c?.(n),d&&d(o.map(e=>({id:e,type:"remove"})))),p.length>0&&(l?.(p),u)&&u(p.map(e=>({id:e.id,type:"remove"})))}},[]),p=(0,r.useCallback)(e=>{const n=gr((r=e).width)&&gr(r.height)&&gr(r.x)&&gr(r.y);var r;const o=n?null:t.getState().nodeInternals.get(e.id);return n||o?[n?e:pr(o),o,n]:[null,null,n]},[]),m=(0,r.useCallback)((e,n=!0,r)=>{const[o,a,s]=p(e);return o?(r||t.getState().getNodes()).filter(e=>{if(!(s||e.id!==a.id&&e.positionAbsolute))return!1;const t=pr(e),r=mr(t,o);return n&&r>0||r>=o.width*o.height}):[]},[]),g=(0,r.useCallback)((e,t,n=!0)=>{const[r]=p(e);if(!r)return!1;const o=mr(r,t);return n&&o>0||o>=r.width*r.height},[]);return(0,r.useMemo)(()=>({...e,getNodes:n,getNode:o,getEdges:a,getEdge:s,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,n,o,a,s,i,l,c,u,d,f,m,g])}const ra={actInsideInputWithModifier:!1},oa={position:"absolute",width:"100%",height:"100%",top:0,left:0},aa=e=>({x:e.x,y:e.y,zoom:e.k}),sa=(e,t)=>e.target.closest(`.${t}`),ia=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),la=e=>{const t=e.ctrlKey&&Sr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},ca=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ua=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Or.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:p,translateExtent:m,minZoom:g,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:w=!0,children:_,noWheelClassName:x,noPanClassName:S})=>{const k=(0,r.useRef)(),E=nr(),C=(0,r.useRef)(!1),N=(0,r.useRef)(!1),M=(0,r.useRef)(null),O=(0,r.useRef)({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:A,d3ZoomHandler:R,userSelectionActive:P}=tr(ca,h),T=Ho(b),$=(0,r.useRef)(0),D=(0,r.useRef)(!1),L=(0,r.useRef)();return function(e){const t=nr();(0,r.useEffect)(()=>{let n;const r=()=>{if(!e.current)return;const n=ir(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}(M),(0,r.useEffect)(()=>{if(M.current){const e=M.current.getBoundingClientRect(),t=function(){var e,t,n,r=jn,o=Fn,a=Wn,s=Hn,i=qn,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=je,f=v("start","zoom","end"),h=0,p=10;function m(e){e.property("__zoom",Un).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Dn(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Dn(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,r){e.on("start.zoom",function(){_(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,a=arguments,s=_(e,a).event(r),i=o.apply(e,a),l=null==n?b(i):"function"==typeof n?n.apply(e,a):n,c=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),u=e.__zoom,f="function"==typeof t?t.apply(e,a):t,h=d(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=c/t[2];e=new Dn(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}})}function _(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=_(this,t).event(e),o=this.__zoom,i=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,s.apply(this,arguments)))),u=Fe(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=o.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(o.k===i)return;n.mouse=[u,o.invert(u)],ft(this),n.start()}Bn(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(y(g(o,i),n.mouse[0],n.mouse[1]),n.extent,c))}}function k(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,s=_(this,t,!0).event(e),i=Re(e.view).on("mousemove.zoom",function(e){if(Bn(e),!s.moved){var t=e.clientX-u,n=e.clientY-d;s.moved=t*t+n*n>h}s.event(e).zoom("mouse",a(y(s.that.__zoom,s.mouse[0]=Fe(e,o),s.mouse[1]),s.extent,c))},!0).on("mouseup.zoom",function(e){i.on("mousemove.zoom mouseup.zoom",null),ze(e.view,s.moved),Bn(e),s.event(e).end()},!0),l=Fe(e,o),u=e.clientX,d=e.clientY;Le(e.view),zn(e),s.mouse=[l,this.__zoom.invert(l)],ft(this),s.start()}}function E(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,s=Fe(e.changedTouches?e.changedTouches[0]:e,this),i=n.invert(s),l=n.k*(e.shiftKey?.5:2),d=a(y(g(n,l),s,i),o.apply(this,t),c);Bn(e),u>0?Re(this).transition().duration(u).call(w,d,s,e):Re(this).call(m.transform,d,s,e)}}function C(n,...o){if(r.apply(this,arguments)){var a,s,i,l,c=n.touches,u=c.length,d=_(this,o,n.changedTouches.length===u).event(n);for(zn(n),s=0;s<u;++s)l=[l=Fe(i=c[s],this),this.__zoom.invert(l),i.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,a=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),ft(this),d.start())}}function N(e,...t){if(this.__zooming){var n,r,o,s,i=_(this,t).event(e),l=e.changedTouches,u=l.length;for(Bn(e),n=0;n<u;++n)o=Fe(r=l[n],this),i.touch0&&i.touch0[2]===r.identifier?i.touch0[0]=o:i.touch1&&i.touch1[2]===r.identifier&&(i.touch1[0]=o);if(r=i.that.__zoom,i.touch1){var d=i.touch0[0],f=i.touch0[1],h=i.touch1[0],p=i.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,b=(b=p[0]-f[0])*b+(b=p[1]-f[1])*b;r=g(r,Math.sqrt(m/b)),o=[(d[0]+h[0])/2,(d[1]+h[1])/2],s=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!i.touch0)return;o=i.touch0[0],s=i.touch0[1]}i.zoom("touch",a(y(r,o,s),i.extent,c))}}function M(e,...r){if(this.__zooming){var o,a,s=_(this,r).event(e),i=e.changedTouches,l=i.length;for(zn(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)a=i[o],s.touch0&&s.touch0[2]===a.identifier?delete s.touch0:s.touch1&&s.touch1[2]===a.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(a=Fe(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<p)){var c=Re(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Un),e!==o?w(e,t,n,r):o.interrupt().each(function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,s=null==n?b(e):"function"==typeof n?n.apply(this,arguments):n,i=r.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return a(y(g(r,l),s,i),e,c)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},m.translateTo=function(e,t,n,r,s){m.transform(e,function(){var e=o.apply(this,arguments),s=this.__zoom,i=null==r?b(e):"function"==typeof r?r.apply(this,arguments):r;return a(Ln.translate(i[0],i[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},r,s)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Re(this.that).datum();f.call(e,this.that,new $n(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:Tn(+e),m):s},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:Tn(!!e),m):r},m.touchable=function(e){return arguments.length?(i="function"==typeof e?e:Tn(!!e),m):i},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:Tn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}().scaleExtent([g,y]).translateExtent(m),n=Re(M.current).call(t),r=Ln.translate(p.x,p.y).scale(lr(p.zoom,g,y)),o=[[0,0],[e.width,e.height]],a=t.constrain()(r,o,m);t.transform(n,a),t.wheelDelta(la),E.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[a.x,a.y,a.k],domNode:M.current.closest(".react-flow")})}},[]),(0,r.useEffect)(()=>{A&&I&&(!i||T||P?void 0!==R&&A.on("wheel.zoom",function(e,t){if(!w&&"wheel"===e.type&&!e.ctrlKey||sa(e,x))return null;e.preventDefault(),R.call(this,e,t)},{passive:!1}):A.on("wheel.zoom",r=>{if(sa(r,x))return!1;r.preventDefault(),r.stopImmediatePropagation();const o=A.property("__zoom").k||1;if(r.ctrlKey&&s){const e=Fe(r),t=la(r),n=o*Math.pow(2,t);return void I.scaleTo(A,n,e,r)}const a=1===r.deltaMode?20:1;let i=c===Or.Vertical?0:r.deltaX*a,u=c===Or.Horizontal?0:r.deltaY*a;!Sr()&&r.shiftKey&&c!==Or.Vertical&&(i=r.deltaY*a,u=0),I.translateBy(A,-i/o*l,-u/o*l,{internal:!0});const d=aa(A.property("__zoom")),{onViewportChangeStart:f,onViewportChange:h,onViewportChangeEnd:p}=E.getState();clearTimeout(L.current),D.current||(D.current=!0,t?.(r,d),f?.(d)),D.current&&(e?.(r,d),h?.(d),L.current=setTimeout(()=>{n?.(r,d),p?.(d),D.current=!1},150))},{passive:!1}))},[P,i,c,A,I,R,T,s,w,x,t,e,n]),(0,r.useEffect)(()=>{I&&I.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;$.current=e.sourceEvent?.button;const{onViewportChangeStart:n}=E.getState(),r=aa(e.transform);C.current=!0,O.current=r,"mousedown"===e.sourceEvent?.type&&E.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[I,t]),(0,r.useEffect)(()=>{I&&(P&&!C.current?I.on("zoom",null):P||I.on("zoom",t=>{const{onViewportChange:n}=E.getState();if(E.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),N.current=!(!o||!ia(f,$.current??0)),(e||n)&&!t.sourceEvent?.internal){const r=aa(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[P,I,e,f,o]),(0,r.useEffect)(()=>{I&&I.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:t}=E.getState();if(C.current=!1,E.setState({paneDragging:!1}),o&&ia(f,$.current??0)&&!N.current&&o(e.sourceEvent),N.current=!1,(n||t)&&(r=O.current,a=e.transform,r.x!==a.x||r.y!==a.y||r.zoom!==a.k)){const r=aa(e.transform);O.current=r,clearTimeout(k.current),k.current=setTimeout(()=>{t?.(r),n?.(e.sourceEvent,r)},i?150:0)}var r,a})},[I,i,f,n,o]),(0,r.useEffect)(()=>{I&&I.filter(e=>{const t=T||a,n=s&&e.ctrlKey;if((!0===f||Array.isArray(f)&&f.includes(1))&&1===e.button&&"mousedown"===e.type&&(sa(e,"react-flow__node")||sa(e,"react-flow__edge")))return!0;if(!(f||t||i||u||s))return!1;if(P)return!1;if(!u&&"dblclick"===e.type)return!1;if(sa(e,x)&&"wheel"===e.type)return!1;if(sa(e,S)&&("wheel"!==e.type||i&&"wheel"===e.type&&!T))return!1;if(!s&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!i&&!n&&"wheel"===e.type)return!1;if(!f&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(f)&&!f.includes(e.button)&&"mousedown"===e.type)return!1;const r=Array.isArray(f)&&f.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[P,I,a,s,i,u,f,d,T]),r.createElement("div",{className:"react-flow__renderer",ref:M,style:oa},_)},da=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function fa(){const{userSelectionActive:e,userSelectionRect:t}=tr(da,h);return e&&t?r.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ha(e,t){const n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){const e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style}||{},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function pa(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);const n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{const r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;const o={...n};for(const e of r)if(e)switch(e.type){case"select":o.selected=e.selected;break;case"position":void 0!==e.position&&(o.position=e.position),void 0!==e.positionAbsolute&&(o.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(o.dragging=e.dragging),o.expandParent&&ha(t,o);break;case"dimensions":void 0!==e.dimensions&&(o.width=e.dimensions.width,o.height=e.dimensions.height),void 0!==e.updateStyle&&(o.style={...o.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(o.resizing=e.resizing),o.expandParent&&ha(t,o);break;case"remove":return t}return t.push(o),t},n)}function ma(e,t){return pa(e,t)}const ga=(e,t)=>({id:e,type:"select",selected:t});function ya(e,t){return e.reduce((e,n)=>{const r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(ga(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(ga(n.id,!1))),e},[])}const ba=(e,t)=>n=>{n.target===t.current&&e?.(n)},va=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),wa=(0,r.memo)(({isSelecting:e,selectionMode:t=Ir.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:p})=>{const m=(0,r.useRef)(null),g=nr(),y=(0,r.useRef)(0),b=(0,r.useRef)(0),v=(0,r.useRef)(),{userSelectionActive:w,elementsSelectable:_,dragging:x}=tr(va,h),S=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,b.current=0},k=e=>{i?.(e),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},E=c?e=>c(e):void 0,C=_&&(e||w);return r.createElement("div",{className:a(["react-flow__pane",{dragging:x,selection:e}]),onClick:C?void 0:ba(k,m),onContextMenu:ba(e=>{Array.isArray(n)&&n?.includes(2)?e.preventDefault():l?.(e)},m),onWheel:ba(E,m),onMouseEnter:C?void 0:u,onMouseDown:C?t=>{const{resetSelectedElements:n,domNode:r}=g.getState();if(v.current=r?.getBoundingClientRect(),!_||!e||0!==t.button||t.target!==m.current||!v.current)return;const{x:a,y:s}=xr(t,v.current);n(),g.setState({userSelectionRect:{width:0,height:0,startX:a,startY:s,x:a,y:s}}),o?.(t)}:void 0,onMouseMove:C?n=>{const{userSelectionRect:r,nodeInternals:o,edges:a,transform:s,onNodesChange:i,onEdgesChange:l,nodeOrigin:c,getNodes:u}=g.getState();if(!e||!v.current||!r)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const d=xr(n,v.current),f=r.startX??0,h=r.startY??0,p={...r,x:d.x<f?d.x:f,y:d.y<h?d.y:h,width:Math.abs(d.x-f),height:Math.abs(d.y-h)},m=u(),w=no(o,p,s,t===Ir.Partial,!0,c),_=ro(w,a).map(e=>e.id),x=w.map(e=>e.id);if(y.current!==x.length){y.current=x.length;const e=ya(m,x);e.length&&i?.(e)}if(b.current!==_.length){b.current=_.length;const e=ya(a,_);e.length&&l?.(e)}g.setState({userSelectionRect:p})}:d,onMouseUp:C?e=>{if(0!==e.button)return;const{userSelectionRect:t}=g.getState();!w&&t&&e.target===m.current&&k?.(e),g.setState({nodesSelectionActive:y.current>0}),S(),s?.(e)}:void 0,onMouseLeave:C?e=>{w&&(g.setState({nodesSelectionActive:y.current>0}),s?.(e)),S()}:f,ref:m,style:oa},p,r.createElement(fa,null))});function _a(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return!!r&&(!!r.selected||_a(r,t))}function xa(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Sa(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!_a(n,e))&&(n.draggable||t&&void 0===n.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function ka(e,t,n,r,o=[0,0],a){const s=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||r);let i=s;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:r,y:a}=eo(t,o).positionAbsolute;i=[[e.extent[0][0]+r,e.extent[0][1]+a],[e.extent[1][0]+r,e.extent[1][1]+a]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:r,y:a}=eo(t,o).positionAbsolute;i=t&&gr(r)&&gr(a)&&gr(t.width)&&gr(t.height)?[[r+e.width*o[0],a+e.height*o[1]],[r+t.width-e.width+e.width*o[0],a+t.height-e.height+e.height*o[1]]]:i}else a?.("005","Only child nodes can use a parent extent."),i=s;let c={x:0,y:0};if(l){const e=n.get(l);c=eo(e,o).positionAbsolute}const u=i&&"parent"!==i?cr(t,i):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function Ea({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}wa.displayName="Pane";const Ca=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const a=Array.from(o),s=t.getBoundingClientRect(),i=s.width*r[0],l=s.height*r[1];return a.map(e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-s.left-i)/n,y:(t.top-s.top-l)/n,...ir(e)}})};function Na(e,t,n){return void 0===n?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Ma({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:s,nodeInternals:i,onError:l}=t.getState(),c=i.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])):l?.("012",(e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`)(e))}function Oa(e){return(t,n,r)=>e?.(t,r)}function Ia({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const l=nr(),[c,u]=(0,r.useState)(!1),d=(0,r.useRef)([]),f=(0,r.useRef)({x:null,y:null}),h=(0,r.useRef)(0),p=(0,r.useRef)(null),m=(0,r.useRef)({x:0,y:0}),g=(0,r.useRef)(null),y=(0,r.useRef)(!1),b=(0,r.useRef)(!1),w=(0,r.useRef)(!1),_=function(){const e=nr();return(0,r.useCallback)(({sourceEvent:t})=>{const{transform:n,snapGrid:r,snapToGrid:o}=e.getState(),a=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,i={x:(a-n[0])/n[2],y:(s-n[1])/n[2]};return{xSnapped:o?r[0]*Math.round(i.x/r[0]):i.x,ySnapped:o?r[1]*Math.round(i.y/r[1]):i.y,...i}},[])}();return(0,r.useEffect)(()=>{if(e?.current){const r=Re(e.current),c=({x:e,y:t})=>{const{nodeInternals:n,onNodeDrag:r,onSelectionDrag:o,updateNodePositions:s,nodeExtent:i,snapGrid:c,snapToGrid:h,nodeOrigin:p,onError:m}=l.getState();f.current={x:e,y:t};let y=!1,b={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&i){const e=to(d.current,p);b=hr(e)}if(d.current=d.current.map(r=>{const o={x:e-r.distance.x,y:t-r.distance.y};h&&(o.x=c[0]*Math.round(o.x/c[0]),o.y=c[1]*Math.round(o.y/c[1]));const a=[[i[0][0],i[0][1]],[i[1][0],i[1][1]]];d.current.length>1&&i&&!r.extent&&(a[0][0]=r.positionAbsolute.x-b.x+i[0][0],a[1][0]=r.positionAbsolute.x+(r.width??0)-b.x2+i[1][0],a[0][1]=r.positionAbsolute.y-b.y+i[0][1],a[1][1]=r.positionAbsolute.y+(r.height??0)-b.y2+i[1][1]);const s=ka(r,o,n,a,p,m);return y=y||r.position.x!==s.position.x||r.position.y!==s.position.y,r.position=s.position,r.positionAbsolute=s.positionAbsolute,r}),!y)return;s(d.current,!0,!0),u(!0);const v=a?r:Oa(o);if(v&&g.current){const[e,t]=Ea({nodeId:a,dragItems:d.current,nodeInternals:n});v(g.current,e,t)}},x=()=>{if(!p.current)return;const[e,t]=dr(m.current,p.current);if(0!==e||0!==t){const{transform:n,panBy:r}=l.getState();f.current.x=(f.current.x??0)-e/n[2],f.current.y=(f.current.y??0)-t/n[2],r({x:e,y:t})&&c(f.current)}h.current=requestAnimationFrame(x)},S=t=>{const{nodeInternals:n,multiSelectionActive:r,nodesDraggable:o,unselectNodesAndEdges:c,onNodeDragStart:u,onSelectionDragStart:h}=l.getState();b.current=!0;const p=a?u:Oa(h);i&&s||r||!a||n.get(a)?.selected||c(),a&&s&&i&&Ma({id:a,store:l,nodeRef:e});const m=_(t);if(f.current=m,d.current=Sa(n,o,m,a),p&&d.current){const[e,r]=Ea({nodeId:a,dragItems:d.current,nodeInternals:n});p(t.sourceEvent,e,r)}};if(!t){const t=function(){var e,t,n,r,o=Kn,a=Yn,s=Gn,i=Jn,l={},c=v("start","drag","end"),u=0,d=0;function f(e){e.on("mousedown.drag",h).filter(i).on("touchstart.drag",g).on("touchmove.drag",y,Pe).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(s,i){if(!r&&o.call(this,s,i)){var l=w(this,a.call(this,s,i),s,i,"mouse");l&&(Re(s.view).on("mousemove.drag",p,Te).on("mouseup.drag",m,Te),Le(s.view),$e(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function p(r){if(De(r),!n){var o=r.clientX-e,a=r.clientY-t;n=o*o+a*a>d}l.mouse("drag",r)}function m(e){Re(e.view).on("mousemove.drag mouseup.drag",null),ze(e.view,n),De(e),l.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,s=e.changedTouches,i=a.call(this,e,t),l=s.length;for(n=0;n<l;++n)(r=w(this,i,e,t,s[n].identifier,s[n]))&&($e(e),r("start",e,s[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(De(e),n("drag",e,r[t]))}function b(e){var t,n,o=e.changedTouches,a=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=l[o[t].identifier])&&($e(e),n("end",e,o[t]))}function w(e,t,n,r,o,a){var i,d,h,p=c.copy(),m=Fe(a||n,t);if(null!=(h=s.call(e,new Xn("beforestart",{sourceEvent:n,target:f,identifier:o,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return i=h.x-m[0]||0,d=h.y-m[1]||0,function n(a,s,c){var g,y=m;switch(a){case"start":l[o]=n,g=u++;break;case"end":delete l[o],--u;case"drag":m=Fe(c||s,t),g=u}p.call(a,e,new Xn(a,{sourceEvent:s,subject:h,target:f,identifier:o,active:g,x:m[0]+i,y:m[1]+d,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:Vn(!!e),f):o},f.container=function(e){return arguments.length?(a="function"==typeof e?e:Vn(e),f):a},f.subject=function(e){return arguments.length?(s="function"==typeof e?e:Vn(e),f):s},f.touchable=function(e){return arguments.length?(i="function"==typeof e?e:Vn(!!e),f):i},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",e=>{const{domNode:t,nodeDragThreshold:n}=l.getState();0===n&&S(e),w.current=!1;const r=_(e);f.current=r,p.current=t?.getBoundingClientRect()||null,m.current=xr(e.sourceEvent,p.current)}).on("drag",e=>{const t=_(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=l.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!y.current&&b.current&&n&&(y.current=!0,x()),!b.current){const n=t.xSnapped-(f?.current?.x??0),o=t.ySnapped-(f?.current?.y??0);Math.sqrt(n*n+o*o)>r&&S(e)}(f.current.x!==t.xSnapped||f.current.y!==t.ySnapped)&&d.current&&b.current&&(g.current=e.sourceEvent,m.current=xr(e.sourceEvent,p.current),c(t))}}).on("end",e=>{if(b.current&&!w.current&&(u(!1),y.current=!1,b.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:o}=l.getState(),s=a?r:Oa(o);if(t(d.current,!1,!1),s){const[t,r]=Ea({nodeId:a,dragItems:d.current,nodeInternals:n});s(e.sourceEvent,t,r)}}}).filter(t=>{const r=t.target;return!t.button&&(!n||!xa(r,`.${n}`,e))&&(!o||xa(r,o,e))});return r.call(t),()=>{r.on(".drag",null)}}r.on(".drag",null)}},[e,t,n,o,s,l,a,i,_]),c}function Aa(){const e=nr();return(0,r.useCallback)(t=>{const{nodeInternals:n,nodeExtent:r,updateNodePositions:o,getNodes:a,snapToGrid:s,snapGrid:i,onError:l,nodesDraggable:c}=e.getState(),u=a().filter(e=>e.selected&&(e.draggable||c&&void 0===e.draggable)),d=s?i[0]:5,f=s?i[1]:5,h=t.isShiftPressed?4:1,p=t.x*d*h,m=t.y*f*h;o(u.map(e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+m};s&&(t.x=i[0]*Math.round(t.x/i[0]),t.y=i[1]*Math.round(t.y/i[1]));const{positionAbsolute:o,position:a}=ka(e,t,n,r,void 0,l);e.position=a,e.positionAbsolute=o}return e}),!0,!1)},[])}const Ra={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Pa=e=>{const t=({id:t,type:n,data:o,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:m,onDoubleClick:g,style:y,className:b,isDraggable:v,isSelectable:w,isConnectable:_,isFocusable:x,selectNodesOnDrag:S,sourcePosition:k,targetPosition:E,hidden:C,resizeObserver:N,dragHandle:M,zIndex:O,isParent:I,noDragClassName:A,noPanClassName:R,initialized:P,disableKeyboardA11y:T,ariaLabel:$,rfId:D,hasHandleBounds:L})=>{const z=nr(),B=(0,r.useRef)(null),j=(0,r.useRef)(null),F=(0,r.useRef)(k),U=(0,r.useRef)(E),H=(0,r.useRef)(n),q=w||v||d||f||h||p,W=Aa(),V=Na(t,z.getState,f),X=Na(t,z.getState,h),K=Na(t,z.getState,p),Y=Na(t,z.getState,m),G=Na(t,z.getState,g);(0,r.useEffect)(()=>()=>{j.current&&(N?.unobserve(j.current),j.current=null)},[]),(0,r.useEffect)(()=>{if(B.current&&!C){const e=B.current;P&&L&&j.current===e||(j.current&&N?.unobserve(j.current),N?.observe(e),j.current=e)}},[C,P,L]),(0,r.useEffect)(()=>{const e=H.current!==n,r=F.current!==k,o=U.current!==E;B.current&&(e||r||o)&&(e&&(H.current=n),r&&(F.current=k),o&&(U.current=E),z.getState().updateNodeDimensions([{id:t,nodeElement:B.current,forceUpdate:!0}]))},[t,n,k,E]);const J=Ia({nodeRef:B,disabled:C||!v,noDragClassName:A,handleSelector:M,nodeId:t,isSelectable:w,selectNodesOnDrag:S});return C?null:r.createElement("div",{className:a(["react-flow__node",`react-flow__node-${n}`,{[R]:v},b,{selected:u,selectable:w,parent:I,dragging:J}]),ref:B,style:{zIndex:O,transform:`translate(${l}px,${c}px)`,pointerEvents:q?"all":"none",visibility:P?"visible":"hidden",...y},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:V,onMouseMove:X,onMouseLeave:K,onContextMenu:Y,onClick:e=>{const{nodeDragThreshold:n}=z.getState();if(w&&(!S||!v||n>0)&&Ma({id:t,store:z,nodeRef:B}),d){const n=z.getState().nodeInternals.get(t);n&&d(e,{...n})}},onDoubleClick:G,onKeyDown:x?e=>{if(!wr(e)&&!T)if(br.includes(e.key)&&w){const n="Escape"===e.key;Ma({id:t,store:z,unselect:n,nodeRef:B})}else v&&u&&Object.prototype.hasOwnProperty.call(Ra,e.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),W({x:Ra[e.key].x,y:Ra[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:x?0:void 0,role:x?"button":void 0,"aria-describedby":T?void 0:`${zo}-${D}`,"aria-label":$},r.createElement(Kr,{value:t},r.createElement(e,{id:t,data:o,type:n,xPos:s,yPos:i,selected:u,isConnectable:_,sourcePosition:k,targetPosition:E,dragging:J,dragHandle:M,zIndex:O})))};return t.displayName="NodeWrapper",(0,r.memo)(t)};const Ta=e=>{const t=e.getNodes().filter(e=>e.selected);return{...to(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var $a=(0,r.memo)(function({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=nr(),{width:s,height:i,x:l,y:c,transformString:u,userSelectionActive:d}=tr(Ta,h),f=Aa(),p=(0,r.useRef)(null);if((0,r.useEffect)(()=>{n||p.current?.focus({preventScroll:!0})},[n]),Ia({nodeRef:p}),d||!s||!i)return null;const m=e?t=>{const n=o.getState().getNodes().filter(e=>e.selected);e(t,n)}:void 0;return r.createElement("div",{className:a(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},r.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Ra,e.key)&&f({x:Ra[e.key].x,y:Ra[e.key].y,isShiftPressed:e.shiftKey})},style:{width:s,height:i,top:c,left:l}}))});const Da=e=>e.nodesSelectionActive,La=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:y,panActivationKeyCode:b,zoomActivationKeyCode:v,elementsSelectable:w,zoomOnScroll:_,zoomOnPinch:x,panOnScroll:S,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:N,defaultViewport:M,translateExtent:O,minZoom:I,maxZoom:A,preventScrolling:R,onSelectionContextMenu:P,noWheelClassName:T,noPanClassName:$,disableKeyboardA11y:D})=>{const L=tr(Da),z=Ho(f),B=Ho(b),j=B||N,F=B||S,U=z||h&&!0!==j;return(({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=nr(),{deleteElements:o}=na(),a=Ho(e,ra),s=Ho(t);(0,r.useEffect)(()=>{if(a){const{edges:e,getNodes:t}=n.getState(),r=t().filter(e=>e.selected),a=e.filter(e=>e.selected);o({nodes:r,edges:a}),n.setState({nodesSelectionActive:!1})}},[a]),(0,r.useEffect)(()=>{n.setState({multiSelectionActive:s})},[s])})({deleteKeyCode:l,multiSelectionKeyCode:y}),r.createElement(ua,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:_,zoomOnPinch:x,panOnScroll:F,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:!z&&j,defaultViewport:M,translateExtent:O,minZoom:I,maxZoom:A,zoomActivationKeyCode:v,preventScrolling:R,noWheelClassName:T,noPanClassName:$},r.createElement(wa,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:j,isSelecting:!!U,selectionMode:p},e,L&&r.createElement($a,{onSelectionContextMenu:P,noPanClassName:$,disableKeyboardA11y:D})))};La.displayName="FlowRenderer";var za=(0,r.memo)(La);function Ba(e){return{input:Pa(e.input||xo),default:Pa(e.default||wo),output:Pa(e.output||ko),group:Pa(e.group||Eo),...Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=Pa(e[n]||wo),t),{})}}const ja=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Fa=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,updateNodeDimensions:s,onError:i}=tr(ja,h),l=(c=e.onlyRenderVisibleElements,tr((0,r.useCallback)(e=>c?no(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[c])));var c;const u=(0,r.useRef)(),d=(0,r.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;const e=new ResizeObserver(e=>{const t=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));s(t)});return u.current=e,e},[]);return(0,r.useEffect)(()=>()=>{u?.current?.disconnect()},[]),r.createElement("div",{className:"react-flow__nodes",style:oa},l.map(s=>{let l=s.type||"default";e.nodeTypes[l]||(i?.("003",(e=>`Node type "${e}" not found. Using fallback type "default".`)(l)),l="default");const c=e.nodeTypes[l]||e.nodeTypes.default,u=!!(s.draggable||t&&void 0===s.draggable),f=!!(s.selectable||a&&void 0===s.selectable),h=!!(s.connectable||n&&void 0===s.connectable),p=!!(s.focusable||o&&void 0===s.focusable),m=e.nodeExtent?cr(s.positionAbsolute,e.nodeExtent):s.positionAbsolute,g=m?.x??0,y=m?.y??0,b=(({x:e,y:t,width:n,height:r,origin:o})=>n&&r?o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]}:{x:e,y:t})({x:g,y,width:s.width??0,height:s.height??0,origin:e.nodeOrigin});return r.createElement(c,{key:s.id,id:s.id,className:s.className,style:s.style,type:l,data:s.data,sourcePosition:s.sourcePosition||Pr.Bottom,targetPosition:s.targetPosition||Pr.Top,hidden:s.hidden,xPos:g,yPos:y,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!s.selected,isDraggable:u,isSelectable:f,isConnectable:h,isFocusable:p,resizeObserver:d,dragHandle:s.dragHandle,zIndex:s[yr]?.z??0,isParent:!!s[yr]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!s.width&&!!s.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:s.ariaLabel,hasHandleBounds:!!s[yr]?.handleBounds})}))};Fa.displayName="NodeRenderer";var Ua=(0,r.memo)(Fa);const Ha=(e,t,n)=>n===Pr.Left?e-t:n===Pr.Right?e+t:e,qa=(e,t,n)=>n===Pr.Top?e-t:n===Pr.Bottom?e+t:e,Wa="react-flow__edgeupdater",Va=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:s,onMouseEnter:i,onMouseOut:l,type:c})=>r.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:l,className:a([Wa,`${Wa}-${c}`]),cx:Ha(t,o,e),cy:qa(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),Xa=()=>!0;var Ka=e=>{const t=({id:t,className:n,type:o,data:s,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:y,source:b,target:v,sourceX:w,sourceY:_,targetX:x,targetY:S,sourcePosition:k,targetPosition:E,elementsSelectable:C,hidden:N,sourceHandleId:M,targetHandleId:O,onContextMenu:I,onMouseEnter:A,onMouseMove:R,onMouseLeave:P,reconnectRadius:T,onReconnect:$,onReconnectStart:D,onReconnectEnd:L,markerEnd:z,markerStart:B,rfId:j,ariaLabel:F,isFocusable:U,isReconnectable:H,pathOptions:q,interactionWidth:W,disableKeyboardA11y:V})=>{const X=(0,r.useRef)(null),[K,Y]=(0,r.useState)(!1),[G,J]=(0,r.useState)(!1),Q=nr(),Z=(0,r.useMemo)(()=>`url('#${Gr(B,j)}')`,[B,j]),ee=(0,r.useMemo)(()=>`url('#${Gr(z,j)}')`,[z,j]);if(N)return null;const te=Er(t,Q.getState,l),ne=Er(t,Q.getState,I),re=Er(t,Q.getState,A),oe=Er(t,Q.getState,R),ae=Er(t,Q.getState,P),se=(e,n)=>{if(0!==e.button)return;const{edges:r,isValidConnection:o}=Q.getState(),a=n?v:b,s=(n?O:M)||null,i=n?"target":"source",l=o||Xa,c=n,u=r.find(e=>e.id===t);J(!0),D?.(e,u,i),po({event:e,handleId:s,nodeId:a,onConnect:e=>$?.(u,e),isTarget:c,getState:Q.getState,setState:Q.setState,isValidConnection:l,edgeUpdaterType:i,onReconnectEnd:e=>{J(!1),L?.(e,u,i)}})},ie=()=>Y(!0),le=()=>Y(!1),ce=!C&&!i;return r.createElement("g",{className:a(["react-flow__edge",`react-flow__edge-${o}`,n,{selected:c,animated:u,inactive:ce,updating:K}]),onClick:e=>{const{edges:n,addSelectedEdges:r,unselectNodesAndEdges:o,multiSelectionActive:a}=Q.getState(),s=n.find(e=>e.id===t);s&&(C&&(Q.setState({nodesSelectionActive:!1}),s.selected&&a?(o({nodes:[],edges:[s]}),X.current?.blur()):r([t])),i&&i(e,s))},onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ae,onKeyDown:U?e=>{if(!V&&br.includes(e.key)&&C){const{unselectNodesAndEdges:n,addSelectedEdges:r,edges:o}=Q.getState();"Escape"===e.key?(X.current?.blur(),n({edges:[o.find(e=>e.id===t)]})):r([t])}}:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===F?void 0:F||`Edge from ${b} to ${v}`,"aria-describedby":U?`${Bo}-${j}`:void 0,ref:X},!G&&r.createElement(e,{id:t,source:b,target:v,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,data:s,style:y,sourceX:w,sourceY:_,targetX:x,targetY:S,sourcePosition:k,targetPosition:E,sourceHandleId:M,targetHandleId:O,markerStart:Z,markerEnd:ee,pathOptions:q,interactionWidth:W}),H&&r.createElement(r.Fragment,null,("source"===H||!0===H)&&r.createElement(Va,{position:k,centerX:w,centerY:_,radius:T,onMouseDown:e=>se(e,!0),onMouseEnter:ie,onMouseOut:le,type:"source"}),("target"===H||!0===H)&&r.createElement(Va,{position:E,centerX:x,centerY:S,radius:T,onMouseDown:e=>se(e,!1),onMouseEnter:ie,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",(0,r.memo)(t)};function Ya(e){return{default:Ka(e.default||Vr),straight:Ka(e.bezier||Ur),step:Ka(e.step||Fr),smoothstep:Ka(e.step||jr),simplebezier:Ka(e.simplebezier||Dr),...Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=Ka(e[n]||Vr),t),{})}}function Ga(e,t,n=null){const r=(n?.x||0)+t.x,o=(n?.y||0)+t.y,a=n?.width||t.width,s=n?.height||t.height;switch(e){case Pr.Top:return{x:r+a/2,y:o};case Pr.Right:return{x:r+a,y:o+s/2};case Pr.Bottom:return{x:r+a/2,y:o+s};case Pr.Left:return{x:r,y:o+s/2}}}function Ja(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function Qa(e){const t=e?.[yr]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const Za=[{level:0,isMaxLevel:!0,edges:[]}];const es={[Rr.Arrow]:({color:e="none",strokeWidth:t=1})=>r.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Rr.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>r.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ts=({id:e,type:t,color:n,width:o=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=function(e){const t=nr();return(0,r.useMemo)(()=>Object.prototype.hasOwnProperty.call(es,e)?es[e]:(t.getState().onError?.("009",(e=>`Marker type "${e}" doesn't exist.`)(e)),null),[e])}(t);return c?r.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},r.createElement(c,{color:n,strokeWidth:i})):null},ns=({defaultColor:e,rfId:t})=>{const n=tr((0,r.useCallback)((({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((n,o)=>([o.markerStart,o.markerEnd].forEach(o=>{if(o&&"object"==typeof o){const a=Gr(o,t);r.includes(a)||(n.push({id:a,color:o.color||e,...o}),r.push(a))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))})({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return r.createElement("defs",null,n.map(e=>r.createElement(ts,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};ns.displayName="MarkerDefinitions";var rs=(0,r.memo)(ns);const os=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),as=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:f,onEdgeDoubleClick:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:y,reconnectRadius:b,children:v,disableKeyboardA11y:w})=>{const{edgesFocusable:_,edgesUpdatable:x,elementsSelectable:S,width:k,height:E,connectionMode:C,nodeInternals:N,onError:M}=tr(os,h),O=function(e,t,n){return function(e,t,n=!1){let r=-1;const o=e.reduce((e,o)=>{const a=gr(o.zIndex);let s=a?o.zIndex:0;if(n){const e=t.get(o.target),n=t.get(o.source),r=o.selected||e?.selected||n?.selected,i=Math.max(n?.[yr]?.z||0,e?.[yr]?.z||0,1e3);s=(a?o.zIndex:0)+(r?i:0)}return e[s]?e[s].push(o):e[s]=[o],r=s>r?s:r,e},{}),a=Object.entries(o).map(([e,t])=>{const n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return 0===a.length?Za:a}(tr((0,r.useCallback)(n=>e?n.edges.filter(e=>{const r=t.get(e.source),o=t.get(e.target);return r?.width&&r?.height&&o?.width&&o?.height&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:a,width:s,height:i,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=hr({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:i/l[2]}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),f=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*f)>0}({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:o.width,targetHeight:o.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t])),t,n)}(t,N,n);return k?r.createElement(r.Fragment,null,O.map(({level:t,edges:n,isMaxLevel:h})=>r.createElement("svg",{key:t,style:{zIndex:t},width:k,height:E,className:"react-flow__edges react-flow__container"},h&&r.createElement(rs,{defaultColor:e,rfId:o}),r.createElement("g",null,n.map(e=>{const[t,n,h]=Qa(N.get(e.source)),[v,k,E]=Qa(N.get(e.target));if(!h||!E)return null;let O=e.type||"default";s[O]||(M?.("011",(e=>`Edge type "${e}" not found. Using fallback type "default".`)(O)),O="default");const I=s[O]||s.default,A=C===Mr.Strict?k.target:(k.target??[]).concat(k.source??[]),R=Ja(n.source,e.sourceHandle),P=Ja(A,e.targetHandle),T=R?.position||Pr.Bottom,$=P?.position||Pr.Top,D=!!(e.focusable||_&&void 0===e.focusable),L=e.reconnectable||e.updatable,z=void 0!==m&&(L||x&&void 0===L);if(!R||!P)return M?.("008",((e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`)(R,e)),null;const{sourceX:B,sourceY:j,targetX:F,targetY:U}=((e,t,n,r,o,a)=>{const s=Ga(n,e,t),i=Ga(a,r,o);return{sourceX:s.x,sourceY:s.y,targetX:i.x,targetY:i.y}})(t,R,T,v,P,$);return r.createElement(I,{key:e.id,id:e.id,className:a([e.className,i]),type:O,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:B,sourceY:j,targetX:F,targetY:U,sourcePosition:T,targetPosition:$,elementsSelectable:S,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:f,onEdgeDoubleClick:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:y,reconnectRadius:b,rfId:o,ariaLabel:e.ariaLabel,isFocusable:D,isReconnectable:z,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:w})})))),v):null};as.displayName="EdgeRenderer";var ss=(0,r.memo)(as);const is=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ls({children:e}){const t=tr(is);return r.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}const cs={[Pr.Left]:Pr.Right,[Pr.Right]:Pr.Left,[Pr.Top]:Pr.Bottom,[Pr.Bottom]:Pr.Top},us=({nodeId:e,handleType:t,style:n,type:o=Ar.Bezier,CustomComponent:a,connectionStatus:s})=>{const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=tr((0,r.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),h),f=i?.[yr]?.handleBounds;let p=f?.[t];if(d===Mr.Loose&&(p=p||f?.["source"===t?"target":"source"]),!i||!p)return null;const m=l?p.find(e=>e.id===l):p[0],g=m?m.x+m.width/2:(i.width??0)/2,y=m?m.y+m.height/2:i.height??0,b=(i.positionAbsolute?.x??0)+g,v=(i.positionAbsolute?.y??0)+y,w=m?.position,_=w?cs[w]:null;if(!w||!_)return null;if(a)return r.createElement(a,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:m,fromX:b,fromY:v,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let x="";const S={sourceX:b,sourceY:v,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return o===Ar.Bezier?[x]=Wr(S):o===Ar.Step?[x]=Br({...S,borderRadius:0}):o===Ar.SmoothStep?[x]=Br(S):o===Ar.SimpleBezier?[x]=$r(S):x=`M${b},${v} ${c},${u}`,r.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};us.displayName="ConnectionLine";const ds=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function fs({containerStyle:e,style:t,type:n,component:o}){const{nodeId:s,handleType:i,nodesConnectable:l,width:c,height:u,connectionStatus:d}=tr(ds,h);return s&&i&&c&&l?r.createElement("svg",{style:e,width:c,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},r.createElement("g",{className:a(["react-flow__connection",d])},r.createElement(us,{nodeId:s,handleType:i,style:t,type:n,CustomComponent:o,connectionStatus:d}))):null}function hs(e,t){return(0,r.useRef)(null),nr(),(0,r.useMemo)(()=>t(e),[e])}const ps=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:m,onSelectionStart:g,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:v,connectionLineComponent:w,connectionLineContainerStyle:_,selectionKeyCode:x,selectionOnDrag:S,selectionMode:k,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:N,deleteKeyCode:M,onlyRenderVisibleElements:O,elementsSelectable:I,selectNodesOnDrag:A,defaultViewport:R,translateExtent:P,minZoom:T,maxZoom:$,preventScrolling:D,defaultMarkerColor:L,zoomOnScroll:z,zoomOnPinch:B,panOnScroll:j,panOnScrollSpeed:F,panOnScrollMode:U,zoomOnDoubleClick:H,panOnDrag:q,onPaneClick:W,onPaneMouseEnter:V,onPaneMouseMove:X,onPaneMouseLeave:K,onPaneScroll:Y,onPaneContextMenu:G,onEdgeContextMenu:J,onEdgeMouseEnter:Q,onEdgeMouseMove:Z,onEdgeMouseLeave:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,reconnectRadius:oe,noDragClassName:ae,noWheelClassName:se,noPanClassName:ie,elevateEdgesOnSelect:le,disableKeyboardA11y:ce,nodeOrigin:ue,nodeExtent:de,rfId:fe})=>{const he=hs(e,Ba),pe=hs(t,Ya);return function(e){const t=na(),n=(0,r.useRef)(!1);(0,r.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(s),r.createElement(za,{onPaneClick:W,onPaneMouseEnter:V,onPaneMouseMove:X,onPaneMouseLeave:K,onPaneContextMenu:G,onPaneScroll:Y,deleteKeyCode:M,selectionKeyCode:x,selectionOnDrag:S,selectionMode:k,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:I,onMove:n,onMoveStart:o,onMoveEnd:a,zoomOnScroll:z,zoomOnPinch:B,zoomOnDoubleClick:H,panOnScroll:j,panOnScrollSpeed:F,panOnScrollMode:U,panOnDrag:q,defaultViewport:R,translateExtent:P,minZoom:T,maxZoom:$,onSelectionContextMenu:m,preventScrolling:D,noDragClassName:ae,noWheelClassName:se,noPanClassName:ie,disableKeyboardA11y:ce},r.createElement(ls,null,r.createElement(ss,{edgeTypes:pe,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:J,onEdgeMouseEnter:Q,onEdgeMouseMove:Z,onEdgeMouseLeave:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,reconnectRadius:oe,defaultMarkerColor:L,noPanClassName:ie,elevateEdgesOnSelect:!!le,disableKeyboardA11y:ce,rfId:fe},r.createElement(fs,{style:v,type:b,component:w,containerStyle:_})),r.createElement("div",{className:"react-flow__edgelabel-renderer"}),r.createElement(Ua,{nodeTypes:he,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:A,onlyRenderVisibleElements:O,noPanClassName:ie,noDragClassName:ae,disableKeyboardA11y:ce,nodeOrigin:ue,nodeExtent:de,rfId:fe})))};ps.displayName="GraphView";var ms=(0,r.memo)(ps);const gs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ys={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:gs,nodeExtent:gs,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Mr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:vr,isValidConnection:void 0},bs=({children:e})=>{const t=(0,r.useRef)(null);return t.current||(t.current=(n=(e,t)=>({...ys,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:a}=t();e({nodeInternals:Ko(n,r,o,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{const o=void 0!==n,a=void 0!==r,s=o?Ko(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:a?r:[],hasDefaultNodes:o,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:a,fitViewOnInitDone:s,fitViewOnInitOptions:i,domNode:l,nodeOrigin:c}=t(),u=l?.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((e,t)=>{const n=o.get(t.id);if(n?.hidden)o.set(n.id,{...n,[yr]:{...n[yr],handleBounds:void 0}});else if(n){const r=ir(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(o.set(n.id,{...n,[yr]:{...n[yr],handleBounds:{source:Ca(".source",t.nodeElement,f,c),target:Ca(".target",t.nodeElement,f,c)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);Xo(o,c);const p=s||a&&!s&&Yo(t,{initial:!0,...i});e({nodeInternals:new Map(o),fitViewOnInitDone:p}),h?.length>0&&r?.(h)},updateNodePositions:(e,n=!0,r=!1)=>{const{triggerNodeChanges:o}=t();o(e.map(e=>{const t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:a,nodeOrigin:s,getNodes:i,elevateNodesOnSelect:l}=t();if(n?.length){if(a){const t=Ko(ma(n,i()),o,s,l);e({nodeInternals:t})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:a}=t();let s,i=null;r?s=n.map(e=>ga(e,!0)):(s=ya(a(),n),i=ya(o,[])),Qo({changedNodes:s,changedEdges:i,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:a}=t();let s,i=null;r?s=n.map(e=>ga(e,!0)):(s=ya(o,n),i=ya(a(),[])),Qo({changedNodes:i,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:a}=t(),s=r||o;Qo({changedNodes:(n||a()).map(e=>(e.selected=!1,ga(e.id,!1))),changedEdges:s.map(e=>ga(e.id,!1)),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t();Qo({changedNodes:r().filter(e=>e.selected).map(e=>ga(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>ga(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=cr(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{const{transform:n,width:r,height:o,d3Zoom:a,d3Selection:s,translateExtent:i}=t();if(!a||!s||!e.x&&!e.y)return!1;const l=Ln.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[r,o]],u=a?.constrain()(l,c,i);return a.transform(s,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:ys.connectionNodeId,connectionHandleId:ys.connectionHandleId,connectionHandleType:ys.connectionHandleType,connectionStatus:ys.connectionStatus,connectionStartHandle:ys.connectionStartHandle,connectionEndHandle:ys.connectionEndHandle}),reset:()=>e({...ys})}),o=Object.is,n?f(n,o):f)),r.createElement(Zn,{value:t.current},e);var n,o};bs.displayName="ReactFlowProvider";const vs=({children:e})=>(0,r.useContext)(Qn)?r.createElement(r.Fragment,null,e):r.createElement(bs,null,e);vs.displayName="ReactFlowWrapper";const ws={input:xo,default:wo,output:ko,group:Eo},_s={default:Vr,straight:Ur,step:Fr,smoothstep:jr,simplebezier:Dr},xs=[0,0],Ss=[15,15],ks={x:0,y:0,zoom:1},Es={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Cs=(0,r.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:s,nodeTypes:i=ws,edgeTypes:l=_s,onNodeClick:c,onEdgeClick:u,onInit:d,onMove:f,onMoveStart:h,onMoveEnd:p,onConnect:m,onConnectStart:g,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:v,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:x,onNodeContextMenu:S,onNodeDoubleClick:k,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:N,onNodesDelete:M,onEdgesDelete:O,onSelectionChange:I,onSelectionDragStart:A,onSelectionDrag:R,onSelectionDragStop:P,onSelectionContextMenu:T,onSelectionStart:$,onSelectionEnd:D,connectionMode:L=Mr.Strict,connectionLineType:z=Ar.Bezier,connectionLineStyle:B,connectionLineComponent:j,connectionLineContainerStyle:F,deleteKeyCode:U="Backspace",selectionKeyCode:H="Shift",selectionOnDrag:q=!1,selectionMode:W=Ir.Full,panActivationKeyCode:V="Space",multiSelectionKeyCode:X=(Sr()?"Meta":"Control"),zoomActivationKeyCode:K=(Sr()?"Meta":"Control"),snapToGrid:Y=!1,snapGrid:G=Ss,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:Q=!0,nodesDraggable:Z,nodesConnectable:ee,nodesFocusable:te,nodeOrigin:ne=xs,edgesFocusable:re,edgesUpdatable:oe,elementsSelectable:ae,defaultViewport:se=ks,minZoom:ie=.5,maxZoom:le=2,translateExtent:ce=gs,preventScrolling:ue=!0,nodeExtent:de,defaultMarkerColor:fe="#b1b1b7",zoomOnScroll:he=!0,zoomOnPinch:pe=!0,panOnScroll:me=!1,panOnScrollSpeed:ge=.5,panOnScrollMode:ye=Or.Free,zoomOnDoubleClick:be=!0,panOnDrag:ve=!0,onPaneClick:we,onPaneMouseEnter:_e,onPaneMouseMove:xe,onPaneMouseLeave:Se,onPaneScroll:ke,onPaneContextMenu:Ee,children:Ce,onEdgeContextMenu:Ne,onEdgeDoubleClick:Me,onEdgeMouseEnter:Oe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ae,onEdgeUpdate:Re,onEdgeUpdateStart:Pe,onEdgeUpdateEnd:Te,onReconnect:$e,onReconnectStart:De,onReconnectEnd:Le,reconnectRadius:ze=10,edgeUpdaterRadius:Be=10,onNodesChange:je,onEdgesChange:Fe,noDragClassName:Ue="nodrag",noWheelClassName:He="nowheel",noPanClassName:qe="nopan",fitView:We=!1,fitViewOptions:Ve,connectOnClick:Xe=!0,attributionPosition:Ke,proOptions:Ye,defaultEdgeOptions:Ge,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Qe=!1,disableKeyboardA11y:Ze=!1,autoPanOnConnect:et=!0,autoPanOnNodeDrag:tt=!0,connectionRadius:nt=20,isValidConnection:rt,onError:ot,style:at,id:st,nodeDragThreshold:it,...lt},ct)=>{const ut=st||"1";return r.createElement("div",{...lt,style:{...at,...Es},ref:ct,className:a(["react-flow",s]),"data-testid":"rf__wrapper",id:st},r.createElement(vs,null,r.createElement(ms,{onInit:d,onMove:f,onMoveStart:h,onMoveEnd:p,onNodeClick:c,onEdgeClick:u,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:x,onNodeContextMenu:S,onNodeDoubleClick:k,nodeTypes:i,edgeTypes:l,connectionLineType:z,connectionLineStyle:B,connectionLineComponent:j,connectionLineContainerStyle:F,selectionKeyCode:H,selectionOnDrag:q,selectionMode:W,deleteKeyCode:U,multiSelectionKeyCode:X,panActivationKeyCode:V,zoomActivationKeyCode:K,onlyRenderVisibleElements:J,selectNodesOnDrag:Q,defaultViewport:se,translateExtent:ce,minZoom:ie,maxZoom:le,preventScrolling:ue,zoomOnScroll:he,zoomOnPinch:pe,zoomOnDoubleClick:be,panOnScroll:me,panOnScrollSpeed:ge,panOnScrollMode:ye,panOnDrag:ve,onPaneClick:we,onPaneMouseEnter:_e,onPaneMouseMove:xe,onPaneMouseLeave:Se,onPaneScroll:ke,onPaneContextMenu:Ee,onSelectionContextMenu:T,onSelectionStart:$,onSelectionEnd:D,onEdgeContextMenu:Ne,onEdgeDoubleClick:Me,onEdgeMouseEnter:Oe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ae,onReconnect:$e??Re,onReconnectStart:De??Pe,onReconnectEnd:Le??Te,reconnectRadius:ze??Be,defaultMarkerColor:fe,noDragClassName:Ue,noWheelClassName:He,noPanClassName:qe,elevateEdgesOnSelect:Qe,rfId:ut,disableKeyboardA11y:Ze,nodeOrigin:ne,nodeExtent:de}),r.createElement($o,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:m,onConnectStart:g,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:v,nodesDraggable:Z,nodesConnectable:ee,nodesFocusable:te,edgesFocusable:re,edgesUpdatable:oe,elementsSelectable:ae,elevateNodesOnSelect:Je,minZoom:ie,maxZoom:le,nodeExtent:de,onNodesChange:je,onEdgesChange:Fe,snapToGrid:Y,snapGrid:G,connectionMode:L,translateExtent:ce,connectOnClick:Xe,defaultEdgeOptions:Ge,fitView:We,fitViewOptions:Ve,onNodesDelete:M,onEdgesDelete:O,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:N,onSelectionDrag:R,onSelectionDragStart:A,onSelectionDragStop:P,noPanClassName:qe,nodeOrigin:ne,rfId:ut,autoPanOnConnect:et,autoPanOnNodeDrag:tt,onError:ot,connectionRadius:nt,isValidConnection:rt,nodeDragThreshold:it}),r.createElement(Ao,{onSelectionChange:I}),Ce,r.createElement(ar,{proOptions:Ye,position:Ke}),r.createElement(Uo,{rfId:ut,disableKeyboardA11y:Ze})))});function Ns(e){return t=>{const[n,o]=(0,r.useState)(t),a=(0,r.useCallback)(t=>o(n=>e(t,n)),[]);return[n,o,a]}}Cs.displayName="ReactFlow";const Ms=Ns(ma),Os=Ns(function(e,t){return pa(e,t)});var Is;function As({color:e,dimensions:t,lineWidth:n}){return r.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Rs({color:e,radius:t}){return r.createElement("circle",{cx:t,cy:t,r:t,fill:e})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Is||(Is={}));const Ps={[Is.Dots]:"#91919a",[Is.Lines]:"#eee",[Is.Cross]:"#e2e2e2"},Ts={[Is.Dots]:1,[Is.Lines]:1,[Is.Cross]:6},$s=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ds({id:e,variant:t=Is.Dots,gap:n=20,size:o,lineWidth:s=1,offset:i=2,color:l,style:c,className:u}){const d=(0,r.useRef)(null),{transform:f,patternId:p}=tr($s,h),m=l||Ps[t],g=o||Ts[t],y=t===Is.Dots,b=t===Is.Cross,v=Array.isArray(n)?n:[n,n],w=[v[0]*f[2]||1,v[1]*f[2]||1],_=g*f[2],x=b?[_,_]:w,S=y?[_/i,_/i]:[x[0]/i,x[1]/i];return r.createElement("svg",{className:a(["react-flow__background",u]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},r.createElement("pattern",{id:p+e,x:f[0]%w[0],y:f[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`},y?r.createElement(Rs,{color:m,radius:_/i}):r.createElement(As,{dimensions:x,color:m,lineWidth:s})),r.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}Ds.displayName="Background";var Ls=(0,r.memo)(Ds);function zs(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},r.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Bs(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},r.createElement("path",{d:"M0 0h32v4.2H0z"}))}function js(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},r.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Fs(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Us(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Hs=({children:e,className:t,...n})=>r.createElement("button",{type:"button",className:a(["react-flow__controls-button",t]),...n},e);Hs.displayName="ControlButton";const qs=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ws=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:d,children:f,position:p="bottom-left"})=>{const m=nr(),[g,y]=(0,r.useState)(!1),{isInteractive:b,minZoomReached:v,maxZoomReached:w}=tr(qs,h),{zoomIn:_,zoomOut:x,fitView:S}=na();return(0,r.useEffect)(()=>{y(!0)},[]),g?r.createElement(or,{className:a(["react-flow__controls",d]),position:p,style:e,"data-testid":"rf__controls"},t&&r.createElement(r.Fragment,null,r.createElement(Hs,{onClick:()=>{_(),i?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w},r.createElement(zs,null)),r.createElement(Hs,{onClick:()=>{x(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},r.createElement(Bs,null))),n&&r.createElement(Hs,{className:"react-flow__controls-fitview",onClick:()=>{S(s),c?.()},title:"fit view","aria-label":"fit view"},r.createElement(js,null)),o&&r.createElement(Hs,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),u?.(!b)},title:"toggle interactivity","aria-label":"toggle interactivity"},b?r.createElement(Us,null):r.createElement(Fs,null)),f):null};Ws.displayName="Controls";var Vs=(0,r.memo)(Ws),Xs=n(72),Ks=n.n(Xs),Ys=n(825),Gs=n.n(Ys),Js=n(659),Qs=n.n(Js),Zs=n(56),ei=n.n(Zs),ti=n(159),ni=n.n(ti),ri=n(113),oi=n.n(ri),ai=n(739),si={};si.styleTagTransform=oi(),si.setAttributes=ei(),si.insert=Qs().bind(null,"head"),si.domAPI=Gs(),si.insertStyleElement=ni(),Ks()(ai.A,si),ai.A&&ai.A.locals&&ai.A.locals;const ii=[{id:"start-block",name:"Start Block",icon:"",color:"#10b981",category:"Control Flow",modes:["Entry Point"],defaultMode:"Entry Point"},{id:"end-block",name:"End Block",icon:"",color:"#10b981",category:"Control Flow",modes:["Termination"],defaultMode:"Termination"},{id:"break-block",name:"Break Block",icon:"",color:"#10b981",category:"Control Flow",modes:["Exit Loop"],defaultMode:"Exit Loop"},{id:"return-block",name:"Return Block",icon:"",color:"#10b981",category:"Control Flow",modes:["Return Value"],defaultMode:"Return Value"},{id:"input-hub",name:"Input Hub",icon:"",color:"#3b82f6",category:"Input",modes:["Text","Number","File","Webcam","Microphone"],defaultMode:"Text"},{id:"data-loader",name:"Data Loader",icon:"",color:"#3b82f6",category:"Input",modes:["CSV","JSON","API","Webhook"],defaultMode:"JSON"},{id:"ai-processor",name:"AI Processor",icon:"",color:"#6366f1",category:"AI Processing",modes:["GPT","Image","Voice","Vision"],defaultMode:"GPT"},{id:"content-generator",name:"Content Generator",icon:"",color:"#6366f1",category:"AI Processing",modes:["Text","Image","Audio"],defaultMode:"Text"},{id:"data-analyzer",name:"Data Analyzer",icon:"",color:"#6366f1",category:"AI Processing",modes:["Analysis","Sentiment","Classification"],defaultMode:"Analysis"},{id:"logic-constructor",name:"Logic Constructor",icon:"",color:"#f59e0b",category:"Logic",modes:["If-Else","Switch","Conditions"],defaultMode:"If-Else"},{id:"loop-controller",name:"Loop Controller",icon:"",color:"#f59e0b",category:"Logic",modes:["For","While","Repeat"],defaultMode:"For"},{id:"state-manager",name:"State Manager",icon:"",color:"#f59e0b",category:"Logic",modes:["Variables","State","Context"],defaultMode:"Variables"},{id:"math-processor",name:"Math Processor",icon:"",color:"#8b5cf6",category:"Data",modes:["Arithmetic","Advanced","Statistics"],defaultMode:"Arithmetic"},{id:"text-transformer",name:"Text Transformer",icon:"",color:"#8b5cf6",category:"Data",modes:["Join","Split","Format","Parse"],defaultMode:"Format"},{id:"list-operations",name:"List Operations",icon:"",color:"#8b5cf6",category:"Data",modes:["Filter","Sort","Map","Reduce"],defaultMode:"Filter"},{id:"data-converter",name:"Data Converter",icon:"",color:"#8b5cf6",category:"Data",modes:["Type","Format","Encode","Decode"],defaultMode:"Type"},{id:"display-manager",name:"Display Manager",icon:"",color:"#14b8a6",category:"Output",modes:["Text","Image","Chart","Table"],defaultMode:"Text"},{id:"export-hub",name:"Export Hub",icon:"",color:"#14b8a6",category:"Output",modes:["File","Download","Share","Cloud"],defaultMode:"Download"},{id:"media-player",name:"Media Player",icon:"",color:"#14b8a6",category:"Output",modes:["Audio","Video","Image"],defaultMode:"Audio"},{id:"api-connector",name:"API Connector",icon:"",color:"#ec4899",category:"Integration",modes:["HTTP","Webhook","GraphQL","REST"],defaultMode:"HTTP"},{id:"storage-manager",name:"Storage Manager",icon:"",color:"#ec4899",category:"Integration",modes:["Local","Cloud","Database"],defaultMode:"Local"},{id:"notification-center",name:"Notification Center",icon:"",color:"#ec4899",category:"Integration",modes:["Email","Alert","Message","Push"],defaultMode:"Alert"},{id:"debug-tools",name:"Debug Tools",icon:"",color:"#64748b",category:"Utility",modes:["Log","Error","Performance","Trace"],defaultMode:"Log"},{id:"comment-sticky",name:"Comment Sticky",icon:"",color:"#fbbf24",category:"Utility",modes:["Note","Annotation","Label"],defaultMode:"Note"}],li=function({darkMode:e,isCollapsed:t,onToggle:n}){const[o,a]=(0,r.useState)("All"),s=["All",...new Set(ii.map(e=>e.category))],i="All"===o?ii:ii.filter(e=>e.category===o);return t?r.createElement("div",{className:"mega-palette collapsed "+(e?"dark":"")},r.createElement("button",{className:"palette-toggle",onClick:n},"")):r.createElement("div",{className:"mega-palette "+(e?"dark":"")},r.createElement("div",{className:"palette-header"},r.createElement("h3",null,"Blocks"),r.createElement("button",{className:"palette-toggle",onClick:n},"")),r.createElement("div",{className:"category-tabs"},s.map(e=>r.createElement("button",{key:e,className:"category-tab "+(o===e?"active":""),onClick:()=>a(e)},e))),r.createElement("div",{className:"blocks-grid"},i.map(e=>r.createElement("div",{key:e.id,className:"mega-block-card",draggable:!0,onDragStart:t=>((e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"})(t,e),style:{borderLeftColor:e.color}},r.createElement("div",{className:"mega-block-icon",style:{color:e.color}},e.icon),r.createElement("div",{className:"mega-block-info"},r.createElement("div",{className:"mega-block-name"},e.name),r.createElement("div",{className:"mega-block-modes"},e.modes.slice(0,2).join(", "),e.modes.length>2&&"..."))))))},ci=function({messages:e,darkMode:t,onSendMessage:n}){const[o,a]=(0,r.useState)(""),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[e]),r.createElement("div",{className:"chat-stage "+(t?"dark":"")},0===e.length?r.createElement("div",{className:"chat-empty"},r.createElement("div",{className:"chat-empty-icon"},""),r.createElement("h3",null,"Chat-First Interface"),r.createElement("p",null,"Type messages below or connect blocks to see results here")):r.createElement("div",{className:"chat-messages"},e.map((e,t)=>r.createElement("div",{key:t,className:"chat-message "+("input"===e.type?"user":"ai")},r.createElement("div",{className:"message-bubble"},r.createElement("div",{className:"message-header"},r.createElement("span",{className:"message-icon"},"input"===e.type?"":""),r.createElement("span",{className:"message-label"},"input"===e.type?"You":"Blokks"),e.blockName&&r.createElement("span",{className:"message-block-name"}," ",e.blockName)),r.createElement("div",{className:"message-content"},e.content),e.timestamp&&r.createElement("div",{className:"message-timestamp"},new Date(e.timestamp).toLocaleTimeString())))),r.createElement("div",{ref:s})),r.createElement("form",{className:"chat-input-bar",onSubmit:e=>{e.preventDefault(),o.trim()&&(n(o),a(""))}},r.createElement("input",{type:"text",className:"chat-input",placeholder:"Type your message here...",value:o,onChange:e=>a(e.target.value)}),r.createElement("button",{type:"submit",className:"chat-send-btn",disabled:!o.trim()},r.createElement("span",null,"Send"),r.createElement("span",{className:"send-icon"},""))))},ui=function({apiKeys:e,setApiKeys:t,onClose:n,darkMode:o}){const[a,s]=(0,r.useState)([{id:1,provider:e.openai?"OpenAI":"",key:e.openai||""}]),i=(e,t,n)=>{s(a.map(r=>r.id===e?{...r,[t]:n}:r))};return r.createElement("div",{className:"modal-overlay",onClick:n},r.createElement("div",{className:"modal-content "+(o?"dark":""),onClick:e=>e.stopPropagation()},r.createElement("div",{className:"modal-header"},r.createElement("h2",null," API Keys"),r.createElement("button",{className:"close-button",onClick:n},"")),r.createElement("div",{className:"modal-body"},a.map(e=>r.createElement("div",{key:e.id,className:"api-key-slot"},r.createElement("select",{className:"api-provider-select",value:e.provider,onChange:t=>i(e.id,"provider",t.target.value)},r.createElement("option",{value:""},"Select Provider"),r.createElement("option",{value:"OpenAI"},"OpenAI (GPT)"),r.createElement("option",{value:"Anthropic"},"Anthropic (Claude)"),r.createElement("option",{value:"Google"},"Google (Gemini)")),r.createElement("input",{type:"password",className:"api-key-input",value:e.key,onChange:t=>i(e.id,"key",t.target.value),placeholder:"Enter API key..."}),a.length>1&&r.createElement("button",{className:"remove-key-btn",onClick:()=>(e=>{s(a.filter(t=>t.id!==e))})(e.id)},""))),r.createElement("button",{className:"add-key-btn",onClick:()=>{s([...a,{id:Date.now(),provider:"",key:""}])}},"+ Add Another API Key")),r.createElement("div",{className:"modal-footer"},r.createElement("button",{className:"cancel-button",onClick:n},"Cancel"),r.createElement("button",{className:"save-button",onClick:()=>{const e={openai:"",anthropic:"",google:""};a.forEach(t=>{"OpenAI"===t.provider&&(e.openai=t.key),"Anthropic"===t.provider&&(e.anthropic=t.key),"Google"===t.provider&&(e.google=t.key)}),t(e),n()}},"Save"))))};function di(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function fi(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}let hi=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return hi=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};function pi(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const mi=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class gi extends Error{}class yi extends gi{constructor(e,t,n,r){super(`${yi.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=t;const o=t;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,t,n){const r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new vi({message:n,cause:mi(t)});const o=t?.error;return 400===e?new _i(e,o,n,r):401===e?new xi(e,o,n,r):403===e?new Si(e,o,n,r):404===e?new ki(e,o,n,r):409===e?new Ei(e,o,n,r):422===e?new Ci(e,o,n,r):429===e?new Ni(e,o,n,r):e>=500?new Mi(e,o,n,r):new yi(e,o,n,r)}}class bi extends yi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class vi extends yi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class wi extends vi{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _i extends yi{}class xi extends yi{}class Si extends yi{}class ki extends yi{}class Ei extends yi{}class Ci extends yi{}class Ni extends yi{}class Mi extends yi{}class Oi extends gi{constructor(){super("Could not parse response content as the length limit was reached")}}class Ii extends gi{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ai extends Error{constructor(e){super(e)}}const Ri=/^[a-z][a-z0-9+.-]*:/i;let Pi=e=>(Pi=Array.isArray,Pi(e)),Ti=Pi;function $i(e){return"object"!=typeof e?{}:e??{}}function Di(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}const Li=e=>new Promise(t=>setTimeout(t,e)),zi="6.9.0",Bi=()=>{const e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":Fi(Deno.build.os),"X-Stainless-Arch":ji(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":Fi(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ji(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},ji=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Fi=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Ui;function Hi(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function qi(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Hi({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){await(t.return?.())}})}function Wi(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Vi=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),Xi="RFC3986",Ki=e=>String(e),Yi={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:Ki};let Gi=(e,t)=>(Gi=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Gi(e,t));const Ji=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Qi=1024;function Zi(e,t){if(Pi(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const el={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},tl=function(e,t){Array.prototype.push.apply(e,Pi(t)?t:[t])};let nl;const rl={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,o)=>{if(0===e.length)return e;let a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let s="";for(let e=0;e<a.length;e+=Qi){const t=a.length>=Qi?a.slice(e,e+Qi):a,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===o&&(40===r||41===r)?n[n.length]=t.charAt(e):r<128?n[n.length]=Ji[r]:r<2048?n[n.length]=Ji[192|r>>6]+Ji[128|63&r]:r<55296||r>=57344?n[n.length]=Ji[224|r>>12]+Ji[128|r>>6&63]+Ji[128|63&r]:(e+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(e)),n[n.length]=Ji[240|r>>18]+Ji[128|r>>12&63]+Ji[128|r>>6&63]+Ji[128|63&r])}s+=n.join("")}return s},encodeValuesOnly:!1,format:Xi,formatter:Ki,indices:!1,serializeDate:e=>(nl??(nl=Function.prototype.call.bind(Date.prototype.toISOString)))(e),skipNulls:!1,strictNullHandling:!1},ol={};function al(e,t,n,r,o,a,s,i,l,c,u,d,f,h,p,m,g,y){let b=e,v=y,w=0,_=!1;for(;void 0!==(v=v.get(ol))&&!_;){const t=v.get(e);if(w+=1,void 0!==t){if(t===w)throw new RangeError("Cyclic object value");_=!0}void 0===v.get(ol)&&(w=0)}if("function"==typeof c?b=c(t,b):b instanceof Date?b=f?.(b):"comma"===n&&Pi(b)&&(b=Zi(b,function(e){return e instanceof Date?f?.(e):e})),null===b){if(a)return l&&!m?l(t,rl.encoder,g,"key",h):t;b=""}if("string"==typeof(x=b)||"number"==typeof x||"boolean"==typeof x||"symbol"==typeof x||"bigint"==typeof x||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(b)){if(l){const e=m?t:l(t,rl.encoder,g,"key",h);return[p?.(e)+"="+p?.(l(b,rl.encoder,g,"value",h))]}return[p?.(t)+"="+p?.(String(b))]}var x;const S=[];if(void 0===b)return S;let k;if("comma"===n&&Pi(b))m&&l&&(b=Zi(b,l)),k=[{value:b.length>0?b.join(",")||null:void 0}];else if(Pi(c))k=c;else{const e=Object.keys(b);k=u?e.sort(u):e}const E=i?String(t).replace(/\./g,"%2E"):String(t),C=r&&Pi(b)&&1===b.length?E+"[]":E;if(o&&Pi(b)&&0===b.length)return C+"[]";for(let t=0;t<k.length;++t){const v=k[t],_="object"==typeof v&&void 0!==v.value?v.value:b[v];if(s&&null===_)continue;const x=d&&i?v.replace(/\./g,"%2E"):v,E=Pi(b)?"function"==typeof n?n(C,x):C:C+(d?"."+x:"["+x+"]");y.set(e,w);const N=new WeakMap;N.set(ol,y),tl(S,al(_,E,n,r,o,a,s,i,"comma"===n&&m&&Pi(b)?null:l,c,u,d,f,h,p,m,g,N))}return S}let sl,il;function ll(e){let t;return(sl??(t=new globalThis.TextEncoder,sl=t.encode.bind(t)))(e)}function cl(e){let t;return(il??(t=new globalThis.TextDecoder,il=t.decode.bind(t)))(e)}var ul,dl;class fl{constructor(){ul.set(this,void 0),dl.set(this,void 0),di(this,ul,new Uint8Array,"f"),di(this,dl,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?ll(e):e;di(this,ul,function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}([fi(this,ul,"f"),t]),"f");const n=[];let r;for(;null!=(r=hl(fi(this,ul,"f"),fi(this,dl,"f")));){if(r.carriage&&null==fi(this,dl,"f")){di(this,dl,r.index,"f");continue}if(null!=fi(this,dl,"f")&&(r.index!==fi(this,dl,"f")+1||r.carriage)){n.push(cl(fi(this,ul,"f").subarray(0,fi(this,dl,"f")-1))),di(this,ul,fi(this,ul,"f").subarray(fi(this,dl,"f")),"f"),di(this,dl,null,"f");continue}const e=null!==fi(this,dl,"f")?r.preceding-1:r.preceding,t=cl(fi(this,ul,"f").subarray(0,e));n.push(t),di(this,ul,fi(this,ul,"f").subarray(r.index),"f"),di(this,dl,null,"f")}return n}flush(){return fi(this,ul,"f").length?this.decode("\n"):[]}}function hl(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function pl(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}ul=new WeakMap,dl=new WeakMap,fl.NEWLINE_CHARS=new Set(["\n","\r"]),fl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const ml={off:0,error:200,warn:300,info:400,debug:500},gl=(e,t,n)=>{var r,o;if(e)return r=ml,o=e,Object.prototype.hasOwnProperty.call(r,o)?e:void _l(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(ml))}`)};function yl(){}function bl(e,t,n){return!t||ml[e]>ml[n]?yl:t[e].bind(t)}const vl={error:yl,warn:yl,info:yl,debug:yl};let wl=new WeakMap;function _l(e){const t=e.logger,n=e.logLevel??"off";if(!t)return vl;const r=wl.get(t);if(r&&r[0]===n)return r[1];const o={error:bl("error",t,n),warn:bl("warn",t,n),info:bl("info",t,n),debug:bl("debug",t,n)};return wl.set(t,[n,o]),o}const xl=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Sl,kl,El;class Cl{constructor(e,t,n){this.iterator=e,Sl.set(this,void 0),this.controller=t,di(this,Sl,n,"f")}static fromSSEResponse(e,t,n){let r=!1;const o=n?_l(n):console;return new Cl(async function*(){if(r)throw new gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const r of async function*(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new gi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new gi("Attempted to iterate over a response with no body")}const n=new Nl,r=new fl,o=Wi(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?ll(n):n;let r,o=new Uint8Array(t.length+e.length);for(o.set(t),o.set(e,t.length),t=o;-1!==(r=pl(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(o))for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}(e,t))if(!n)if(r.data.startsWith("[DONE]"))n=!0;else if(null!==r.event&&r.event.startsWith("thread.")){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if("error"==r.event)throw new yi(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}else{let t;try{t=JSON.parse(r.data)}catch(e){throw o.error("Could not parse message into JSON:",r.data),o.error("From chunk:",r.raw),e}if(t&&t.error)throw new yi(void 0,t.error,void 0,e.headers);yield t}n=!0}catch(e){if(pi(e))return;throw e}finally{n||t.abort()}},t,n)}static fromReadableStream(e,t,n){let r=!1;return new Cl(async function*(){if(r)throw new gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const t of async function*(){const t=new fl,n=Wi(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())n||t&&(yield JSON.parse(t));n=!0}catch(e){if(pi(e))return;throw e}finally{n||t.abort()}},t,n)}[(Sl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Cl(()=>r(e),this.controller,fi(this,Sl,"f")),new Cl(()=>r(t),this.controller,fi(this,Sl,"f"))]}toReadableStream(){const e=this;let t;return Hi({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:r}=await t.next();if(r)return e.close();const o=ll(JSON.stringify(n)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class Nl{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function Ml(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:a}=t,s=await(async()=>{if(t.options.stream)return _l(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Cl.fromSSEResponse(n,t.controller,e);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const r=n.headers.get("content-type"),o=r?.split(";")[0]?.trim();return o?.includes("application/json")||o?.endsWith("+json")?Ol(await n.json(),n):await n.text()})();return _l(e).debug(`[${r}] response parsed`,xl({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}function Ol(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class Il extends Promise{constructor(e,t,n=Ml){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,kl.set(this,void 0),di(this,kl,e,"f")}_thenUnwrap(e){return new Il(fi(this,kl,"f"),this.responsePromise,async(t,n)=>Ol(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(fi(this,kl,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}kl=new WeakMap;class Al{constructor(e,t,n,r){El.set(this,void 0),di(this,El,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new gi("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await fi(this,El,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(El=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Rl extends Il{constructor(e,t,n){super(e,t,async(e,t)=>new n(e,t.response,await Ml(e,t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}class Pl extends Al{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Tl extends Al{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...$i(this.options.query),after:t}}:null}}class $l extends Al{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...$i(this.options.query),after:e}}:null}}const Dl=()=>{if("undefined"==typeof File){const{process:e}=globalThis,t="string"==typeof e?.versions?.node&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ll(e,t,n){return Dl(),new File(e,t??"unknown_file",n)}function zl(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Bl=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],jl=async(e,t)=>Wl(e.body)?{...e,body:await Hl(e.body,t)}:e,Fl=async(e,t)=>({...e,body:await Hl(e.body,t)}),Ul=new WeakMap,Hl=async(e,t)=>{if(!await function(e){const t="function"==typeof e?e:e.fetch,n=Ul.get(t);if(n)return n;const r=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,n=new FormData;return n.toString()!==await new e(n).text()}catch{return!0}})();return Ul.set(t,r),r}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>Vl(n,e,t))),n},ql=e=>e instanceof Blob&&"name"in e,Wl=e=>{if((e=>"object"==typeof e&&null!==e&&(e instanceof Response||Bl(e)||ql(e)))(e))return!0;if(Array.isArray(e))return e.some(Wl);if(e&&"object"==typeof e)for(const t in e)if(Wl(e[t]))return!0;return!1},Vl=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if(n instanceof Response)e.append(t,Ll([await n.blob()],zl(n)));else if(Bl(n))e.append(t,Ll([await new Response(qi(n)).blob()],zl(n)));else if(ql(n))e.append(t,n,zl(n));else if(Array.isArray(n))await Promise.all(n.map(n=>Vl(e,t+"[]",n)));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(([n,r])=>Vl(e,`${t}[${n}]`,r)))}}},Xl=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function Kl(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Xl(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!Bl(e)){const t=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}for await(const n of e)t.push(...await Kl(n))}return t}class Yl{constructor(e){this._client=e}}function Gl(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Jl=Object.freeze(Object.create(null)),Ql=(e=Gl)=>function(t,...n){if(1===t.length)return t[0];let r=!1;const o=[],a=t.reduce((t,a,s)=>{/[?#]/.test(a)&&(r=!0);const i=n[s];let l=(r?encodeURIComponent:e)(""+i);return s!==n.length&&(null==i||"object"==typeof i&&i.toString===Object.getPrototypeOf(Object.getPrototypeOf(i.hasOwnProperty??Jl)??Jl)?.toString)&&(l=i+"",o.push({start:t.length+a.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(i).slice(8,-1)} is not a valid path parameter`})),t+a+(s===n.length?"":l)},""),s=a.split(/[?#]/,1)[0],i=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let l;for(;null!==(l=i.exec(s));)o.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(o.sort((e,t)=>e.start-t.start),o.length>0){let e=0;const t=o.reduce((t,n)=>{const r=" ".repeat(n.start-e),o="^".repeat(n.length);return e=n.start+n.length,t+r+o},"");throw new gi(`Path parameters result in path with invalid segments:\n${o.map(e=>e.error).join("\n")}\n${a}\n${t}`)}return a},Zl=Ql(Gl);class ec extends Yl{list(e,t={},n){return this._client.getAPIList(Zl`/chat/completions/${e}/messages`,Tl,{query:t,...n})}}function tc(e){return void 0!==e&&"function"in e&&void 0!==e.function}function nc(e){return"auto-parseable-response-format"===e?.$brand}function rc(e){return"auto-parseable-tool"===e?.$brand}function oc(e,t){const n=e.choices.map(e=>{if("length"===e.finish_reason)throw new Oi;if("content_filter"===e.finish_reason)throw new Ii;return lc(e.message.tool_calls),{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const n=e.tools?.find(e=>tc(e)&&e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:rc(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?ac(t,e.message.content):null}}});return{...e,choices:n}}function ac(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function sc(e,t){if(!e||!("tools"in e)||!e.tools)return!1;const n=e.tools?.find(e=>tc(e)&&e.function?.name===t.function.name);return tc(n)&&(rc(n)||n?.function.strict||!1)}function ic(e){return!!nc(e.response_format)||(e.tools?.some(e=>rc(e)||"function"===e.type&&!0===e.function.strict)??!1)}function lc(e){for(const t of e||[])if("function"!==t.type)throw new gi(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}const cc=e=>"assistant"===e?.role,uc=e=>"tool"===e?.role;var dc,fc,hc,pc,mc,gc,yc,bc,vc,wc,_c,xc,Sc,kc,Ec,Cc,Nc,Mc,Oc,Ic,Ac;class Rc{constructor(){dc.add(this),this.controller=new AbortController,fc.set(this,void 0),hc.set(this,()=>{}),pc.set(this,()=>{}),mc.set(this,void 0),gc.set(this,()=>{}),yc.set(this,()=>{}),bc.set(this,{}),vc.set(this,!1),wc.set(this,!1),_c.set(this,!1),xc.set(this,!1),di(this,fc,new Promise((e,t)=>{di(this,hc,e,"f"),di(this,pc,t,"f")}),"f"),di(this,mc,new Promise((e,t)=>{di(this,gc,e,"f"),di(this,yc,t,"f")}),"f"),fi(this,fc,"f").catch(()=>{}),fi(this,mc,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},fi(this,dc,"m",Sc).bind(this))},0)}_connected(){this.ended||(fi(this,hc,"f").call(this),this._emit("connect"))}get ended(){return fi(this,vc,"f")}get errored(){return fi(this,wc,"f")}get aborted(){return fi(this,_c,"f")}abort(){this.controller.abort()}on(e,t){return(fi(this,bc,"f")[e]||(fi(this,bc,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=fi(this,bc,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(fi(this,bc,"f")[e]||(fi(this,bc,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{di(this,xc,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){di(this,xc,!0,"f"),await fi(this,mc,"f")}_emit(e,...t){if(fi(this,vc,"f"))return;"end"===e&&(di(this,vc,!0,"f"),fi(this,gc,"f").call(this));const n=fi(this,bc,"f")[e];if(n&&(fi(this,bc,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return fi(this,xc,"f")||n?.length||Promise.reject(e),fi(this,pc,"f").call(this,e),fi(this,yc,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];fi(this,xc,"f")||n?.length||Promise.reject(e),fi(this,pc,"f").call(this,e),fi(this,yc,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function Pc(e){return"function"==typeof e.parse}fc=new WeakMap,hc=new WeakMap,pc=new WeakMap,mc=new WeakMap,gc=new WeakMap,yc=new WeakMap,bc=new WeakMap,vc=new WeakMap,wc=new WeakMap,_c=new WeakMap,xc=new WeakMap,dc=new WeakSet,Sc=function(e){if(di(this,wc,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new bi),e instanceof bi)return di(this,_c,!0,"f"),this._emit("abort",e);if(e instanceof gi)return this._emit("error",e);if(e instanceof Error){const t=new gi(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new gi(String(e)))};const Tc=10;class $c extends Rc{constructor(){super(...arguments),kc.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),uc(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(cc(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionToolCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new gi("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),fi(this,kc,"m",Ec).call(this)}async finalMessage(){return await this.done(),fi(this,kc,"m",Cc).call(this)}async finalFunctionToolCall(){return await this.done(),fi(this,kc,"m",Nc).call(this)}async finalFunctionToolCallResult(){return await this.done(),fi(this,kc,"m",Mc).call(this)}async totalUsage(){return await this.done(),fi(this,kc,"m",Oc).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=fi(this,kc,"m",Cc).call(this);t&&this._emit("finalMessage",t);const n=fi(this,kc,"m",Ec).call(this);n&&this._emit("finalContent",n);const r=fi(this,kc,"m",Nc).call(this);r&&this._emit("finalFunctionToolCall",r);const o=fi(this,kc,"m",Mc).call(this);null!=o&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",fi(this,kc,"m",Oc).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),fi(this,kc,"m",Ic).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(oc(o,t))}async _runChatCompletion(e,t,n){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runTools(e,t,n){const r="tool",{tool_choice:o="auto",stream:a,...s}=t,i="string"!=typeof o&&"function"===o.type&&o?.function?.name,{maxChatCompletions:l=Tc}=n||{},c=t.tools.map(e=>{if(rc(e)){if(!e.$callback)throw new gi("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(const e of c)"function"===e.type&&(u[e.function.name||e.function.function.name]=e.function);const d="tools"in t?c.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...s,tool_choice:o,tools:d,messages:[...this.messages]},n),a=t.choices[0]?.message;if(!a)throw new gi("missing message in ChatCompletion response");if(!a.tool_calls?.length)return;for(const e of a.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:o}=e.function,a=u[n];if(!a){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(i&&i!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let s;try{s=Pc(a)?await a.parse(o):o}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}const l=await a.function(s,this),c=fi(this,kc,"m",Ac).call(this,l);if(this._addMessage({role:r,tool_call_id:t,content:c}),i)return}}}}kc=new WeakSet,Ec=function(){return fi(this,kc,"m",Cc).call(this).content??null},Cc=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(cc(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new gi("stream ended without producing a ChatCompletionMessage with role=assistant")},Nc=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(cc(t)&&t?.tool_calls?.length)return t.tool_calls.filter(e=>"function"===e.type).at(-1)?.function}},Mc=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(uc(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},Oc=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Ic=function(e){if(null!=e.n&&e.n>1)throw new gi("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ac=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class Dc extends $c{static runTools(e,t,n){const r=new Dc,o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}_addMessage(e,t=!0){super._addMessage(e,t),cc(e)&&e.content&&this._emit("content",e.content)}}class Lc extends Error{}class zc extends Error{}const Bc=e=>function(e,t=511){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return((e,t)=>{const n=e.length;let r=0;const o=e=>{throw new Lc(`${e} at position ${r}`)},a=e=>{throw new zc(`${e} at position ${r}`)},s=()=>(d(),r>=n&&o("Unexpected end of input"),'"'===e[r]?i():"{"===e[r]?l():"["===e[r]?c():"null"===e.substring(r,r+4)||16&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||32&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||32&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||128&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||256&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||64&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),i=()=>{const s=r;let i=!1;for(r++;r<n&&('"'!==e[r]||i&&"\\"===e[r-1]);)i="\\"===e[r]&&!i,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(s,++r-Number(i)))}catch(e){a(String(e))}else if(1&t)try{return JSON.parse(e.substring(s,r-Number(i))+'"')}catch(t){return JSON.parse(e.substring(s,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},l=()=>{r++,d();const a={};try{for(;"}"!==e[r];){if(d(),r>=n&&8&t)return a;const o=i();d(),r++;try{const e=s();Object.defineProperty(a,o,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(8&t)return a;throw e}d(),","===e[r]&&r++}}catch(e){if(8&t)return a;o("Expected '}' at end of object")}return r++,a},c=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(s()),d(),","===e[r]&&r++}catch(e){if(4&t)return n;o("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&2&t&&o("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(2&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}a(String(n))}}const s=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||2&t||o("Unterminated number literal");try{return JSON.parse(e.substring(s,r))}catch(n){"-"===e.substring(s,r)&&2&t&&o("Not sure what '-' is");try{return JSON.parse(e.substring(s,e.lastIndexOf("e")))}catch(e){a(String(e))}}},d=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return s()})(e.trim(),t)}(e,509);var jc,Fc,Uc,Hc,qc,Wc,Vc,Xc,Kc,Yc,Gc,Jc;class Qc extends $c{constructor(e){super(),jc.add(this),Fc.set(this,void 0),Uc.set(this,void 0),Hc.set(this,void 0),di(this,Fc,e,"f"),di(this,Uc,[],"f")}get currentChatCompletionSnapshot(){return fi(this,Hc,"f")}static fromReadableStream(e){const t=new Qc(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new Qc(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),fi(this,jc,"m",qc).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const e of o)fi(this,jc,"m",Vc).call(this,e);if(o.controller.signal?.aborted)throw new bi;return this._addChatCompletion(fi(this,jc,"m",Yc).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),fi(this,jc,"m",qc).call(this),this._connected();const r=Cl.fromReadableStream(e,this.controller);let o;for await(const e of r)o&&o!==e.id&&this._addChatCompletion(fi(this,jc,"m",Yc).call(this)),fi(this,jc,"m",Vc).call(this,e),o=e.id;if(r.controller.signal?.aborted)throw new bi;return this._addChatCompletion(fi(this,jc,"m",Yc).call(this))}[(Fc=new WeakMap,Uc=new WeakMap,Hc=new WeakMap,jc=new WeakSet,qc=function(){this.ended||di(this,Hc,void 0,"f")},Wc=function(e){let t=fi(this,Uc,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},fi(this,Uc,"f")[e.index]=t,t)},Vc=function(e){if(this.ended)return;const t=fi(this,jc,"m",Jc).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=fi(this,jc,"m",Wc).call(this,e);e.finish_reason&&(fi(this,jc,"m",Kc).call(this,e),null!=r.current_tool_call_index&&fi(this,jc,"m",Xc).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(fi(this,jc,"m",Kc).call(this,e),null!=r.current_tool_call_index&&fi(this,jc,"m",Xc).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):tu())}}},Xc=function(e,t){if(fi(this,jc,"m",Wc).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=fi(this,Fc,"f")?.tools?.find(e=>tc(e)&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:rc(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},Kc=function(e){const t=fi(this,jc,"m",Wc).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=fi(this,jc,"m",Gc).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},Yc=function(){if(this.ended)throw new gi("stream has ended, this shouldn't happen");const e=fi(this,Hc,"f");if(!e)throw new gi("request ended without sending any chunks");return di(this,Hc,void 0,"f"),di(this,Uc,[],"f"),function(e,t){const{id:n,choices:r,created:o,model:a,system_fingerprint:s,...i}=e,l={...i,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:o,...a})=>{if(!n)throw new gi(`missing finish_reason for choice ${r}`);const{content:s=null,function_call:i,tool_calls:l,...c}=t,u=t.role;if(!u)throw new gi(`missing role for choice ${r}`);if(i){const{arguments:e,name:l}=i;if(null==e)throw new gi(`missing function_call.arguments for choice ${r}`);if(!l)throw new gi(`missing function_call.name for choice ${r}`);return{...a,message:{content:s,function_call:{arguments:e,name:l},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:o}}return l?{...a,index:r,finish_reason:n,logprobs:o,message:{...c,role:u,content:s,refusal:t.refusal??null,tool_calls:l.map((t,n)=>{const{function:o,type:a,id:s,...i}=t,{arguments:l,name:c,...u}=o||{};if(null==s)throw new gi(`missing choices[${r}].tool_calls[${n}].id\n${Zc(e)}`);if(null==a)throw new gi(`missing choices[${r}].tool_calls[${n}].type\n${Zc(e)}`);if(null==c)throw new gi(`missing choices[${r}].tool_calls[${n}].function.name\n${Zc(e)}`);if(null==l)throw new gi(`missing choices[${r}].tool_calls[${n}].function.arguments\n${Zc(e)}`);return{...i,id:s,type:a,function:{...u,name:c,arguments:l}}})}}:{...a,message:{...c,content:s,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:o}}),created:o,model:a,object:"chat.completion",...s?{system_fingerprint:s}:{}};return function(e,t){return t&&ic(t)?oc(e,t):{...e,choices:e.choices.map(e=>(lc(e.message.tool_calls),{...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(l,t)}(e,fi(this,Fc,"f"))},Gc=function(){const e=fi(this,Fc,"f")?.response_format;return nc(e)?e:null},Jc=function(e){var t,n,r,o;let a=fi(this,Hc,"f");const{choices:s,...i}=e;a?Object.assign(a,i):a=di(this,Hc,{...i,choices:[]},"f");for(const{delta:s,finish_reason:i,index:l,logprobs:c=null,...u}of e.choices){let e=a.choices[l];if(e||(e=a.choices[l]={finish_reason:i,index:l,message:{},logprobs:c,...u}),c)if(e.logprobs){const{content:r,refusal:o,...a}=c;eu(),Object.assign(e.logprobs,a),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),o&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...o))}else e.logprobs=Object.assign({},c);if(i&&(e.finish_reason=i,fi(this,Fc,"f")&&ic(fi(this,Fc,"f")))){if("length"===i)throw new Oi;if("content_filter"===i)throw new Ii}if(Object.assign(e,u),!s)continue;const{content:d,refusal:f,function_call:h,role:p,tool_calls:m,...g}=s;if(eu(),Object.assign(e.message,g),f&&(e.message.refusal=(e.message.refusal||"")+f),p&&(e.message.role=p),h&&(e.message.function_call?(h.name&&(e.message.function_call.name=h.name),h.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=h.arguments)):e.message.function_call=h),d&&(e.message.content=(e.message.content||"")+d,!e.message.refusal&&fi(this,jc,"m",Gc).call(this)&&(e.message.parsed=Bc(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:a,...s}of m){const i=(o=e.message.tool_calls)[t]??(o[t]={});Object.assign(i,s),n&&(i.id=n),r&&(i.type=r),a&&(i.function??(i.function={name:a.name??"",arguments:""})),a?.name&&(i.function.name=a.name),a?.arguments&&(i.function.arguments+=a.arguments,sc(fi(this,Fc,"f"),i)&&(i.function.parsed_arguments=Bc(i.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Cl(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Zc(e){return JSON.stringify(e)}function eu(e){}function tu(e){}class nu extends Qc{static fromReadableStream(e){const t=new nu(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,n){const r=new nu(t),o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}}class ru extends Yl{constructor(){super(...arguments),this.messages=new ec(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(Zl`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(Zl`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/chat/completions",Tl,{query:e,...t})}delete(e,t){return this._client.delete(Zl`/chat/completions/${e}`,t)}parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new gi(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new gi(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(t=>oc(t,e))}runTools(e,t){return e.stream?nu.runTools(this._client,e,t):Dc.runTools(this._client,e,t)}stream(e,t){return Qc.createChatCompletion(this._client,e,t)}}ru.Messages=ec;class ou extends Yl{constructor(){super(...arguments),this.completions=new ru(this._client)}}ou.Completions=ru;const au=Symbol("brand.privateNullableHeaders");function*su(e){if(!e)return;if(au in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():Ti(e)?t=e:(n=!0,t=Object.entries(e??{}));for(let e of t){const t=e[0];if("string"!=typeof t)throw new TypeError("expected header name to be a string");const r=Ti(e[1])?e[1]:[e[1]];let o=!1;for(const e of r)void 0!==e&&(n&&!o&&(o=!0,yield[t,null]),yield[t,e])}}const iu=e=>{const t=new Headers,n=new Set;for(const r of e){const e=new Set;for(const[o,a]of su(r)){const r=o.toLowerCase();e.has(r)||(t.delete(o),e.add(r)),null===a?(t.delete(o),n.add(r)):(t.append(o,a),n.delete(r))}}return{[au]:!0,values:t,nulls:n}};class lu extends Yl{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:iu([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}class cu extends Yl{create(e,t){return this._client.post("/audio/transcriptions",Fl({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class uu extends Yl{create(e,t){return this._client.post("/audio/translations",Fl({body:e,...t,__metadata:{model:e.model}},this._client))}}class du extends Yl{constructor(){super(...arguments),this.transcriptions=new cu(this._client),this.translations=new uu(this._client),this.speech=new lu(this._client)}}du.Transcriptions=cu,du.Translations=uu,du.Speech=lu;class fu extends Yl{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(Zl`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",Tl,{query:e,...t})}cancel(e,t){return this._client.post(Zl`/batches/${e}/cancel`,t)}}class hu extends Yl{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(Zl`/assistants/${e}`,{...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(Zl`/assistants/${e}`,{body:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",Tl,{query:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(Zl`/assistants/${e}`,{...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class pu extends Yl{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class mu extends Yl{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class gu extends Yl{constructor(){super(...arguments),this.sessions=new pu(this._client),this.transcriptionSessions=new mu(this._client)}}gu.Sessions=pu,gu.TranscriptionSessions=mu;class yu extends Yl{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:iu([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}cancel(e,t){return this._client.post(Zl`/chatkit/sessions/${e}/cancel`,{...t,headers:iu([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}}class bu extends Yl{retrieve(e,t){return this._client.get(Zl`/chatkit/threads/${e}`,{...t,headers:iu([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",$l,{query:e,...t,headers:iu([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}delete(e,t){return this._client.delete(Zl`/chatkit/threads/${e}`,{...t,headers:iu([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}listItems(e,t={},n){return this._client.getAPIList(Zl`/chatkit/threads/${e}/items`,$l,{query:t,...n,headers:iu([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}class vu extends Yl{constructor(){super(...arguments),this.sessions=new yu(this._client),this.threads=new bu(this._client)}}vu.Sessions=yu,vu.Threads=bu;class wu extends Yl{create(e,t,n){return this._client.post(Zl`/threads/${e}/messages`,{body:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){const{thread_id:r}=t;return this._client.get(Zl`/threads/${r}/messages/${e}`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){const{thread_id:r,...o}=t;return this._client.post(Zl`/threads/${r}/messages/${e}`,{body:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(Zl`/threads/${e}/messages`,Tl,{query:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){const{thread_id:r}=t;return this._client.delete(Zl`/threads/${r}/messages/${e}`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class _u extends Yl{retrieve(e,t,n){const{thread_id:r,run_id:o,...a}=t;return this._client.get(Zl`/threads/${r}/runs/${o}/steps/${e}`,{query:a,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t,n){const{thread_id:r,...o}=t;return this._client.getAPIList(Zl`/threads/${r}/runs/${e}/steps`,Tl,{query:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}const xu=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;var Su,ku,Eu,Cu,Nu,Mu,Ou,Iu,Au,Ru,Pu,Tu,$u,Du,Lu,zu,Bu,ju,Fu,Uu,Hu,qu,Wu,Vu,Xu,Ku,Yu,Gu,Ju,Qu,Zu,ed,td,nd,rd,od,ad,sd;class id extends Rc{constructor(){super(...arguments),Su.add(this),Eu.set(this,[]),Cu.set(this,{}),Nu.set(this,{}),Mu.set(this,void 0),Ou.set(this,void 0),Iu.set(this,void 0),Au.set(this,void 0),Ru.set(this,void 0),Pu.set(this,void 0),Tu.set(this,void 0),$u.set(this,void 0),Du.set(this,void 0)}[(Eu=new WeakMap,Cu=new WeakMap,Nu=new WeakMap,Mu=new WeakMap,Ou=new WeakMap,Iu=new WeakMap,Au=new WeakMap,Ru=new WeakMap,Pu=new WeakMap,Tu=new WeakMap,$u=new WeakMap,Du=new WeakMap,Su=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ku;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Cl.fromReadableStream(e,this.controller);for await(const e of r)fi(this,Su,"m",Lu).call(this,e);if(r.controller.signal?.aborted)throw new bi;return this._addRun(fi(this,Su,"m",zu).call(this))}toReadableStream(){return new Cl(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r){const o=new ku;return o._run(()=>o._runToolAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},s=await e.submitToolOutputs(t,a,{...r,signal:this.controller.signal});this._connected();for await(const e of s)fi(this,Su,"m",Lu).call(this,e);if(s.controller.signal?.aborted)throw new bi;return this._addRun(fi(this,Su,"m",zu).call(this))}static createThreadAssistantStream(e,t,n){const r=new ku;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const o=new ku;return o._run(()=>o._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return fi(this,Tu,"f")}currentRun(){return fi(this,$u,"f")}currentMessageSnapshot(){return fi(this,Mu,"f")}currentRunStepSnapshot(){return fi(this,Du,"f")}async finalRunSteps(){return await this.done(),Object.values(fi(this,Cu,"f"))}async finalMessages(){return await this.done(),Object.values(fi(this,Nu,"f"))}async finalRun(){if(await this.done(),!fi(this,Ou,"f"))throw Error("Final run was not received.");return fi(this,Ou,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},a=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(const e of a)fi(this,Su,"m",Lu).call(this,e);if(a.controller.signal?.aborted)throw new bi;return this._addRun(fi(this,Su,"m",zu).call(this))}async _createAssistantStream(e,t,n,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},s=await e.create(t,a,{...r,signal:this.controller.signal});this._connected();for await(const e of s)fi(this,Su,"m",Lu).call(this,e);if(s.controller.signal?.aborted)throw new bi;return this._addRun(fi(this,Su,"m",zu).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else{if(!Di(t)||!Di(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...r);continue}for(const e of r){if(!Di(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r){return await this._createToolAssistantStream(t,e,n,r)}}ku=id,Lu=function(e){if(!this.ended)switch(di(this,Tu,e,"f"),fi(this,Su,"m",Fu).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":fi(this,Su,"m",Wu).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":fi(this,Su,"m",ju).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":fi(this,Su,"m",Bu).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},zu=function(){if(this.ended)throw new gi("stream has ended, this shouldn't happen");if(!fi(this,Ou,"f"))throw Error("Final run has not been received");return fi(this,Ou,"f")},Bu=function(e){const[t,n]=fi(this,Su,"m",Hu).call(this,e,fi(this,Mu,"f"));di(this,Mu,t,"f"),fi(this,Nu,"f")[t.id]=t;for(const e of n){const n=t.content[e.index];"text"==n?.type&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=fi(this,Iu,"f")){if(fi(this,Au,"f"))switch(fi(this,Au,"f").type){case"text":this._emit("textDone",fi(this,Au,"f").text,fi(this,Mu,"f"));break;case"image_file":this._emit("imageFileDone",fi(this,Au,"f").image_file,fi(this,Mu,"f"))}di(this,Iu,n.index,"f")}di(this,Au,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==fi(this,Iu,"f")){const t=e.data.content[fi(this,Iu,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,fi(this,Mu,"f"));break;case"text":this._emit("textDone",t.text,fi(this,Mu,"f"))}}fi(this,Mu,"f")&&this._emit("messageDone",e.data),di(this,Mu,void 0,"f")}},ju=function(e){const t=fi(this,Su,"m",Uu).call(this,e);switch(di(this,Du,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==fi(this,Ru,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(fi(this,Pu,"f")&&this._emit("toolCallDone",fi(this,Pu,"f")),di(this,Ru,e.index,"f"),di(this,Pu,t.step_details.tool_calls[e.index],"f"),fi(this,Pu,"f")&&this._emit("toolCallCreated",fi(this,Pu,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":di(this,Du,void 0,"f"),"tool_calls"==e.data.step_details.type&&fi(this,Pu,"f")&&(this._emit("toolCallDone",fi(this,Pu,"f")),di(this,Pu,void 0,"f")),this._emit("runStepDone",e.data,t)}},Fu=function(e){fi(this,Eu,"f").push(e),this._emit("event",e)},Uu=function(e){switch(e.event){case"thread.run.step.created":return fi(this,Cu,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=fi(this,Cu,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=ku.accumulateDelta(t,n.delta);fi(this,Cu,"f")[e.data.id]=r}return fi(this,Cu,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":fi(this,Cu,"f")[e.data.id]=e.data}if(fi(this,Cu,"f")[e.data.id])return fi(this,Cu,"f")[e.data.id];throw new Error("No snapshot available")},Hu=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=fi(this,Su,"m",qu).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},qu=function(e,t){return ku.accumulateDelta(t,e)},Wu=function(e){switch(di(this,$u,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":di(this,Ou,e.data,"f"),fi(this,Pu,"f")&&(this._emit("toolCallDone",fi(this,Pu,"f")),di(this,Pu,void 0,"f"))}};class ld extends Yl{constructor(){super(...arguments),this.steps=new _u(this._client)}create(e,t,n){const{include:r,...o}=t;return this._client.post(Zl`/threads/${e}/runs`,{query:{include:r},body:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}retrieve(e,t,n){const{thread_id:r}=t;return this._client.get(Zl`/threads/${r}/runs/${e}`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){const{thread_id:r,...o}=t;return this._client.post(Zl`/threads/${r}/runs/${e}`,{body:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(Zl`/threads/${e}/runs`,Tl,{query:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){const{thread_id:r}=t;return this._client.post(Zl`/threads/${r}/runs/${e}/cancel`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(r.id,{thread_id:e},n)}createAndStream(e,t,n){return id.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r=iu([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=a.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Li(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,n){return id.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n){const{thread_id:r,...o}=t;return this._client.post(Zl`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,n){const r=await this.submitToolOutputs(e,t,n);return await this.poll(r.id,t,n)}submitToolOutputsStream(e,t,n){return id.createToolAssistantStream(e,this._client.beta.threads.runs,t,n)}}ld.Steps=_u;class cd extends Yl{constructor(){super(...arguments),this.runs=new ld(this._client),this.messages=new wu(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(Zl`/threads/${e}`,{...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(Zl`/threads/${e}`,{body:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t){return this._client.delete(Zl`/threads/${e}`,{...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.id,{thread_id:n.thread_id},t)}createAndRunStream(e,t){return id.createThreadAssistantStream(e,this._client.beta.threads,t)}}cd.Runs=ld,cd.Messages=wu;class ud extends Yl{constructor(){super(...arguments),this.realtime=new gu(this._client),this.chatkit=new vu(this._client),this.assistants=new hu(this._client),this.threads=new cd(this._client)}}ud.Realtime=gu,ud.ChatKit=vu,ud.Assistants=hu,ud.Threads=cd;class dd extends Yl{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class fd extends Yl{retrieve(e,t,n){const{container_id:r}=t;return this._client.get(Zl`/containers/${r}/files/${e}/content`,{...n,headers:iu([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}}class hd extends Yl{constructor(){super(...arguments),this.content=new fd(this._client)}create(e,t,n){return this._client.post(Zl`/containers/${e}/files`,Fl({body:t,...n},this._client))}retrieve(e,t,n){const{container_id:r}=t;return this._client.get(Zl`/containers/${r}/files/${e}`,n)}list(e,t={},n){return this._client.getAPIList(Zl`/containers/${e}/files`,Tl,{query:t,...n})}delete(e,t,n){const{container_id:r}=t;return this._client.delete(Zl`/containers/${r}/files/${e}`,{...n,headers:iu([{Accept:"*/*"},n?.headers])})}}hd.Content=fd;class pd extends Yl{constructor(){super(...arguments),this.files=new hd(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(Zl`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",Tl,{query:e,...t})}delete(e,t){return this._client.delete(Zl`/containers/${e}`,{...t,headers:iu([{Accept:"*/*"},t?.headers])})}}pd.Files=hd;class md extends Yl{create(e,t,n){const{include:r,...o}=t;return this._client.post(Zl`/conversations/${e}/items`,{query:{include:r},body:o,...n})}retrieve(e,t,n){const{conversation_id:r,...o}=t;return this._client.get(Zl`/conversations/${r}/items/${e}`,{query:o,...n})}list(e,t={},n){return this._client.getAPIList(Zl`/conversations/${e}/items`,$l,{query:t,...n})}delete(e,t,n){const{conversation_id:r}=t;return this._client.delete(Zl`/conversations/${r}/items/${e}`,n)}}class gd extends Yl{constructor(){super(...arguments),this.items=new md(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(Zl`/conversations/${e}`,t)}update(e,t,n){return this._client.post(Zl`/conversations/${e}`,{body:t,...n})}delete(e,t){return this._client.delete(Zl`/conversations/${e}`,t)}}gd.Items=md;class yd extends Yl{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&_l(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?o:(_l(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}})(t)}),e)))}}class bd extends Yl{retrieve(e,t,n){const{eval_id:r,run_id:o}=t;return this._client.get(Zl`/evals/${r}/runs/${o}/output_items/${e}`,n)}list(e,t,n){const{eval_id:r,...o}=t;return this._client.getAPIList(Zl`/evals/${r}/runs/${e}/output_items`,Tl,{query:o,...n})}}class vd extends Yl{constructor(){super(...arguments),this.outputItems=new bd(this._client)}create(e,t,n){return this._client.post(Zl`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){const{eval_id:r}=t;return this._client.get(Zl`/evals/${r}/runs/${e}`,n)}list(e,t={},n){return this._client.getAPIList(Zl`/evals/${e}/runs`,Tl,{query:t,...n})}delete(e,t,n){const{eval_id:r}=t;return this._client.delete(Zl`/evals/${r}/runs/${e}`,n)}cancel(e,t,n){const{eval_id:r}=t;return this._client.post(Zl`/evals/${r}/runs/${e}`,n)}}vd.OutputItems=bd;class wd extends Yl{constructor(){super(...arguments),this.runs=new vd(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(Zl`/evals/${e}`,t)}update(e,t,n){return this._client.post(Zl`/evals/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/evals",Tl,{query:e,...t})}delete(e,t){return this._client.delete(Zl`/evals/${e}`,t)}}wd.Runs=vd;class _d extends Yl{create(e,t){return this._client.post("/files",Fl({body:e,...t},this._client))}retrieve(e,t){return this._client.get(Zl`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",Tl,{query:e,...t})}delete(e,t){return this._client.delete(Zl`/files/${e}`,t)}content(e,t){return this._client.get(Zl`/files/${e}/content`,{...t,headers:iu([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),o=Date.now();let a=await this.retrieve(e);for(;!a.status||!r.has(a.status);)if(await Li(t),a=await this.retrieve(e),Date.now()-o>n)throw new wi({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}}class xd extends Yl{}class Sd extends Yl{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class kd extends Yl{constructor(){super(...arguments),this.graders=new Sd(this._client)}}kd.Graders=Sd;class Ed extends Yl{create(e,t,n){return this._client.getAPIList(Zl`/fine_tuning/checkpoints/${e}/permissions`,Pl,{body:t,method:"post",...n})}retrieve(e,t={},n){return this._client.get(Zl`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}delete(e,t,n){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(Zl`/fine_tuning/checkpoints/${r}/permissions/${e}`,n)}}class Cd extends Yl{constructor(){super(...arguments),this.permissions=new Ed(this._client)}}Cd.Permissions=Ed;class Nd extends Yl{list(e,t={},n){return this._client.getAPIList(Zl`/fine_tuning/jobs/${e}/checkpoints`,Tl,{query:t,...n})}}class Md extends Yl{constructor(){super(...arguments),this.checkpoints=new Nd(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(Zl`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",Tl,{query:e,...t})}cancel(e,t){return this._client.post(Zl`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return this._client.getAPIList(Zl`/fine_tuning/jobs/${e}/events`,Tl,{query:t,...n})}pause(e,t){return this._client.post(Zl`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(Zl`/fine_tuning/jobs/${e}/resume`,t)}}Md.Checkpoints=Nd;class Od extends Yl{constructor(){super(...arguments),this.methods=new xd(this._client),this.jobs=new Md(this._client),this.checkpoints=new Cd(this._client),this.alpha=new kd(this._client)}}Od.Methods=xd,Od.Jobs=Md,Od.Checkpoints=Cd,Od.Alpha=kd;class Id extends Yl{}class Ad extends Yl{constructor(){super(...arguments),this.graderModels=new Id(this._client)}}Ad.GraderModels=Id;class Rd extends Yl{createVariation(e,t){return this._client.post("/images/variations",Fl({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",Fl({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class Pd extends Yl{retrieve(e,t){return this._client.get(Zl`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Pl,e)}delete(e,t){return this._client.delete(Zl`/models/${e}`,t)}}class Td extends Yl{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class $d extends Yl{accept(e,t,n){return this._client.post(Zl`/realtime/calls/${e}/accept`,{body:t,...n,headers:iu([{Accept:"*/*"},n?.headers])})}hangup(e,t){return this._client.post(Zl`/realtime/calls/${e}/hangup`,{...t,headers:iu([{Accept:"*/*"},t?.headers])})}refer(e,t,n){return this._client.post(Zl`/realtime/calls/${e}/refer`,{body:t,...n,headers:iu([{Accept:"*/*"},n?.headers])})}reject(e,t={},n){return this._client.post(Zl`/realtime/calls/${e}/reject`,{body:t,...n,headers:iu([{Accept:"*/*"},n?.headers])})}}class Dd extends Yl{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class Ld extends Yl{constructor(){super(...arguments),this.clientSecrets=new Dd(this._client),this.calls=new $d(this._client)}}function zd(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:jd(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:Bd(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||Fd(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function Bd(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const n=e.text?.format;return n.$parseRaw(t)}return JSON.parse(t)}function jd(e,t){const n=(r=e.tools??[],o=t.name,r.find(e=>"function"===e.type&&e.name===o));var r,o,a;return{...t,...t,parsed_arguments:(a=n,"auto-parseable-tool"===a?.$brand?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null)}}function Fd(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}Ld.ClientSecrets=Dd,Ld.Calls=$d;class Ud extends Rc{constructor(e){super(),Vu.add(this),Xu.set(this,void 0),Ku.set(this,void 0),Yu.set(this,void 0),di(this,Xu,e,"f")}static createResponse(e,t,n){const r=new Ud(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const r=n?.signal;let o;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),fi(this,Vu,"m",Gu).call(this);let a=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const e of o)fi(this,Vu,"m",Ju).call(this,e,a);if(o.controller.signal?.aborted)throw new bi;return fi(this,Vu,"m",Qu).call(this)}[(Xu=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,Vu=new WeakSet,Gu=function(){this.ended||di(this,Ku,void 0,"f")},Ju=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},r=fi(this,Vu,"m",Zu).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=r.output[e.output_index];if(!t)throw new gi(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new gi(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new gi(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=r.output[e.output_index];if(!t)throw new gi(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},Qu=function(){if(this.ended)throw new gi("stream has ended, this shouldn't happen");const e=fi(this,Ku,"f");if(!e)throw new gi("request ended without sending any events");di(this,Ku,void 0,"f");const t=function(e,t){return function(e,t){return t&&function(e){return!!nc(e.text?.format)}(t)?zd(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}(e,t)}(e,fi(this,Xu,"f"));return di(this,Yu,t,"f"),t},Zu=function(e){let t=fi(this,Ku,"f");if(!t){if("response.created"!==e.type)throw new gi(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=di(this,Ku,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new gi(`missing output at index ${e.output_index}`);const r=n.type,o=e.part;"message"===r&&"reasoning_text"!==o.type?n.content.push(o):"reasoning"===r&&"reasoning_text"===o.type&&(n.content||(n.content=[]),n.content.push(o));break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new gi(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new gi(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new gi(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new gi(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.reasoning_text.delta":{const n=t.output[e.output_index];if(!n)throw new gi(`missing output at index ${e.output_index}`);if("reasoning"===n.type){const t=n.content?.[e.content_index];if(!t)throw new gi(`missing content at index ${e.content_index}`);if("reasoning_text"!==t.type)throw new gi(`expected content to be 'reasoning_text', got ${t.type}`);t.text+=e.delta}break}case"response.completed":di(this,Ku,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=fi(this,Yu,"f");if(!e)throw new gi("stream ended without producing a ChatCompletion");return e}}class Hd extends Yl{list(e,t={},n){return this._client.getAPIList(Zl`/responses/${e}/input_items`,Tl,{query:t,...n})}}class qd extends Yl{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class Wd extends Yl{constructor(){super(...arguments),this.inputItems=new Hd(this._client),this.inputTokens=new qd(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&Fd(e),e))}retrieve(e,t={},n){return this._client.get(Zl`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&Fd(e),e))}delete(e,t){return this._client.delete(Zl`/responses/${e}`,{...t,headers:iu([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>zd(t,e))}stream(e,t){return Ud.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(Zl`/responses/${e}/cancel`,t)}}Wd.InputItems=Hd,Wd.InputTokens=qd;class Vd extends Yl{create(e,t,n){return this._client.post(Zl`/uploads/${e}/parts`,Fl({body:t,...n},this._client))}}class Xd extends Yl{constructor(){super(...arguments),this.parts=new Vd(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(Zl`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(Zl`/uploads/${e}/complete`,{body:t,...n})}}Xd.Parts=Vd;class Kd extends Yl{create(e,t,n){return this._client.post(Zl`/vector_stores/${e}/file_batches`,{body:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){const{vector_store_id:r}=t;return this._client.get(Zl`/vector_stores/${r}/file_batches/${e}`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){const{vector_store_id:r}=t;return this._client.post(Zl`/vector_stores/${r}/file_batches/${e}/cancel`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n){const{vector_store_id:r,...o}=t;return this._client.getAPIList(Zl`/vector_stores/${r}/file_batches/${e}/files`,Tl,{query:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,t,n){const r=iu([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(t,{vector_store_id:e},{...n,headers:r}).withResponse();switch(o.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=a.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Li(e);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=r?.maxConcurrency??5,a=Math.min(o,t.length),s=this._client,i=t.values(),l=[...n],c=Array(a).fill(i).map(async function(e){for(let t of e){const e=await s.files.create({file:t,purpose:"assistants"},r);l.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const e of t)"fulfilled"===e.status&&r.push(e.value);return r})(c),await this.createAndPoll(e,{file_ids:l})}}class Yd extends Yl{create(e,t,n){return this._client.post(Zl`/vector_stores/${e}/files`,{body:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){const{vector_store_id:r}=t;return this._client.get(Zl`/vector_stores/${r}/files/${e}`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){const{vector_store_id:r,...o}=t;return this._client.post(Zl`/vector_stores/${r}/files/${e}`,{body:o,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(Zl`/vector_stores/${e}/files`,Tl,{query:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){const{vector_store_id:r}=t;return this._client.delete(Zl`/vector_stores/${r}/files/${e}`,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r=iu([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const o=await this.retrieve(t,{vector_store_id:e},{...n,headers:r}).withResponse(),a=o.data;switch(a.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Li(e);break;case"failed":case"completed":return a}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){const{vector_store_id:r}=t;return this._client.getAPIList(Zl`/vector_stores/${r}/files/${e}/content`,Pl,{...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class Gd extends Yl{constructor(){super(...arguments),this.files=new Yd(this._client),this.fileBatches=new Kd(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(Zl`/vector_stores/${e}`,{...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(Zl`/vector_stores/${e}`,{body:t,...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",Tl,{query:e,...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(Zl`/vector_stores/${e}`,{...t,headers:iu([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,n){return this._client.getAPIList(Zl`/vector_stores/${e}/search`,Pl,{body:t,method:"post",...n,headers:iu([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}Gd.Files=Yd,Gd.FileBatches=Kd;class Jd extends Yl{create(e,t){return this._client.post("/videos",jl({body:e,...t},this._client))}retrieve(e,t){return this._client.get(Zl`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",$l,{query:e,...t})}delete(e,t){return this._client.delete(Zl`/videos/${e}`,t)}downloadContent(e,t={},n){return this._client.get(Zl`/videos/${e}/content`,{query:t,...n,headers:iu([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,t,n){return this._client.post(Zl`/videos/${e}/remix`,jl({body:t,...n},this._client))}}class Qd extends Yl{constructor(){super(...arguments),ed.add(this)}async unwrap(e,t,n=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,n,r),JSON.parse(e)}async verifySignature(e,t,n=this._client.webhookSecret,r=300){if("undefined"==typeof crypto||"function"!=typeof crypto.subtle.importKey||"function"!=typeof crypto.subtle.verify)throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");fi(this,ed,"m",td).call(this,n);const o=iu([t]).values,a=fi(this,ed,"m",nd).call(this,o,"webhook-signature"),s=fi(this,ed,"m",nd).call(this,o,"webhook-timestamp"),i=fi(this,ed,"m",nd).call(this,o,"webhook-id"),l=parseInt(s,10);if(isNaN(l))throw new Ai("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-l>r)throw new Ai("Webhook timestamp is too old");if(l>c+r)throw new Ai("Webhook timestamp is too new");const u=a.split(" ").map(e=>e.startsWith("v1,")?e.substring(3):e),d=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),f=i?`${i}.${s}.${e}`:`${s}.${e}`,h=await crypto.subtle.importKey("raw",d,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const e of u)try{const t=Buffer.from(e,"base64");if(await crypto.subtle.verify("HMAC",h,t,(new TextEncoder).encode(f)))return}catch{continue}throw new Ai("The given webhook signature does not match the expected signature")}}ed=new WeakSet,td=function(e){if("string"!=typeof e||0===e.length)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},nd=function(e,t){if(!e)throw new Error("Headers are required");const n=e.get(t);if(null==n)throw new Error(`Missing required header: ${t}`);return n};class Zd{constructor({baseURL:e=xu("OPENAI_BASE_URL"),apiKey:t=xu("OPENAI_API_KEY"),organization:n=xu("OPENAI_ORG_ID")??null,project:r=xu("OPENAI_PROJECT_ID")??null,webhookSecret:o=xu("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(rd.add(this),ad.set(this,void 0),this.completions=new dd(this),this.chat=new ou(this),this.embeddings=new yd(this),this.files=new _d(this),this.images=new Rd(this),this.audio=new du(this),this.moderations=new Td(this),this.models=new Pd(this),this.fineTuning=new Od(this),this.graders=new Ad(this),this.vectorStores=new Gd(this),this.webhooks=new Qd(this),this.beta=new ud(this),this.batches=new fu(this),this.uploads=new Xd(this),this.responses=new Wd(this),this.realtime=new Ld(this),this.conversations=new gd(this),this.evals=new wd(this),this.containers=new pd(this),this.videos=new Jd(this),void 0===t)throw new gi("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const s={apiKey:t,organization:n,project:r,webhookSecret:o,...a,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new gi("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=s.baseURL,this.timeout=s.timeout??od.DEFAULT_TIMEOUT,this.logger=s.logger??console;const i="warn";this.logLevel=i,this.logLevel=gl(s.logLevel,"ClientOptions.logLevel",this)??gl(xu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??i,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),di(this,ad,Vi,"f"),this._options=s,this.apiKey="string"==typeof t?t:"Missing Key",this.organization=n,this.project=r,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return iu([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return function(e,t={}){let n=e;const r=function(e=rl){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||rl.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Xi;if(void 0!==e.format){if(!Gi(Yi,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=Yi[n];let o,a=rl.filter;if(("function"==typeof e.filter||Pi(e.filter))&&(a=e.filter),o=e.arrayFormat&&e.arrayFormat in el?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":rl.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=void 0===e.allowDots?1==!!e.encodeDotInKeys||rl.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:rl.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:rl.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:rl.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?rl.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:rl.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:rl.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:rl.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:rl.encodeValuesOnly,filter:a,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:rl.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:rl.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:rl.strictNullHandling}}(t);let o,a;"function"==typeof r.filter?(a=r.filter,n=a("",n)):Pi(r.filter)&&(a=r.filter,o=a);const s=[];if("object"!=typeof n||null===n)return"";const i=el[r.arrayFormat],l="comma"===i&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);const c=new WeakMap;for(let e=0;e<o.length;++e){const t=o[e];r.skipNulls&&null===n[t]||tl(s,al(n[t],t,i,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=s.join(r.delimiter);let d=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${zi}`}defaultIdempotencyKey(){return`stainless-node-retry-${hi()}`}makeStatusError(e,t,n,r){return yi.generate(e,t,n,r)}async _callApiKey(){const e=this._options.apiKey;if("function"!=typeof e)return!1;let t;try{t=await e()}catch(e){if(e instanceof gi)throw e;throw new gi(`Failed to get token from 'apiKey' function: ${e.message}`,{cause:e})}if("string"!=typeof t||!t)throw new gi(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,n){const r=!fi(this,rd,"m",sd).call(this)&&n||this.baseURL,o=(e=>Ri.test(e))(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(a)||(t={...a,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>({method:e,path:t,...n})))}request(e,t=null){return new Il(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){const r=await e,o=r.maxRetries??this.maxRetries;null==t&&(t=o),await this.prepareOptions(r);const{req:a,url:s,timeout:i}=await this.buildRequest(r,{retryCount:o-t});await this.prepareRequest(a,{url:s,options:r});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=void 0===n?"":`, retryOf: ${n}`,u=Date.now();if(_l(this).debug(`[${l}] sending request`,xl({retryOfRequestLogID:n,method:r.method,url:s,options:r,headers:a.headers})),r.signal?.aborted)throw new bi;const d=new AbortController,f=await this.fetchWithTimeout(s,a,i,d).catch(mi),h=Date.now();if(f instanceof globalThis.Error){const e=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new bi;const o=pi(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return _l(this).info(`[${l}] connection ${o?"timed out":"failed"} - ${e}`),_l(this).debug(`[${l}] connection ${o?"timed out":"failed"} (${e})`,xl({retryOfRequestLogID:n,url:s,durationMs:h-u,message:f.message})),this.retryRequest(r,t,n??l);if(_l(this).info(`[${l}] connection ${o?"timed out":"failed"} - error; no more retries left`),_l(this).debug(`[${l}] connection ${o?"timed out":"failed"} (error; no more retries left)`,xl({retryOfRequestLogID:n,url:s,durationMs:h-u,message:f.message})),o)throw new wi;throw new vi({cause:f})}const p=`[${l}${c}${[...f.headers.entries()].filter(([e])=>"x-request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join("")}] ${a.method} ${s} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${h-u}ms`;if(!f.ok){const e=await this.shouldRetry(f);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await async function(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await(e[Symbol.asyncIterator]().return?.());const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}(f.body),_l(this).info(`${p} - ${e}`),_l(this).debug(`[${l}] response error (${e})`,xl({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:h-u})),this.retryRequest(r,t,n??l,f.headers)}const o=e?"error; no more retries left":"error; not retryable";_l(this).info(`${p} - ${o}`);const a=await f.text().catch(e=>mi(e).message),s=(e=>{try{return JSON.parse(e)}catch(e){return}})(a),i=s?void 0:a;throw _l(this).debug(`[${l}] response error (${o})`,xl({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:i,durationMs:Date.now()-u})),this.makeStatusError(f.status,s,i,f.headers)}return _l(this).info(p),_l(this).debug(`[${l}] response start`,xl({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:h-u})),{response:f,options:r,controller:d,requestLogID:l,retryOfRequestLogID:n,startTime:u}}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new Rl(this,n,e)}async fetchWithTimeout(e,t,n,r){const{signal:o,method:a,...s}=t||{};o&&o.addEventListener("abort",()=>r.abort());const i=setTimeout(()=>r.abort(),n),l=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,c={signal:r.signal,...l?{duplex:"half"}:{},method:"GET",...s};a&&(c.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(i)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n,r){let o;const a=r?.get("retry-after-ms");if(a){const e=parseFloat(a);Number.isNaN(e)||(o=e)}const s=r?.get("retry-after");if(s&&!o){const e=parseFloat(s);o=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(o&&0<=o&&o<6e4)){const n=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Li(o),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:o,query:a,defaultBaseURL:s}=n,i=this.buildURL(o,a,s);"timeout"in n&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new gi(`${e} must be an integer`);if(t<0)throw new gi(`${e} must be a positive integer`)})("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:l,body:c}=this.buildBody({options:n});return{req:{method:r,headers:await this.buildHeaders({options:e,method:r,bodyHeaders:l,retryCount:t}),...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...n.fetchOptions??{}},url:i,timeout:n.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:r}){let o={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=iu([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Ui??(Ui=Bi()),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=iu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:qi(e)}:fi(this,ad,"f").call(this,{body:e,headers:n})}}function ef(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function tf(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}od=Zd,ad=new WeakMap,rd=new WeakSet,sd=function(){return"https://api.openai.com/v1"!==this.baseURL},Zd.OpenAI=od,Zd.DEFAULT_TIMEOUT=6e5,Zd.OpenAIError=gi,Zd.APIError=yi,Zd.APIConnectionError=vi,Zd.APIConnectionTimeoutError=wi,Zd.APIUserAbortError=bi,Zd.NotFoundError=ki,Zd.ConflictError=Ei,Zd.RateLimitError=Ni,Zd.BadRequestError=_i,Zd.AuthenticationError=xi,Zd.InternalServerError=Mi,Zd.PermissionDeniedError=Si,Zd.UnprocessableEntityError=Ci,Zd.InvalidWebhookSignatureError=Ai,Zd.toFile=async function(e,t,n){if(Dl(),(e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&Xl(e))(e=await e))return e instanceof File?e:Ll([await e.arrayBuffer()],e.name);if((e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Ll(await Kl(r),t,n)}const r=await Kl(e);if(t||(t=zl(e)),!n?.type){const e=r.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n={...n,type:e})}return Ll(r,t,n)},Zd.Completions=dd,Zd.Chat=ou,Zd.Embeddings=yd,Zd.Files=_d,Zd.Images=Rd,Zd.Audio=du,Zd.Moderations=Td,Zd.Models=Pd,Zd.FineTuning=Od,Zd.Graders=Ad,Zd.VectorStores=Gd,Zd.Webhooks=Qd,Zd.Beta=ud,Zd.Batches=fu,Zd.Uploads=Xd,Zd.Responses=Wd,Zd.Realtime=Ld,Zd.Conversations=gd,Zd.Evals=wd,Zd.Containers=pd,Zd.Videos=Jd,new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/batches","/images/edits"]);let nf=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return nf=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};function rf(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const of=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class af extends Error{}class sf extends af{constructor(e,t,n,r){super(`${sf.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.requestID=r?.get("request-id"),this.error=t}static makeMessage(e,t,n){const r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new cf({message:n,cause:of(t)});const o=t;return 400===e?new df(e,o,n,r):401===e?new ff(e,o,n,r):403===e?new hf(e,o,n,r):404===e?new pf(e,o,n,r):409===e?new mf(e,o,n,r):422===e?new gf(e,o,n,r):429===e?new yf(e,o,n,r):e>=500?new bf(e,o,n,r):new sf(e,o,n,r)}}class lf extends sf{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class cf extends sf{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class uf extends cf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class df extends sf{}class ff extends sf{}class hf extends sf{}class pf extends sf{}class mf extends sf{}class gf extends sf{}class yf extends sf{}class bf extends sf{}const vf=/^[a-z][a-z0-9+.-]*:/i;let wf=e=>(wf=Array.isArray,wf(e)),_f=wf;function xf(e){return"object"!=typeof e?{}:e??{}}const Sf=e=>{try{return JSON.parse(e)}catch(e){return}},kf="0.69.0",Ef=()=>{const e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kf,"X-Stainless-OS":Nf(Deno.build.os),"X-Stainless-Arch":Cf(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kf,"X-Stainless-OS":Nf(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Cf(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},Cf=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Nf=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Mf;function Of(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function If(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Of({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){await(t.return?.())}})}function Af(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Rf=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});let Pf,Tf;function $f(e){let t;return(Pf??(t=new globalThis.TextEncoder,Pf=t.encode.bind(t)))(e)}function Df(e){let t;return(Tf??(t=new globalThis.TextDecoder,Tf=t.decode.bind(t)))(e)}var Lf,zf;class Bf{constructor(){Lf.set(this,void 0),zf.set(this,void 0),ef(this,Lf,new Uint8Array,"f"),ef(this,zf,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?$f(e):e;ef(this,Lf,function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}([tf(this,Lf,"f"),t]),"f");const n=[];let r;for(;null!=(r=jf(tf(this,Lf,"f"),tf(this,zf,"f")));){if(r.carriage&&null==tf(this,zf,"f")){ef(this,zf,r.index,"f");continue}if(null!=tf(this,zf,"f")&&(r.index!==tf(this,zf,"f")+1||r.carriage)){n.push(Df(tf(this,Lf,"f").subarray(0,tf(this,zf,"f")-1))),ef(this,Lf,tf(this,Lf,"f").subarray(tf(this,zf,"f")),"f"),ef(this,zf,null,"f");continue}const e=null!==tf(this,zf,"f")?r.preceding-1:r.preceding,t=Df(tf(this,Lf,"f").subarray(0,e));n.push(t),ef(this,Lf,tf(this,Lf,"f").subarray(r.index),"f"),ef(this,zf,null,"f")}return n}flush(){return tf(this,Lf,"f").length?this.decode("\n"):[]}}function jf(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Ff(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}Lf=new WeakMap,zf=new WeakMap,Bf.NEWLINE_CHARS=new Set(["\n","\r"]),Bf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const Uf={off:0,error:200,warn:300,info:400,debug:500},Hf=(e,t,n)=>{var r,o;if(e)return r=Uf,o=e,Object.prototype.hasOwnProperty.call(r,o)?e:void Kf(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Uf))}`)};function qf(){}function Wf(e,t,n){return!t||Uf[e]>Uf[n]?qf:t[e].bind(t)}const Vf={error:qf,warn:qf,info:qf,debug:qf};let Xf=new WeakMap;function Kf(e){const t=e.logger,n=e.logLevel??"off";if(!t)return Vf;const r=Xf.get(t);if(r&&r[0]===n)return r[1];const o={error:Wf("error",t,n),warn:Wf("warn",t,n),info:Wf("info",t,n),debug:Wf("debug",t,n)};return Xf.set(t,[n,o]),o}const Yf=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Gf,Jf,Qf;class Zf{constructor(e,t,n){this.iterator=e,Gf.set(this,void 0),this.controller=t,ef(this,Gf,n,"f")}static fromSSEResponse(e,t,n){let r=!1;const o=n?Kf(n):console;return new Zf(async function*(){if(r)throw new af("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const n of async function*(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new af("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new af("Attempted to iterate over a response with no body")}const n=new eh,r=new Bf,o=Af(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?$f(n):n;let r,o=new Uint8Array(t.length+e.length);for(o.set(t),o.set(e,t.length),t=o;-1!==(r=Ff(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(o))for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}(e,t)){if("completion"===n.event)try{yield JSON.parse(n.data)}catch(e){throw o.error("Could not parse message into JSON:",n.data),o.error("From chunk:",n.raw),e}if("message_start"===n.event||"message_delta"===n.event||"message_stop"===n.event||"content_block_start"===n.event||"content_block_delta"===n.event||"content_block_stop"===n.event)try{yield JSON.parse(n.data)}catch(e){throw o.error("Could not parse message into JSON:",n.data),o.error("From chunk:",n.raw),e}if("ping"!==n.event&&"error"===n.event)throw new sf(void 0,Sf(n.data)??n.data,void 0,e.headers)}n=!0}catch(e){if(rf(e))return;throw e}finally{n||t.abort()}},t,n)}static fromReadableStream(e,t,n){let r=!1;return new Zf(async function*(){if(r)throw new af("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const t of async function*(){const t=new Bf,n=Af(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())n||t&&(yield JSON.parse(t));n=!0}catch(e){if(rf(e))return;throw e}finally{n||t.abort()}},t,n)}[(Gf=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Zf(()=>r(e),this.controller,tf(this,Gf,"f")),new Zf(()=>r(t),this.controller,tf(this,Gf,"f"))]}toReadableStream(){const e=this;let t;return Of({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:r}=await t.next();if(r)return e.close();const o=$f(JSON.stringify(n)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class eh{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function th(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:a}=t,s=await(async()=>{if(t.options.stream)return Kf(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller):Zf.fromSSEResponse(n,t.controller);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const r=n.headers.get("content-type"),o=r?.split(";")[0]?.trim();return o?.includes("application/json")||o?.endsWith("+json")?nh(await n.json(),n):await n.text()})();return Kf(e).debug(`[${r}] response parsed`,Yf({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}function nh(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class rh extends Promise{constructor(e,t,n=th){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,Jf.set(this,void 0),ef(this,Jf,e,"f")}_thenUnwrap(e){return new rh(tf(this,Jf,"f"),this.responsePromise,async(t,n)=>nh(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(tf(this,Jf,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Jf=new WeakMap;class oh{constructor(e,t,n,r){Qf.set(this,void 0),ef(this,Qf,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new af("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await tf(this,Qf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Qf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class ah extends rh{constructor(e,t,n){super(e,t,async(e,t)=>new n(e,t.response,await th(e,t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}class sh extends oh{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const e=this.first_id;return e?{...this.options,query:{...xf(this.options.query),before_id:e}}:null}const e=this.last_id;return e?{...this.options,query:{...xf(this.options.query),after_id:e}}:null}}class ih extends oh{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.next_page=n.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.next_page;return e?{...this.options,query:{...xf(this.options.query),page:e}}:null}}const lh=()=>{if("undefined"==typeof File){const{process:e}=globalThis,t="string"==typeof e?.versions?.node&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ch(e,t,n){return lh(),new File(e,t??"unknown_file",n)}function uh(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const dh=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],fh=async(e,t)=>({...e,body:await ph(e.body,t)}),hh=new WeakMap,ph=async(e,t)=>{if(!await function(e){const t="function"==typeof e?e:e.fetch,n=hh.get(t);if(n)return n;const r=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,n=new FormData;return n.toString()!==await new e(n).text()}catch{return!0}})();return hh.set(t,r),r}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>mh(n,e,t))),n},mh=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if(n instanceof Response){let r={};const o=n.headers.get("Content-Type");o&&(r={type:o}),e.append(t,ch([await n.blob()],uh(n),r))}else if(dh(n))e.append(t,ch([await new Response(If(n)).blob()],uh(n)));else if((e=>e instanceof Blob&&"name"in e)(n))e.append(t,ch([n],uh(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(n=>mh(e,t+"[]",n)));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(([n,r])=>mh(e,`${t}[${n}]`,r)))}}},gh=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function yh(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(gh(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!dh(e)){const t=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}for await(const n of e)t.push(...await yh(n))}return t}class bh{constructor(e){this._client=e}}const vh=Symbol.for("brand.privateNullableHeaders");function*wh(e){if(!e)return;if(vh in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():_f(e)?t=e:(n=!0,t=Object.entries(e??{}));for(let e of t){const t=e[0];if("string"!=typeof t)throw new TypeError("expected header name to be a string");const r=_f(e[1])?e[1]:[e[1]];let o=!1;for(const e of r)void 0!==e&&(n&&!o&&(o=!0,yield[t,null]),yield[t,e])}}const _h=e=>{const t=new Headers,n=new Set;for(const r of e){const e=new Set;for(const[o,a]of wh(r)){const r=o.toLowerCase();e.has(r)||(t.delete(o),e.add(r)),null===a?(t.delete(o),n.add(r)):(t.append(o,a),n.delete(r))}}return{[vh]:!0,values:t,nulls:n}};function xh(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Sh=Object.freeze(Object.create(null)),kh=(e=xh)=>function(t,...n){if(1===t.length)return t[0];let r=!1;const o=[],a=t.reduce((t,a,s)=>{/[?#]/.test(a)&&(r=!0);const i=n[s];let l=(r?encodeURIComponent:e)(""+i);return s!==n.length&&(null==i||"object"==typeof i&&i.toString===Object.getPrototypeOf(Object.getPrototypeOf(i.hasOwnProperty??Sh)??Sh)?.toString)&&(l=i+"",o.push({start:t.length+a.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(i).slice(8,-1)} is not a valid path parameter`})),t+a+(s===n.length?"":l)},""),s=a.split(/[?#]/,1)[0],i=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let l;for(;null!==(l=i.exec(s));)o.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(o.sort((e,t)=>e.start-t.start),o.length>0){let e=0;const t=o.reduce((t,n)=>{const r=" ".repeat(n.start-e),o="^".repeat(n.length);return e=n.start+n.length,t+r+o},"");throw new af(`Path parameters result in path with invalid segments:\n${o.map(e=>e.error).join("\n")}\n${a}\n${t}`)}return a},Eh=kh(xh);class Ch extends bh{list(e={},t){const{betas:n,...r}=e??{};return this._client.getAPIList("/v1/files",sh,{query:r,...t,headers:_h([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},n){const{betas:r}=t??{};return this._client.delete(Eh`/v1/files/${e}`,{...n,headers:_h([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(e,t={},n){const{betas:r}=t??{};return this._client.get(Eh`/v1/files/${e}/content`,{...n,headers:_h([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},n){const{betas:r}=t??{};return this._client.get(Eh`/v1/files/${e}`,{...n,headers:_h([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(e,t){const{betas:n,...r}=e;return this._client.post("/v1/files",fh({body:r,...t,headers:_h([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}class Nh extends bh{retrieve(e,t={},n){const{betas:r}=t??{};return this._client.get(Eh`/v1/models/${e}?beta=true`,{...n,headers:_h([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}list(e={},t){const{betas:n,...r}=e??{};return this._client.getAPIList("/v1/models?beta=true",sh,{query:r,...t,headers:_h([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},t?.headers])})}}const Mh={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function Oh(e,t){return t&&"parse"in(t.output_format??{})?Ih(e,t):{...e,content:e.content.map(e=>"text"===e.type?{...e,parsed:null}:e),parsed_output:null}}function Ih(e,t){let n=null;const r=e.content.map(e=>{if("text"===e.type){const r=function(e,t){if("json_schema"!==e.output_format?.type)return null;try{return"parse"in e.output_format?e.output_format.parse(t):JSON.parse(t)}catch(e){throw new af(`Failed to parse structured output: ${e}`)}}(t,e.text);return null===n&&(n=r),{...e,parsed:r}}return e});return{...e,content:r,parsed_output:n}}const Ah=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return e=e.slice(0,e.length-1),Ah(e);case"number":let n=t.value[t.value.length-1];if("."===n||"-"===n)return e=e.slice(0,e.length-1),Ah(e);case"string":let r=e[e.length-2];if("delimiter"===r?.type)return e=e.slice(0,e.length-1),Ah(e);if("brace"===r?.type&&"{"===r.value)return e=e.slice(0,e.length-1),Ah(e);break;case"delimiter":return e=e.slice(0,e.length-1),Ah(e)}return e},Rh=e=>JSON.parse((e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t})((e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e})(Ah((e=>{let t=0,n=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){n.push({type:"brace",value:"{"}),t++;continue}if("}"===r){n.push({type:"brace",value:"}"}),t++;continue}if("["===r){n.push({type:"paren",value:"["}),t++;continue}if("]"===r){n.push({type:"paren",value:"]"}),t++;continue}if(":"===r){n.push({type:"separator",value:":"}),t++;continue}if(","===r){n.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let o="",a=!1;for(r=e[++t];'"'!==r;){if(t===e.length){a=!0;break}if("\\"===r){if(t++,t===e.length){a=!0;break}o+=r+e[t],r=e[++t]}else o+=r,r=e[++t]}r=e[++t],a||n.push({type:"string",value:o});continue}if(r&&/\s/.test(r)){t++;continue}let o=/[0-9]/;if(r&&o.test(r)||"-"===r||"."===r){let a="";for("-"===r&&(a+=r,r=e[++t]);r&&o.test(r)||"."===r;)a+=r,r=e[++t];n.push({type:"number",value:a});continue}let a=/[a-z]/i;if(r&&a.test(r)){let o="";for(;r&&a.test(r)&&t!==e.length;)o+=r,r=e[++t];if("true"!=o&&"false"!=o&&"null"!==o){t++;continue}n.push({type:"name",value:o});continue}t++}return n})(e)))));var Ph,Th,$h,Dh,Lh,zh,Bh,jh,Fh,Uh,Hh,qh,Wh,Vh,Xh,Kh,Yh,Gh,Jh,Qh,Zh,ep,tp;const np="__json_buf";function rp(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class op{constructor(e){Ph.add(this),this.messages=[],this.receivedMessages=[],Th.set(this,void 0),$h.set(this,null),this.controller=new AbortController,Dh.set(this,void 0),Lh.set(this,()=>{}),zh.set(this,()=>{}),Bh.set(this,void 0),jh.set(this,()=>{}),Fh.set(this,()=>{}),Uh.set(this,{}),Hh.set(this,!1),qh.set(this,!1),Wh.set(this,!1),Vh.set(this,!1),Xh.set(this,void 0),Kh.set(this,void 0),Jh.set(this,e=>{if(ef(this,qh,!0,"f"),rf(e)&&(e=new lf),e instanceof lf)return ef(this,Wh,!0,"f"),this._emit("abort",e);if(e instanceof af)return this._emit("error",e);if(e instanceof Error){const t=new af(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new af(String(e)))}),ef(this,Dh,new Promise((e,t)=>{ef(this,Lh,e,"f"),ef(this,zh,t,"f")}),"f"),ef(this,Bh,new Promise((e,t)=>{ef(this,jh,e,"f"),ef(this,Fh,t,"f")}),"f"),tf(this,Dh,"f").catch(()=>{}),tf(this,Bh,"f").catch(()=>{}),ef(this,$h,e,"f")}get response(){return tf(this,Xh,"f")}get request_id(){return tf(this,Kh,"f")}async withResponse(){const e=await tf(this,Dh,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new op(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new op(t);for(const e of t.messages)r._addMessageParam(e);return ef(r,$h,{...t,stream:!0},"f"),r._run(()=>r._createMessage(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},tf(this,Jh,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=n?.signal;let o;r&&(r.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),r.addEventListener("abort",o));try{tf(this,Ph,"m",Qh).call(this);const{response:r,data:o}=await e.create({...t,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(r);for await(const e of o)tf(this,Ph,"m",Zh).call(this,e);if(o.controller.signal?.aborted)throw new lf;tf(this,Ph,"m",ep).call(this)}finally{r&&o&&r.removeEventListener("abort",o)}}_connected(e){this.ended||(ef(this,Xh,e,"f"),ef(this,Kh,e?.headers.get("request-id"),"f"),tf(this,Lh,"f").call(this,e),this._emit("connect"))}get ended(){return tf(this,Hh,"f")}get errored(){return tf(this,qh,"f")}get aborted(){return tf(this,Wh,"f")}abort(){this.controller.abort()}on(e,t){return(tf(this,Uh,"f")[e]||(tf(this,Uh,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=tf(this,Uh,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(tf(this,Uh,"f")[e]||(tf(this,Uh,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{ef(this,Vh,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){ef(this,Vh,!0,"f"),await tf(this,Bh,"f")}get currentMessage(){return tf(this,Th,"f")}async finalMessage(){return await this.done(),tf(this,Ph,"m",Yh).call(this)}async finalText(){return await this.done(),tf(this,Ph,"m",Gh).call(this)}_emit(e,...t){if(tf(this,Hh,"f"))return;"end"===e&&(ef(this,Hh,!0,"f"),tf(this,jh,"f").call(this));const n=tf(this,Uh,"f")[e];if(n&&(tf(this,Uh,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return tf(this,Vh,"f")||n?.length||Promise.reject(e),tf(this,zh,"f").call(this,e),tf(this,Fh,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];tf(this,Vh,"f")||n?.length||Promise.reject(e),tf(this,zh,"f").call(this,e),tf(this,Fh,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",tf(this,Ph,"m",Yh).call(this))}async _fromReadableStream(e,t){const n=t?.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{tf(this,Ph,"m",Qh).call(this),this._connected(null);const t=Zf.fromReadableStream(e,this.controller);for await(const e of t)tf(this,Ph,"m",Zh).call(this,e);if(t.controller.signal?.aborted)throw new lf;tf(this,Ph,"m",ep).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(Th=new WeakMap,$h=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,zh=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Fh=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,qh=new WeakMap,Wh=new WeakMap,Vh=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Jh=new WeakMap,Ph=new WeakSet,Yh=function(){if(0===this.receivedMessages.length)throw new af("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Gh=function(){if(0===this.receivedMessages.length)throw new af("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new af("stream ended without producing a content block with type=text");return e.join(" ")},Qh=function(){this.ended||ef(this,Th,void 0,"f")},Zh=function(e){if(this.ended)return;const t=tf(this,Ph,"m",tp).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const n=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===n.type&&this._emit("text",e.delta.text,n.text||"");break;case"citations_delta":"text"===n.type&&this._emit("citation",e.delta.citation,n.citations??[]);break;case"input_json_delta":rp(n)&&n.input&&this._emit("inputJson",e.delta.partial_json,n.input);break;case"thinking_delta":"thinking"===n.type&&this._emit("thinking",e.delta.thinking,n.thinking);break;case"signature_delta":"thinking"===n.type&&this._emit("signature",n.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(Oh(t,tf(this,$h,"f")),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":ef(this,Th,t,"f")}},ep=function(){if(this.ended)throw new af("stream has ended, this shouldn't happen");const e=tf(this,Th,"f");if(!e)throw new af("request ended without sending any chunks");return ef(this,Th,void 0,"f"),Oh(e,tf(this,$h,"f"))},tp=function(e){let t=tf(this,Th,"f");if("message_start"===e.type){if(t)throw new af(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new af(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{const n=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===n?.type&&(t.content[e.index]={...n,text:(n.text||"")+e.delta.text});break;case"citations_delta":"text"===n?.type&&(t.content[e.index]={...n,citations:[...n.citations??[],e.delta.citation]});break;case"input_json_delta":if(n&&rp(n)){let r=n[np]||"";r+=e.delta.partial_json;const o={...n};if(Object.defineProperty(o,np,{value:r,enumerable:!1,writable:!0}),r)try{o.input=Rh(r)}catch(e){const t=new af(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${e}. JSON: ${r}`);tf(this,Jh,"f").call(this,t)}t.content[e.index]=o}break;case"thinking_delta":"thinking"===n?.type&&(t.content[e.index]={...n,thinking:n.thinking+e.delta.thinking});break;case"signature_delta":"thinking"===n?.type&&(t.content[e.index]={...n,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}var ap,sp,ip,lp,cp,up,dp,fp,hp,pp;function mp(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}class gp{constructor(e,t,n){ap.add(this),this.client=e,sp.set(this,!1),ip.set(this,!1),lp.set(this,void 0),cp.set(this,void 0),up.set(this,void 0),dp.set(this,void 0),fp.set(this,void 0),hp.set(this,0),ef(this,lp,{params:{...t,messages:structuredClone(t.messages)}},"f"),ef(this,cp,{...n,headers:_h([{"x-stainless-helper":"BetaToolRunner"},n?.headers])},"f"),ef(this,fp,mp(),"f")}async*[(sp=new WeakMap,ip=new WeakMap,lp=new WeakMap,cp=new WeakMap,up=new WeakMap,dp=new WeakMap,fp=new WeakMap,hp=new WeakMap,ap=new WeakSet,Symbol.asyncIterator)](){var e;if(tf(this,sp,"f"))throw new af("Cannot iterate over a consumed stream");ef(this,sp,!0,"f"),ef(this,ip,!0,"f"),ef(this,dp,void 0,"f");try{for(;;){let t;try{if(tf(this,lp,"f").params.max_iterations&&tf(this,hp,"f")>=tf(this,lp,"f").params.max_iterations)break;ef(this,ip,!1,"f"),ef(this,up,void 0,"f"),ef(this,dp,void 0,"f"),ef(this,hp,(e=tf(this,hp,"f"),++e),"f");const{max_iterations:n,...r}=tf(this,lp,"f").params;if(r.stream?(t=this.client.beta.messages.stream({...r},tf(this,cp,"f")),ef(this,up,t.finalMessage(),"f"),tf(this,up,"f").catch(()=>{}),yield t):(ef(this,up,this.client.beta.messages.create({...r,stream:!1},tf(this,cp,"f")),"f"),yield tf(this,up,"f")),!tf(this,ip,"f")){const{role:e,content:t}=await tf(this,up,"f");tf(this,lp,"f").params.messages.push({role:e,content:t})}const o=await tf(this,ap,"m",pp).call(this,tf(this,lp,"f").params.messages.at(-1));if(o&&tf(this,lp,"f").params.messages.push(o),!o&&!tf(this,ip,"f"))break}finally{t&&t.abort()}}if(!tf(this,up,"f"))throw new af("ToolRunner concluded without a message from the server");tf(this,fp,"f").resolve(await tf(this,up,"f"))}catch(e){throw ef(this,sp,!1,"f"),tf(this,fp,"f").promise.catch(()=>{}),tf(this,fp,"f").reject(e),ef(this,fp,mp(),"f"),e}}setMessagesParams(e){tf(this,lp,"f").params="function"==typeof e?e(tf(this,lp,"f").params):e,ef(this,ip,!0,"f"),ef(this,dp,void 0,"f")}async generateToolResponse(){const e=await tf(this,up,"f")??this.params.messages.at(-1);return e?tf(this,ap,"m",pp).call(this,e):null}done(){return tf(this,fp,"f").promise}async runUntilDone(){if(!tf(this,sp,"f"))for await(const e of this);return this.done()}get params(){return tf(this,lp,"f").params}pushMessages(...e){this.setMessagesParams(t=>({...t,messages:[...t.messages,...e]}))}then(e,t){return this.runUntilDone().then(e,t)}}pp=async function(e){return void 0!==tf(this,dp,"f")||ef(this,dp,async function(e,t=e.messages.at(-1)){if(!t||"assistant"!==t.role||!t.content||"string"==typeof t.content)return null;const n=t.content.filter(e=>"tool_use"===e.type);return 0===n.length?null:{role:"user",content:await Promise.all(n.map(async t=>{const n=e.tools.find(e=>e.name===t.name);if(!n||!("run"in n))return{type:"tool_result",tool_use_id:t.id,content:`Error: Tool '${t.name}' not found`,is_error:!0};try{let e=t.input;"parse"in n&&n.parse&&(e=n.parse(e));const r=await n.run(e);return{type:"tool_result",tool_use_id:t.id,content:r}}catch(e){return{type:"tool_result",tool_use_id:t.id,content:`Error: ${e instanceof Error?e.message:String(e)}`,is_error:!0}}}))}}(tf(this,lp,"f").params,e),"f"),tf(this,dp,"f")};class yp{constructor(e,t){this.iterator=e,this.controller=t}async*decoder(){const e=new Bf;for await(const t of this.iterator)for(const n of e.decode(t))yield JSON.parse(n);for(const t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new af("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new af("Attempted to iterate over a response with no body")}return new yp(Af(e.body),t)}}class bp extends bh{create(e,t){const{betas:n,...r}=e;return this._client.post("/v1/messages/batches?beta=true",{body:r,...t,headers:_h([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},n){const{betas:r}=t??{};return this._client.get(Eh`/v1/messages/batches/${e}?beta=true`,{...n,headers:_h([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(e={},t){const{betas:n,...r}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",sh,{query:r,...t,headers:_h([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},n){const{betas:r}=t??{};return this._client.delete(Eh`/v1/messages/batches/${e}?beta=true`,{...n,headers:_h([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(e,t={},n){const{betas:r}=t??{};return this._client.post(Eh`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:_h([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(e,t={},n){const r=await this.retrieve(e);if(!r.results_url)throw new af(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);const{betas:o}=t??{};return this._client.get(r.results_url,{...n,headers:_h([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>yp.fromResponse(t.response,t.controller))}}const vp={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};class wp extends bh{constructor(){super(...arguments),this.batches=new bp(this._client)}create(e,t){const{betas:n,...r}=e;r.model in vp&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${vp[r.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let o=this._client._options.timeout;if(!r.stream&&null==o){const e=Mh[r.model]??void 0;o=this._client.calculateNonstreamingTimeout(r.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:o??6e5,...t,headers:_h([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}parse(e,t){return t={...t,headers:_h([{"anthropic-beta":[...e.betas??[],"structured-outputs-2025-09-17"].toString()},t?.headers])},this.create(e,t).then(t=>Ih(t,e))}stream(e,t){return op.createMessage(this,e,t)}countTokens(e,t){const{betas:n,...r}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...t,headers:_h([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},t?.headers])})}toolRunner(e,t){return new gp(this._client,e,t)}}wp.Batches=bp,wp.BetaToolRunner=gp;class _p extends bh{create(e,t={},n){const{betas:r,...o}=t??{};return this._client.post(Eh`/v1/skills/${e}/versions?beta=true`,fh({body:o,...n,headers:_h([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])},this._client))}retrieve(e,t,n){const{skill_id:r,betas:o}=t;return this._client.get(Eh`/v1/skills/${r}/versions/${e}?beta=true`,{...n,headers:_h([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},n?.headers])})}list(e,t={},n){const{betas:r,...o}=t??{};return this._client.getAPIList(Eh`/v1/skills/${e}/versions?beta=true`,ih,{query:o,...n,headers:_h([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])})}delete(e,t,n){const{skill_id:r,betas:o}=t;return this._client.delete(Eh`/v1/skills/${r}/versions/${e}?beta=true`,{...n,headers:_h([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},n?.headers])})}}class xp extends bh{constructor(){super(...arguments),this.versions=new _p(this._client)}create(e={},t){const{betas:n,...r}=e??{};return this._client.post("/v1/skills?beta=true",fh({body:r,...t,headers:_h([{"anthropic-beta":[...n??[],"skills-2025-10-02"].toString()},t?.headers])},this._client))}retrieve(e,t={},n){const{betas:r}=t??{};return this._client.get(Eh`/v1/skills/${e}?beta=true`,{...n,headers:_h([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])})}list(e={},t){const{betas:n,...r}=e??{};return this._client.getAPIList("/v1/skills?beta=true",ih,{query:r,...t,headers:_h([{"anthropic-beta":[...n??[],"skills-2025-10-02"].toString()},t?.headers])})}delete(e,t={},n){const{betas:r}=t??{};return this._client.delete(Eh`/v1/skills/${e}?beta=true`,{...n,headers:_h([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])})}}xp.Versions=_p;class Sp extends bh{constructor(){super(...arguments),this.models=new Nh(this._client),this.messages=new wp(this._client),this.files=new Ch(this._client),this.skills=new xp(this._client)}}Sp.Models=Nh,Sp.Messages=wp,Sp.Files=Ch,Sp.Skills=xp;class kp extends bh{create(e,t){const{betas:n,...r}=e;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...t,headers:_h([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}var Ep,Cp,Np,Mp,Op,Ip,Ap,Rp,Pp,Tp,$p,Dp,Lp,zp,Bp,jp,Fp,Up,Hp,qp,Wp,Vp;const Xp="__json_buf";function Kp(e){return"tool_use"===e.type||"server_tool_use"===e.type}class Yp{constructor(){Ep.add(this),this.messages=[],this.receivedMessages=[],Cp.set(this,void 0),this.controller=new AbortController,Np.set(this,void 0),Mp.set(this,()=>{}),Op.set(this,()=>{}),Ip.set(this,void 0),Ap.set(this,()=>{}),Rp.set(this,()=>{}),Pp.set(this,{}),Tp.set(this,!1),$p.set(this,!1),Dp.set(this,!1),Lp.set(this,!1),zp.set(this,void 0),Bp.set(this,void 0),Up.set(this,e=>{if(ef(this,$p,!0,"f"),rf(e)&&(e=new lf),e instanceof lf)return ef(this,Dp,!0,"f"),this._emit("abort",e);if(e instanceof af)return this._emit("error",e);if(e instanceof Error){const t=new af(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new af(String(e)))}),ef(this,Np,new Promise((e,t)=>{ef(this,Mp,e,"f"),ef(this,Op,t,"f")}),"f"),ef(this,Ip,new Promise((e,t)=>{ef(this,Ap,e,"f"),ef(this,Rp,t,"f")}),"f"),tf(this,Np,"f").catch(()=>{}),tf(this,Ip,"f").catch(()=>{})}get response(){return tf(this,zp,"f")}get request_id(){return tf(this,Bp,"f")}async withResponse(){const e=await tf(this,Np,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new Yp;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new Yp;for(const e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},tf(this,Up,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=n?.signal;let o;r&&(r.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),r.addEventListener("abort",o));try{tf(this,Ep,"m",Hp).call(this);const{response:r,data:o}=await e.create({...t,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(r);for await(const e of o)tf(this,Ep,"m",qp).call(this,e);if(o.controller.signal?.aborted)throw new lf;tf(this,Ep,"m",Wp).call(this)}finally{r&&o&&r.removeEventListener("abort",o)}}_connected(e){this.ended||(ef(this,zp,e,"f"),ef(this,Bp,e?.headers.get("request-id"),"f"),tf(this,Mp,"f").call(this,e),this._emit("connect"))}get ended(){return tf(this,Tp,"f")}get errored(){return tf(this,$p,"f")}get aborted(){return tf(this,Dp,"f")}abort(){this.controller.abort()}on(e,t){return(tf(this,Pp,"f")[e]||(tf(this,Pp,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=tf(this,Pp,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(tf(this,Pp,"f")[e]||(tf(this,Pp,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{ef(this,Lp,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){ef(this,Lp,!0,"f"),await tf(this,Ip,"f")}get currentMessage(){return tf(this,Cp,"f")}async finalMessage(){return await this.done(),tf(this,Ep,"m",jp).call(this)}async finalText(){return await this.done(),tf(this,Ep,"m",Fp).call(this)}_emit(e,...t){if(tf(this,Tp,"f"))return;"end"===e&&(ef(this,Tp,!0,"f"),tf(this,Ap,"f").call(this));const n=tf(this,Pp,"f")[e];if(n&&(tf(this,Pp,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return tf(this,Lp,"f")||n?.length||Promise.reject(e),tf(this,Op,"f").call(this,e),tf(this,Rp,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];tf(this,Lp,"f")||n?.length||Promise.reject(e),tf(this,Op,"f").call(this,e),tf(this,Rp,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",tf(this,Ep,"m",jp).call(this))}async _fromReadableStream(e,t){const n=t?.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{tf(this,Ep,"m",Hp).call(this),this._connected(null);const t=Zf.fromReadableStream(e,this.controller);for await(const e of t)tf(this,Ep,"m",qp).call(this,e);if(t.controller.signal?.aborted)throw new lf;tf(this,Ep,"m",Wp).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(Cp=new WeakMap,Np=new WeakMap,Mp=new WeakMap,Op=new WeakMap,Ip=new WeakMap,Ap=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,Tp=new WeakMap,$p=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,zp=new WeakMap,Bp=new WeakMap,Up=new WeakMap,Ep=new WeakSet,jp=function(){if(0===this.receivedMessages.length)throw new af("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Fp=function(){if(0===this.receivedMessages.length)throw new af("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new af("stream ended without producing a content block with type=text");return e.join(" ")},Hp=function(){this.ended||ef(this,Cp,void 0,"f")},qp=function(e){if(this.ended)return;const t=tf(this,Ep,"m",Vp).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const n=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===n.type&&this._emit("text",e.delta.text,n.text||"");break;case"citations_delta":"text"===n.type&&this._emit("citation",e.delta.citation,n.citations??[]);break;case"input_json_delta":Kp(n)&&n.input&&this._emit("inputJson",e.delta.partial_json,n.input);break;case"thinking_delta":"thinking"===n.type&&this._emit("thinking",e.delta.thinking,n.thinking);break;case"signature_delta":"thinking"===n.type&&this._emit("signature",n.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":ef(this,Cp,t,"f")}},Wp=function(){if(this.ended)throw new af("stream has ended, this shouldn't happen");const e=tf(this,Cp,"f");if(!e)throw new af("request ended without sending any chunks");return ef(this,Cp,void 0,"f"),e},Vp=function(e){let t=tf(this,Cp,"f");if("message_start"===e.type){if(t)throw new af(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new af(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push({...e.content_block}),t;case"content_block_delta":{const n=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===n?.type&&(t.content[e.index]={...n,text:(n.text||"")+e.delta.text});break;case"citations_delta":"text"===n?.type&&(t.content[e.index]={...n,citations:[...n.citations??[],e.delta.citation]});break;case"input_json_delta":if(n&&Kp(n)){let r=n[Xp]||"";r+=e.delta.partial_json;const o={...n};Object.defineProperty(o,Xp,{value:r,enumerable:!1,writable:!0}),r&&(o.input=Rh(r)),t.content[e.index]=o}break;case"thinking_delta":"thinking"===n?.type&&(t.content[e.index]={...n,thinking:n.thinking+e.delta.thinking});break;case"signature_delta":"thinking"===n?.type&&(t.content[e.index]={...n,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Gp extends bh{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(Eh`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",sh,{query:e,...t})}delete(e,t){return this._client.delete(Eh`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(Eh`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){const n=await this.retrieve(e);if(!n.results_url)throw new af(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...t,headers:_h([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>yp.fromResponse(t.response,t.controller))}}class Jp extends bh{constructor(){super(...arguments),this.batches=new Gp(this._client)}create(e,t){e.model in Qp&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${Qp[e.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&null==n){const t=Mh[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...t,stream:e.stream??!1})}stream(e,t){return Yp.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}const Qp={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};Jp.Batches=Gp;class Zp extends bh{retrieve(e,t={},n){const{betas:r}=t??{};return this._client.get(Eh`/v1/models/${e}`,{...n,headers:_h([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}list(e={},t){const{betas:n,...r}=e??{};return this._client.getAPIList("/v1/models",sh,{query:r,...t,headers:_h([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},t?.headers])})}}const em=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;var tm,nm,rm,om,am,sm,im;class lm{constructor({baseURL:e=em("ANTHROPIC_BASE_URL"),apiKey:t=em("ANTHROPIC_API_KEY")??null,authToken:n=em("ANTHROPIC_AUTH_TOKEN")??null,...r}={}){tm.add(this),rm.set(this,void 0);const o={apiKey:t,authToken:n,...r,baseURL:e||"https://api.anthropic.com"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new af("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=o.baseURL,this.timeout=o.timeout??nm.DEFAULT_TIMEOUT,this.logger=o.logger??console;const a="warn";this.logLevel=a,this.logLevel=Hf(o.logLevel,"ClientOptions.logLevel",this)??Hf(em("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??a,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),ef(this,rm,Rf,"f"),this._options=o,this.apiKey=t,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization")||t.has("authorization")))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return _h([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return _h([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return _h([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new af(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${kf}`}defaultIdempotencyKey(){return`stainless-node-retry-${nf()}`}makeStatusError(e,t,n,r){return sf.generate(e,t,n,r)}buildURL(e,t,n){const r=!tf(this,tm,"m",om).call(this)&&n||this.baseURL,o=(e=>vf.test(e))(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(a)||(t={...a,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new af("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>({method:e,path:t,...n})))}request(e,t=null){return new rh(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){const r=await e,o=r.maxRetries??this.maxRetries;null==t&&(t=o),await this.prepareOptions(r);const{req:a,url:s,timeout:i}=await this.buildRequest(r,{retryCount:o-t});await this.prepareRequest(a,{url:s,options:r});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=void 0===n?"":`, retryOf: ${n}`,u=Date.now();if(Kf(this).debug(`[${l}] sending request`,Yf({retryOfRequestLogID:n,method:r.method,url:s,options:r,headers:a.headers})),r.signal?.aborted)throw new lf;const d=new AbortController,f=await this.fetchWithTimeout(s,a,i,d).catch(of),h=Date.now();if(f instanceof globalThis.Error){const e=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new lf;const o=rf(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return Kf(this).info(`[${l}] connection ${o?"timed out":"failed"} - ${e}`),Kf(this).debug(`[${l}] connection ${o?"timed out":"failed"} (${e})`,Yf({retryOfRequestLogID:n,url:s,durationMs:h-u,message:f.message})),this.retryRequest(r,t,n??l);if(Kf(this).info(`[${l}] connection ${o?"timed out":"failed"} - error; no more retries left`),Kf(this).debug(`[${l}] connection ${o?"timed out":"failed"} (error; no more retries left)`,Yf({retryOfRequestLogID:n,url:s,durationMs:h-u,message:f.message})),o)throw new uf;throw new cf({cause:f})}const p=`[${l}${c}${[...f.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join("")}] ${a.method} ${s} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${h-u}ms`;if(!f.ok){const e=await this.shouldRetry(f);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await async function(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await(e[Symbol.asyncIterator]().return?.());const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}(f.body),Kf(this).info(`${p} - ${e}`),Kf(this).debug(`[${l}] response error (${e})`,Yf({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:h-u})),this.retryRequest(r,t,n??l,f.headers)}const o=e?"error; no more retries left":"error; not retryable";Kf(this).info(`${p} - ${o}`);const a=await f.text().catch(e=>of(e).message),s=Sf(a),i=s?void 0:a;throw Kf(this).debug(`[${l}] response error (${o})`,Yf({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:i,durationMs:Date.now()-u})),this.makeStatusError(f.status,s,i,f.headers)}return Kf(this).info(p),Kf(this).debug(`[${l}] response start`,Yf({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:h-u})),{response:f,options:r,controller:d,requestLogID:l,retryOfRequestLogID:n,startTime:u}}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new ah(this,n,e)}async fetchWithTimeout(e,t,n,r){const{signal:o,method:a,...s}=t||{};o&&o.addEventListener("abort",()=>r.abort());const i=setTimeout(()=>r.abort(),n),l=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,c={signal:r.signal,...l?{duplex:"half"}:{},method:"GET",...s};a&&(c.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(i)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n,r){let o;const a=r?.get("retry-after-ms");if(a){const e=parseFloat(a);Number.isNaN(e)||(o=e)}const s=r?.get("retry-after");if(s&&!o){const e=parseFloat(s);o=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(o&&0<=o&&o<6e4)){const n=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,n)}var i;return await(i=o,new Promise(e=>setTimeout(e,i))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){const n=6e5;if(36e5*e/128e3>n||null!=t&&e>t)throw new af("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return n}async buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:o,query:a,defaultBaseURL:s}=n,i=this.buildURL(o,a,s);"timeout"in n&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new af(`${e} must be an integer`);if(t<0)throw new af(`${e} must be a positive integer`)})("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:l,body:c}=this.buildBody({options:n});return{req:{method:r,headers:await this.buildHeaders({options:e,method:r,bodyHeaders:l,retryCount:t}),...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...n.fetchOptions??{}},url:i,timeout:n.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:r}){let o={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=_h([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Mf??(Mf=Ef()),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=_h([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:If(e)}:tf(this,rm,"f").call(this,{body:e,headers:n})}}nm=lm,rm=new WeakMap,tm=new WeakSet,om=function(){return"https://api.anthropic.com"!==this.baseURL},lm.Anthropic=nm,lm.HUMAN_PROMPT="\\n\\nHuman:",lm.AI_PROMPT="\\n\\nAssistant:",lm.DEFAULT_TIMEOUT=6e5,lm.AnthropicError=af,lm.APIError=sf,lm.APIConnectionError=cf,lm.APIConnectionTimeoutError=uf,lm.APIUserAbortError=lf,lm.NotFoundError=pf,lm.ConflictError=mf,lm.RateLimitError=yf,lm.BadRequestError=df,lm.AuthenticationError=ff,lm.InternalServerError=bf,lm.PermissionDeniedError=hf,lm.UnprocessableEntityError=gf,lm.toFile=async function(e,t,n){if(lh(),e=await e,t||(t=uh(e)),(e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&gh(e))(e))return e instanceof File&&null==t&&null==n?e:ch([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...n});if((e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),ch(await yh(r),t,n)}const r=await yh(e);if(!n?.type){const e=r.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n={...n,type:e})}return ch(r,t,n)};class cm extends lm{constructor(){super(...arguments),this.completions=new kp(this),this.messages=new Jp(this),this.models=new Zp(this),this.beta=new Sp(this)}}cm.Completions=kp,cm.Messages=Jp,cm.Models=Zp,cm.Beta=Sp,function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(am||(am={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(sm||(sm={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(im||(im={}));const um=["user","model","function","system"];var dm,fm,hm,pm,mm,gm,ym,bm,vm;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(dm||(dm={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(fm||(fm={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(hm||(hm={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(pm||(pm={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(mm||(mm={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(gm||(gm={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(ym||(ym={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(bm||(bm={}));class wm extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class _m extends wm{constructor(e,t){super(e),this.response=t}}class xm extends wm{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class Sm extends wm{}class km extends wm{}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(vm||(vm={}));class Em{constructor(e,t,n,r,o){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=o}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function Cm(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.1"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(e){throw new Sm(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${e.message}`)}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new Sm(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new Sm(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function Nm(e,t,n,r,o,a={},s=fetch){const{url:i,fetchOptions:l}=await async function(e,t,n,r,o,a){const s=new Em(e,t,n,r,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},Mm(a)),{method:"POST",headers:await Cm(s),body:o})}}(e,t,n,r,o,a);return async function(e,t,n=fetch){let r;try{r=await n(e,t)}catch(t){!function(e,t){let n=e;throw"AbortError"===n.name?(n=new km(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof xm||e instanceof Sm||(n=new wm(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}(t,e)}return r.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(e){}throw new xm(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}(r,e),r}(i,l,s)}function Mm(e){const t={};if(void 0!==(null==e?void 0:e.signal)||(null==e?void 0:e.timeout)>=0){const n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function Om(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Rm(e.candidates[0]))throw new _m(`${Pm(e)}`,e);return function(e){var t,n,r,o;const a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const t of null===(o=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===o?void 0:o.parts)t.text&&a.push(t.text),t.executableCode&&a.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&a.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}(e)}if(e.promptFeedback)throw new _m(`Text not available. ${Pm(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Rm(e.candidates[0]))throw new _m(`${Pm(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Im(e)[0]}if(e.promptFeedback)throw new _m(`Function call not available. ${Pm(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Rm(e.candidates[0]))throw new _m(`${Pm(e)}`,e);return Im(e)}if(e.promptFeedback)throw new _m(`Function call not available. ${Pm(e)}`,e)},e}function Im(e){var t,n,r,o;const a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const t of null===(o=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===o?void 0:o.parts)t.functionCall&&a.push(t.functionCall);return a.length>0?a:void 0}const Am=[mm.RECITATION,mm.SAFETY,mm.LANGUAGE];function Rm(e){return!!e.finishReason&&Am.includes(e.finishReason)}function Pm(e){var t,n,r;let o="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];Rm(t)&&(o+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(o+=`: ${t.finishMessage}`))}}else o+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(o+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);return o}function Tm(e){return this instanceof Tm?(this.v=e,this):new Tm(e)}"function"==typeof SuppressedError&&SuppressedError;const $m=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function Dm(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return Om(zm(t));t.push(r)}}function Lm(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=o[e](t)).value instanceof Tm?Promise.resolve(n.value.v).then(l,c):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function u(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}}(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield Tm(t.read());if(n)break;yield yield Tm(Om(e))}})}function zm(e){const t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(const t of e){if(t.candidates){let e=0;for(const r of t.candidates)if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:e}),n.candidates[e].citationMetadata=r.citationMetadata,n.candidates[e].groundingMetadata=r.groundingMetadata,n.candidates[e].finishReason=r.finishReason,n.candidates[e].finishMessage=r.finishMessage,n.candidates[e].safetyRatings=r.safetyRatings,r.content&&r.content.parts){n.candidates[e].content||(n.candidates[e].content={role:r.content.role||"user",parts:[]});const t={};for(const o of r.content.parts)o.text&&(t.text=o.text),o.functionCall&&(t.functionCall=o.functionCall),o.executableCode&&(t.executableCode=o.executableCode),o.codeExecutionResult&&(t.codeExecutionResult=o.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),n.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(n.usageMetadata=t.usageMetadata)}return n}async function Bm(e,t,n,r){return function(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let n="";return function r(){return t.read().then(({value:t,done:o})=>{if(o)return n.trim()?void e.error(new wm("Failed to parse stream")):void e.close();n+=t;let a,s=n.match($m);for(;s;){try{a=JSON.parse(s[1])}catch(t){return void e.error(new wm(`Error parsing JSON response: "${s[1]}"`))}e.enqueue(a),n=n.substring(s[0].length),s=n.match($m)}return r()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new km("Request aborted when reading from the stream"):new wm("Error reading from the stream"),t})}()}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:Lm(n),response:Dm(r)}}(await Nm(t,vm.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function jm(e,t,n,r){const o=await Nm(t,vm.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:Om(await o.json())}}function Fm(e){if(null!=e)return"string"==typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Um(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const n of e)"string"==typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),o=!0):(t.parts.push(a),r=!0);if(r&&o)throw new wm("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new wm("No content is provided for sending chat message.");return r?t:n}(t)}function Hm(e){let t;return t=e.contents?e:{contents:[Um(e)]},e.systemInstruction&&(t.systemInstruction=Fm(e.systemInstruction)),t}const qm=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Wm={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Vm(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;if(void 0===n)return!1;if(void 0===n.parts||0===n.parts.length)return!1;for(const e of n.parts){if(void 0===e||0===Object.keys(e).length)return!1;if(void 0!==e.text&&""===e.text)return!1}return!0}const Xm="SILENT_ERROR";class Km{constructor(e,t,n,r={}){this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new wm(`First content should be with role 'user', got ${e}`);if(!um.includes(e))throw new wm(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(um)}`);if(!Array.isArray(r))throw new wm("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new wm("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const e of r)for(const t of qm)t in e&&(o[t]+=1);const a=Wm[e];for(const t of qm)if(!a.includes(t)&&o[t]>0)throw new wm(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,r,o,a,s,i;await this._sendPromise;const l=Um(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(o=this.params)||void 0===o?void 0:o.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(i=this.params)||void 0===i?void 0:i.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then(()=>jm(this._apiKey,this.model,c,u)).then(e=>{var t;if(Vm(e.response)){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=Pm(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}d=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,d}async sendMessageStream(e,t={}){var n,r,o,a,s,i;await this._sendPromise;const l=Um(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(o=this.params)||void 0===o?void 0:o.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(i=this.params)||void 0===i?void 0:i.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=Bm(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw new Error(Xm)}).then(e=>e.response).then(e=>{if(Vm(e)){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=Pm(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==Xm&&console.error(e)}),d}}class Ym{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Fm(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const r=Hm(e),o=Object.assign(Object.assign({},this._requestOptions),t);return jm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),o)}async generateContentStream(e,t={}){var n;const r=Hm(e),o=Object.assign(Object.assign({},this._requestOptions),t);return Bm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),o)}startChat(e){var t;return new Km(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=function(e,t){var n;let r={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(n=null==t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const o=null!=e.generateContentRequest;if(e.contents){if(o)throw new Sm("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=Um(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await Nm(t,vm.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async embedContent(e,t={}){const n="string"==typeof(o=e)||Array.isArray(o)?{content:Um(o)}:o,r=Object.assign(Object.assign({},this._requestOptions),t);var o;return async function(e,t,n,r){return(await Nm(t,vm.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const o=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await Nm(t,vm.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}(this.apiKey,this.model,e,n)}}class Gm{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new wm("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ym(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new Sm("Cached content must contain a `name` field.");if(!e.model)throw new Sm("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const n of r)if((null==t?void 0:t[n])&&e[n]&&(null==t?void 0:t[n])!==e[n]){if("model"===n&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new Sm(`Different value for "${n}" specified in modelParams (${t[n]}) and cachedContent (${e[n]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Ym(this.apiKey,o,n)}}async function Jm(e,t,n,r,o,a,s,i,l=null){if(a.has(e.id))return;a.add(e.id);const c=e.data.type;try{o(e.id,{isProcessing:!0,error:null});let u=null;if("input"===c||"text-input"===c)u=e.data.value||"",o(e.id,{output:u});else if("batch-input"===c)u=l||e.data.batchItems||"",o(e.id,{output:u});else if("image-input"===c){if(!e.data.imageData)throw new Error("No image uploaded");u=e.data.imageData,o(e.id,{output:"Image uploaded: "+e.data.value})}else if("process"===c||"ai-process"===c){const a=await Qm(e.id,t,n,!1);if(!a)throw new Error("No input connected to AI Process block");u=await Zm(a,r.openai),o(e.id,{output:u})}else if("ai-vision"===c){const a=await Qm(e.id,t,n,!0);if(!a.imageData)throw new Error("No image connected to AI Vision block");const s=a.textData||"What's in this image? Provide a detailed description.";u=await async function(e,t,n){if(!n)throw new Error("OpenAI API key not set");const r=new Zd({apiKey:n,dangerouslyAllowBrowser:!0});try{return(await r.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:t},{type:"image_url",image_url:{url:e}}]}],max_tokens:500})).choices[0].message.content}catch(e){throw new Error(`GPT-4 Vision API Error: ${e.message}`)}}(a.imageData,s,r.openai),o(e.id,{output:u})}else if("claude"===c){const a=await Qm(e.id,t,n,!1);if(!a)throw new Error("No input connected to Claude block");const s=e.data.claudeModel||"claude-3-5-sonnet-20241022";u=await async function(e,t,n){if(!t)throw new Error("Anthropic API key not set");const r=new cm({apiKey:t,dangerouslyAllowBrowser:!0});try{return(await r.messages.create({model:n,max_tokens:1024,messages:[{role:"user",content:e}]})).content[0].text}catch(e){throw new Error(`Claude API Error: ${e.message}`)}}(a,r.anthropic,s),o(e.id,{output:u})}else if("gemini"===c){const a=await Qm(e.id,t,n,!1);if(!a)throw new Error("No input connected to Gemini block");const s=e.data.geminiModel||"gemini-pro";u=await async function(e,t,n){if(!t)throw new Error("Google AI API key not set");const r=new Gm(t).getGenerativeModel({model:n});try{const t=await r.generateContent(e);return(await t.response).text()}catch(e){throw new Error(`Gemini API Error: ${e.message}`)}}(a,r.google,s),o(e.id,{output:u})}else if("prompt-template"===c){const a=await Qm(e.id,t,n,!1);if(!a)throw new Error("No input connected to Prompt Template block");const s=(e.data.template||"Analyze this text: {input}").replace(/{input}/g,a);u=await Zm(s,r.openai),o(e.id,{output:u})}else if("api-webhook"===c){const r=await Qm(e.id,t,n,!1),a=e.data.apiMethod||"GET",s=e.data.apiUrl;if(!s)throw new Error("API URL not specified");u=await async function(e,t,n,r){try{const o={method:t,headers:r?JSON.parse(r):{"Content-Type":"application/json"}};"GET"!==t&&n&&(o.body="string"==typeof n?n:JSON.stringify(n));const a=await fetch(e,o),s=await a.text();try{return JSON.stringify(JSON.parse(s),null,2)}catch{return s}}catch(e){throw new Error(`API Webhook Error: ${e.message}`)}}(s,a,r,e.data.apiHeaders),o(e.id,{output:u})}else if("conditional"===c){const a=await Qm(e.id,t,n,!1);if(!a)throw new Error("No input connected to Conditional block");const s=await async function(e,t,n){const r=e.data.conditionType||"contains",o=e.data.conditionValue||"";switch(r){case"contains":return t.toLowerCase().includes(o.toLowerCase());case"not-contains":return!t.toLowerCase().includes(o.toLowerCase());case"length":const r=e.data.conditionOperator||"greater",a=parseInt(o)||0;return"greater"===r?t.length>a:t.length<a;case"sentiment":const s=`Analyze the sentiment of this text and respond with ONLY ONE WORD: either "positive" or "negative".\n\nText: ${t}`;return(await Zm(s,n)).toLowerCase().includes("positive");default:return!1}}(e,a,r.openai);u=s,o(e.id,{output:s})}else if("combiner"===c){const r=await async function(e,t,n){const r=n.filter(t=>t.target===e),o=[];for(const e of r){const n=t.find(t=>t.id===e.source);if(n){const e=n.data.output||n.data.value||n.data.currentBatchItem||"";e&&o.push(e)}}return o}(e.id,t,n);if(0===r.length)throw new Error("No inputs connected to Combiner block");u=r.join("\n\n---\n\n"),o(e.id,{output:u})}else if("delay"===c){const r=await Qm(e.id,t,n,!1),a=parseFloat(e.data.delaySeconds)||1;await new Promise(e=>setTimeout(e,1e3*a)),u=r||"",o(e.id,{output:`Delayed ${a}s: ${u}`})}else if("text-transform"===c){const r=await Qm(e.id,t,n,!1);if(!r)throw new Error("No input connected to Text Transform block");u=function(e,t){switch(t.transformType||"uppercase"){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();case"capitalize":return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();case"reverse":return e.split("").reverse().join("");case"trim":return e.trim();case"replace":const n=t.findText||"",r=t.replaceText||"";return e.replace(new RegExp(n,"g"),r);default:return e}}(r,e.data),o(e.id,{output:u})}else if("json-parser"===c){const r=await Qm(e.id,t,n,!1);if(!r)throw new Error("No input connected to JSON Parser block");u=function(e,t){try{const n=JSON.parse(e);if(!t)return JSON.stringify(n,null,2);const r=t.split(".");let o=n;for(const e of r){const n=e.match(/(\w+)\[(\d+)\]/);if(o=n?o[n[1]][parseInt(n[2])]:o[e],void 0===o)throw new Error(`Path not found: ${t}`)}return"object"==typeof o?JSON.stringify(o,null,2):String(o)}catch(e){throw new Error(`JSON Parse Error: ${e.message}`)}}(r,e.data.jsonPath),o(e.id,{output:u})}else if("text-to-speech"===c){const r=await Qm(e.id,t,n,!1);if(!r)throw new Error("No input connected to Text to Speech block");u=r,o(e.id,{output:u})}else if("variable"===c){const r=e.data.variableAction||"get",a=e.data.variableName||"";if(!a)throw new Error("Variable name not specified");if("get"===r)u=s[a]||"",o(e.id,{output:u});else{const r=await Qm(e.id,t,n,!1);if(!r)throw new Error("No input to save to variable");s[a]=r,u=`Variable "${a}" set to: ${r}`,o(e.id,{output:u})}}else if("file-export"===c){const r=await Qm(e.id,t,n,!1);if(!r)throw new Error("No input connected to File Export block");const a=e.data.filename||"output.txt",s=new Blob([r],{type:"text/plain"}),i=URL.createObjectURL(s),l=document.createElement("a");l.href=i,l.download=a,l.click(),URL.revokeObjectURL(i),u=`File "${a}" downloaded successfully`,o(e.id,{output:u})}else if("custom-block"===c){const r=await Qm(e.id,t,n,!1),a=e.data.customCode||"return input;";try{u=new Function("input",a)(r),o(e.id,{output:u})}catch(e){throw new Error(`Custom code error: ${e.message}`)}}else"output"!==c&&"text-output"!==c||(u=await Qm(e.id,t,n,!1)||"No input",o(e.id,{output:u}));if(o(e.id,{isProcessing:!1}),"conditional"===c){const c=n.filter(t=>t.source===e.id);for(const e of c){const c=t.find(t=>t.id===e.target);c&&(!0===u&&"true"===e.sourceHandle||!1===u&&"false"===e.sourceHandle)&&await Jm(c,t,n,r,o,a,s,i,l)}}else{const c=n.filter(t=>t.source===e.id);for(const e of c){const c=t.find(t=>t.id===e.target);c&&await Jm(c,t,n,r,o,a,s,i,l)}}}catch(t){throw o(e.id,{isProcessing:!1,error:t.message}),t}}async function Qm(e,t,n,r){const o=n.filter(t=>t.target===e);if(0===o.length)return r?{textData:null,imageData:null}:null;if(r){let e=null,n=null;for(const r of o){const o=t.find(e=>e.id===r.source);o&&("image-input"===o.data.type?n=o.data.imageData:e=o.data.output||o.data.value||o.data.currentBatchItem||"")}return{textData:e,imageData:n}}{const e=o[0],n=t.find(t=>t.id===e.source);return n?n.data.output||n.data.value||n.data.currentBatchItem||"":null}}async function Zm(e,t){if(!t)throw new Error("OpenAI API key not set");const n=new Zd({apiKey:t,dangerouslyAllowBrowser:!0});try{return(await n.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"user",content:e}],temperature:.7,max_tokens:500})).choices[0].message.content}catch(e){throw new Error(`OpenAI API Error: ${e.message}`)}}const eg={megaBlock:function({data:e,id:t,selected:n}){const[o,a]=(0,r.useState)(null),s=e=>{console.log(`Action: ${e} on block ${t}`),a(null)},i="Input"===e.category||"start-block"===e.id,l="Output"===e.category||"end-block"===e.id,c="comment-sticky"===e.id;return r.createElement(r.Fragment,null,r.createElement("div",{className:`mega-block ${e.isProcessing?"processing":""} ${n?"selected":""} ${c?"sticky-note":""}`,style:{borderColor:e.color},onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),a({x:e.clientX,y:e.clientY})}},!i&&!c&&r.createElement(bo,{type:"target",position:Pr.Top,className:"mega-handle",style:{background:e.color}}),r.createElement("div",{className:"mega-block-header",style:{background:`${e.color}15`,borderBottom:`2px solid ${e.color}`}},r.createElement("div",{className:"mega-block-icon",style:{color:e.color}},e.isProcessing?"":e.icon),r.createElement("div",{className:"mega-block-title"},e.name)),r.createElement("div",{className:"mega-block-body"},e.modes&&e.modes.length>1&&r.createElement("select",{className:"mode-selector",value:e.currentMode||e.defaultMode,onChange:t=>{e.currentMode=t.target.value},onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation()},e.modes.map(e=>r.createElement("option",{key:e,value:e},e))),c&&r.createElement("textarea",{className:"sticky-textarea",placeholder:"Add your note here...",defaultValue:e.value||"",onChange:t=>{e.value=t.target.value},onKeyDown:e=>e.stopPropagation(),rows:6}),e.isProcessing&&r.createElement("div",{className:"processing-indicator"},r.createElement("div",{className:"spinner"}),r.createElement("span",null,"Processing...")),e.error&&r.createElement("div",{className:"error-message"}," ",e.error),e.output&&!e.isProcessing&&!c&&r.createElement("div",{className:"mega-output"},r.createElement("strong",null,"Result:"),r.createElement("div",{className:"output-content"},e.output))),!l&&!c&&r.createElement(bo,{type:"source",position:Pr.Bottom,className:"mega-handle",style:{background:e.color}})),o&&r.createElement(r.Fragment,null,r.createElement("div",{className:"context-menu-overlay",onClick:()=>a(null)}),r.createElement("div",{className:"context-menu",style:{left:`${o.x}px`,top:`${o.y}px`,position:"fixed"}},r.createElement("div",{className:"context-menu-item",onClick:()=>s("duplicate")}," Duplicate Block"),r.createElement("div",{className:"context-menu-item",onClick:()=>s("delete")}," Delete Block"),r.createElement("div",{className:"context-menu-item",onClick:()=>s("properties")}," Edit Properties"),r.createElement("div",{className:"context-menu-divider"}),r.createElement("div",{className:"context-menu-item",onClick:()=>s("comment")}," Add Sticky Note"),r.createElement("div",{className:"context-menu-item",onClick:()=>s("copy")}," Copy"),r.createElement("div",{className:"context-menu-item",onClick:()=>s("paste")}," Paste"),r.createElement("div",{className:"context-menu-divider"}),r.createElement("div",{className:"context-menu-item",onClick:()=>s("disable")}," ",e.disabled?"Enable":"Disable"," Block"),r.createElement("div",{className:"context-menu-item",onClick:()=>s("help")}," Help"))))}};let tg=1;const ng=function(){const[e,t,n]=Ms([]),[o,a,s]=Os([]),[i,l]=(0,r.useState)(null),[c,u]=(0,r.useState)({openai:"",anthropic:"",google:""}),[d,f]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[_,x]=(0,r.useState)([]),[S,k]=(0,r.useState)({}),E=(0,r.useRef)(null);(0,r.useEffect)(()=>{const n=n=>{const r=n.target;if("INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName&&!r.isContentEditable){if("Escape"===n.key&&v&&w(!1),"Delete"===n.key||"Backspace"===n.key){const r=e.filter(e=>e.selected),s=o.filter(e=>e.selected);(r.length>0||s.length>0)&&(n.preventDefault(),t(e.filter(e=>!e.selected)),a(o.filter(e=>!e.selected)))}(n.ctrlKey||n.metaKey)&&"s"===n.key&&(n.preventDefault(),A()),(n.ctrlKey||n.metaKey)&&"r"===n.key&&(n.preventDefault(),I())}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[v,e,o]),(0,r.useEffect)(()=>{document.body.classList.toggle("dark-mode",m)},[m]);const C=(0,r.useCallback)(e=>{a(t=>Jr({...e,animated:!0,style:{stroke:"#667eea",strokeWidth:2},markerEnd:{type:Rr.ArrowClosed,color:"#667eea"}},t))},[a]),N=(0,r.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),M=(0,r.useCallback)(e=>{e.preventDefault();const n=e.dataTransfer.getData("application/reactflow");if(!n)return;const r=JSON.parse(n),o=i.screenToFlowPosition({x:e.clientX,y:e.clientY}),a={id:""+tg++,type:"megaBlock",position:o,data:{...r,currentMode:r.defaultMode,value:"",output:null,isProcessing:!1,error:null,disabled:!1}};t(e=>e.concat(a))},[i,t]),O=(0,r.useCallback)((e,n)=>{t(t=>t.map(t=>t.id===e?{...t,data:{...t.data,...n}}:t))},[t]),I=async()=>{if(!c.openai&&!c.anthropic&&!c.google)return alert("Please set at least one API key in Settings first!"),void f(!0);p(!0);try{const t=e.filter(e=>"Input"===e.data.category&&e.data.value);if(t.length>0){const e=t.map(e=>e.data.value).join("\n");x(t=>[...t,{type:"input",content:e,blockName:"Workflow Input",timestamp:Date.now()}])}await async function(e,t,n,r,o,a){e.forEach(e=>{r(e.id,{output:null,isProcessing:!1,error:null})});const s=e.filter(e=>("input"===e.data.type||"text-input"===e.data.type||"image-input"===e.data.type||"variable"===e.data.type||"batch-input"===e.data.type)&&!t.some(t=>t.target===e.id));for(const i of s)if("batch-input"===i.data.type){const s=(i.data.batchItems||"").split("\n").filter(e=>e.trim());for(let l=0;l<s.length;l++)r(i.id,{output:`Processing batch item ${l+1}/${s.length}: ${s[l]}`,currentBatchItem:s[l]}),await Jm(i,e,t,n,r,new Set,o,a,s[l]),await new Promise(e=>setTimeout(e,500));r(i.id,{output:`Batch processing complete: ${s.length} items processed`})}else await Jm(i,e,t,n,r,new Set,o,a)}(e,o,c,O,S,[]);const n=e.filter(e=>e.data.output&&"Output"===e.data.category);if(n.length>0){const e=n.map(e=>e.data.output).join("\n\n");x(t=>[...t,{type:"output",content:e,blockName:"Workflow Output",timestamp:Date.now()}])}}catch(e){console.error("Workflow execution failed:",e),x(t=>[...t,{type:"output",content:` Error: ${e.message}`,timestamp:Date.now()}])}finally{p(!1)}},A=()=>{const t={nodes:e.map(e=>({...e,data:{...e.data,output:null,isProcessing:!1,error:null}})),edges:o,variables:S,metadata:{name:"Blokks Workflow",createdAt:(new Date).toISOString(),version:"1.0"}},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=`blokks-workflow-${Date.now()}.json`,a.click(),URL.revokeObjectURL(r)};return r.createElement("div",{className:`blokks-app ${m?"dark-mode":""} ${v?"fullscreen":""}`},r.createElement("div",{className:"blokks-ribbon"},r.createElement("div",{className:"ribbon-brand"},r.createElement("h1",null," Blokks")),r.createElement("div",{className:"ribbon-section"},r.createElement("div",{className:"ribbon-group"},r.createElement("button",{className:"ribbon-btn",onClick:()=>{window.confirm("Start a new workflow? Unsaved changes will be lost.")&&(t([]),a([]),x([]),k({}))},title:"New Workflow"},r.createElement("span",{className:"ribbon-icon"},""),r.createElement("span",null,"New")),r.createElement("button",{className:"ribbon-btn",onClick:A,title:"Save (Ctrl+S)"},r.createElement("span",{className:"ribbon-icon"},""),r.createElement("span",null,"Save")),r.createElement("button",{className:"ribbon-btn",onClick:()=>E.current?.click(),title:"Open"},r.createElement("span",{className:"ribbon-icon"},""),r.createElement("span",null,"Open")),r.createElement("input",{ref:E,type:"file",accept:".json",style:{display:"none"},onChange:e=>{const n=e.target.files[0];if(!n)return;const r=new FileReader;r.onload=e=>{try{const n=JSON.parse(e.target.result);if(n.nodes&&n.edges){t(n.nodes||[]),a(n.edges||[]),k(n.variables||{});const e=Math.max(...n.nodes.map(e=>parseInt(e.id)||0),0);tg=e+1,x(e=>[...e,{type:"output",content:" Workflow loaded successfully!",timestamp:Date.now()}])}}catch(e){alert("Error loading workflow: "+e.message)}},r.readAsText(n),e.target.value=""}})),r.createElement("div",{className:"ribbon-divider"}),r.createElement("div",{className:"ribbon-group"},r.createElement("button",{className:"ribbon-btn primary",onClick:I,disabled:h,title:"Run Workflow (Ctrl+R)"},r.createElement("span",{className:"ribbon-icon"},h?"":""),r.createElement("span",null,h?"Running":"Run")),r.createElement("button",{className:"ribbon-btn",onClick:()=>{window.confirm("Clear all blocks? This cannot be undone.")&&(t([]),a([]),x([]))},title:"Clear All"},r.createElement("span",{className:"ribbon-icon"},""),r.createElement("span",null,"Clear"))),r.createElement("div",{className:"ribbon-divider"}),r.createElement("div",{className:"ribbon-group"},r.createElement("button",{className:"ribbon-btn",onClick:()=>w(!v),title:v?"Exit Full Screen (Esc)":"Full Screen"},r.createElement("span",{className:"ribbon-icon"},""),r.createElement("span",null,v?"Exit":"Expand")),r.createElement("button",{className:"ribbon-btn",onClick:()=>g(!m),title:"Toggle Theme"},r.createElement("span",{className:"ribbon-icon"},m?"":""),r.createElement("span",null,"Theme"))),r.createElement("div",{className:"ribbon-divider"}),r.createElement("div",{className:"ribbon-group"},r.createElement("button",{className:"ribbon-btn",onClick:()=>f(!0),title:"API Keys"},r.createElement("span",{className:"ribbon-icon"},""),r.createElement("span",null,"Settings"))))),r.createElement("div",{className:"blokks-workspace"},!v&&r.createElement(li,{darkMode:m,isCollapsed:y,onToggle:()=>b(!y)}),r.createElement("div",{className:"blokks-main"},r.createElement("div",{className:"canvas-container"},r.createElement(Cs,{nodes:e,edges:o,onNodesChange:n,onEdgesChange:s,onConnect:C,onInit:l,onDrop:M,onDragOver:N,nodeTypes:eg,fitView:!0},r.createElement(Ls,{color:m?"#444":"#aaa",gap:16}),r.createElement(Vs,null))),r.createElement(ci,{messages:_,darkMode:m,onSendMessage:e=>{x(t=>[...t,{type:"input",content:e,timestamp:Date.now()}]),setTimeout(()=>{x(t=>[...t,{type:"output",content:`Received: "${e}" - Connect blocks to process this input.`,timestamp:Date.now()}])},500)}}))),d&&r.createElement(ui,{apiKeys:c,setApiKeys:u,onClose:()=>f(!1),darkMode:m}))};var rg=n(365),og={};og.styleTagTransform=oi(),og.setAttributes=ei(),og.insert=Qs().bind(null,"head"),og.domAPI=Gs(),og.insertStyleElement=ni(),Ks()(rg.A,og),rg.A&&rg.A.locals&&rg.A.locals,o.createRoot(document.getElementById("root")).render(r.createElement(ng,null))})();